{"version":3,"file":"fieldset-viewer.bundle.js","sources":["../src/fieldset-viewer.js"],"sourcesContent":["import {Cache, Type, Event, Tag, Loc, Text, Dom} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Popup} from 'main.popup';\nimport {Loader} from 'main.loader';\nimport {Button} from 'ui.buttons';\nimport {ListEditor} from 'crm.field.list-editor';\n\nimport './css/style.css';\n\ntype FieldsetViewerOptions = {\n\tentityTypeId: number,\n\tentityId: number,\n\tbindElement: HTMLElement,\n\tpopupOptions?: {[key: string]: any},\n\tfieldListEditorOptions?: {[key: string]: any},\n\tfieldsPanelOptions?: {[key: string]: any},\n\tevents: {\n\t\tonClose?: (BaseEvent) => void,\n\t},\n};\n\n\n/**\n * @namespace BX.Crm.Requisite\n */\nexport class FieldsetViewer extends EventEmitter\n{\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options: FieldsetViewerOptions = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Crm.Requisite.FieldsetViewer');\n\t\tthis.subscribeFromOptions(options?.events || {});\n\t\tthis.setOptions(options);\n\t\tEvent.bind(options.bindElement, 'click', this.onBindElementClick.bind(this));\n\t}\n\n\tsetData(data: {[key: string]: any})\n\t{\n\t\tthis.cache.set('data', data);\n\t}\n\n\tgetData(): {[key: string]: any}\n\t{\n\t\treturn this.cache.get('data', {});\n\t}\n\n\tload(): Promise<any>\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst {entityTypeId, entityId} = this.getOptions();\n\n\t\t\tBX.ajax\n\t\t\t\t.runAction('crm.api.fieldset.load', {json: {entityTypeId, entityId}})\n\t\t\t\t.then((result) => {\n\t\t\t\t\tresolve(result.data);\n\t\t\t\t});\n\t\t});\n\t}\n\n\tsetOptions(options: FieldsetViewerOptions)\n\t{\n\t\tthis.cache.set('options', {...options});\n\t}\n\n\tgetOptions(): FieldsetViewerOptions\n\t{\n\t\treturn this.cache.get('options');\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\treturn this.cache.remember('popup', () => {\n\t\t\tconst options = this.getOptions();\n\t\t\treturn new Popup({\n\t\t\t\tbindElement: options.bindElement,\n\t\t\t\tautoHide: false,\n\t\t\t\twidth: 570,\n\t\t\t\theight: 478,\n\t\t\t\tclassName: 'crm-requisite-fieldset-viewer',\n\t\t\t\tnoAllPaddings: true,\n\t\t\t\t...(Type.isPlainObject(options?.popupOptions) ? options?.popupOptions : {}),\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.emit('onClose', {changed: this.getIsChanged()});\n\t\t\t\t\t\tthis.setIsChanged(false);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tsetIsChanged(value: boolean)\n\t{\n\t\tthis.cache.set('isChanged', Text.toBoolean(value));\n\t}\n\n\tgetIsChanged(): boolean\n\t{\n\t\treturn this.cache.get('isChanged', false);\n\t}\n\n\tgetLoader(): Loader\n\t{\n\t\treturn this.cache.remember('loader', () => {\n\t\t\treturn new Loader();\n\t\t});\n\t}\n\n\tshow()\n\t{\n\t\tconst popup: Popup = this.getPopup();\n\t\tDom.clean(popup.getContentContainer());\n\t\tvoid this.getLoader().show(popup.getContentContainer());\n\n\t\tthis.load().then((result) => {\n\t\t\tthis.setData({...result});\n\t\t\tpopup.setContent(\n\t\t\t\tthis.createPopupContent(result),\n\t\t\t);\n\t\t});\n\n\t\tpopup.show();\n\t}\n\n\thide()\n\t{\n\t\tthis.getPopup().close();\n\t}\n\n\tonBindElementClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\t\tthis.show();\n\t}\n\n\tcreatePopupContent(data): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-requisite-fieldset-viewer-content\">\n\t\t\t\t${this.createBannerLayout(data)}\n\t\t\t\t${this.createListLayout(data)}\n\t\t\t\t${this.getFooterLayout()}\n\t\t\t\t${this.createCloseButton()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tcreateBannerLayout(data): HTMLDivElement\n\t{\n\t\tconst title = (\n\t\t\tLoc\n\t\t\t\t.getMessage('CRM_REQUISITE_FIELDSET_VIEWER_BANNER_TITLE')\n\t\t\t\t.replace('{{requisite}}', ` <strong>${Text.encode(data?.title)}</strong>`)\n\t\t);\n\n\t\tconst description = (() => {\n\t\t\tlet text = Loc.getMessage('CRM_REQUISITE_FIELDSET_VIEWER_BANNER_DESCRIPTION');\n\t\t\tif (Type.isStringFilled(data?.more))\n\t\t\t{\n\t\t\t\ttext += ` <a class=\"ui-link\" href=\"${Text.encode(data?.more)}\">\n\t\t\t\t\t\t${Loc.getMessage('CRM_REQUISITE_FIELDSET_VIEWER_BANNER_MORE_LINK_LABEL')}\n\t\t\t\t\t</a>`;\n\t\t\t}\n\n\t\t\treturn text;\n\t\t})();\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-requisite-fieldset-viewer-banner\">\n\t\t\t\t<div class=\"crm-requisite-fieldset-viewer-banner-text\">\n\t\t\t\t\t<div class=\"crm-requisite-fieldset-viewer-banner-text-title\">\n\t\t\t\t\t\t${title}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-requisite-fieldset-viewer-banner-text-description\">\n\t\t\t\t\t\t${description}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tcreateListLayout(data): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-requisite-fieldset-viewer-list\">\n\t\t\t\t${this.createListContainer(data.fields)}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tcreateListContainer(fields): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-requisite-fieldset-viewer-list-container\">\n\t\t\t\t${fields.map((options) => {\n\t\t\t\t\treturn this.createListItem(options);\t\n\t\t\t\t})}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tcreateListItem(options: {[key: string]: any}): HTMLDivElement\n\t{\n\t\tconst editButton = (() => {\n\t\t\tif (Type.isStringFilled(options?.editing?.url))\n\t\t\t{\n\t\t\t\tconst onEditButtonClick = () => {\n\t\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\t\toptions?.editing?.url,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcacheable: false,\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\t\t\tthis.show();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\n\t\t\t\t\tthis.setIsChanged(true);\n\t\t\t\t};\n\n\t\t\t\treturn Tag.render`\n\t\t\t\t\t<span \n\t\t\t\t\t\tclass=\"ui-btn ui-btn-link\" \n\t\t\t\t\t\tonclick=\"${onEditButtonClick}\">\n\t\t\t\t\t\t\t${Loc.getMessage('CRM_REQUISITE_FIELDSET_VIEWER_LIST_ITEM_VALUE_LINK_LABEL')}\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\t\t\t}\n\n\t\t\treturn '';\n\t\t})();\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"crm-requisite-fieldset-viewer-list-item\">\n\t\t\t\t<div class=\"crm-requisite-fieldset-viewer-list-item-left\">\n\t\t\t\t\t<div class=\"crm-requisite-fieldset-viewer-list-item-label\">${Text.encode(options?.label)}</div>\n\t\t\t\t\t<div class=\"crm-requisite-fieldset-viewer-list-item-value\">${Text.encode(options?.value)}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-requisite-fieldset-viewer-list-item-right\">\n\t\t\t\t\t${editButton}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tcreateCloseButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('closeButton', () => {\n\t\t\tconst onCloseClick = () => {\n\t\t\t\tthis.hide();\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div \n\t\t\t\t\tclass=\"crm-requisite-fieldset-viewer-close-button\"\n\t\t\t\t\tonclick=\"${onCloseClick}\"\n\t\t\t\t></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetFieldListEditor(): ListEditor\n\t{\n\t\treturn this.cache.remember('fieldListEditor', () => {\n\t\t\tconst options: FieldsetViewerOptions = this.getOptions();\n\t\t\treturn new ListEditor({\n\t\t\t\tsetId: this.getData().id,\n\t\t\t\ttitle: Loc.getMessage('CRM_REQUISITE_FIELDSET_VIEWER__SET_EDITOR_TITLE'),\n\t\t\t\teditable: {\n\t\t\t\t\tlabel: {\n\t\t\t\t\t\tlabel: Loc.getMessage('CRM_REQUISITE_FIELDSET_VIEWER__SET_EDITOR_NAME_LABEL'),\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t},\n\t\t\t\t\trequired: {\n\t\t\t\t\t\tlabel: Loc.getMessage('CRM_REQUISITE_FIELDSET_VIEWER__SET_EDITOR_REQUIRED_LABEL'),\n\t\t\t\t\t\ttype: 'checkbox',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tautoSave: false,\n\t\t\t\tevents: {\n\t\t\t\t\tonSave: () => this.show(),\n\t\t\t\t},\n\t\t\t\tfieldsPanelOptions: {\n\t\t\t\t\thideRequisites: false,\n\t\t\t\t\t...(Type.isPlainObject(options.fieldsPanelOptions) ? options.fieldsPanelOptions : {}),\n\t\t\t\t},\n\t\t\t\t...(Type.isPlainObject(options.fieldListEditorOptions) ? options.fieldListEditorOptions : {}),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetEditButton(): Button\n\t{\n\t\treturn this.cache.remember('editButton', () => {\n\t\t\treturn new Button({\n\t\t\t\ttext: Loc.getMessage('CRM_REQUISITE_FIELDSET_VIEWER_EDIT_BUTTON_LABEL'),\n\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\ticon: Button.Icon.EDIT,\n\t\t\t\tsize: Button.Size.SMALL,\n\t\t\t\tround: true,\n\t\t\t\tevents: {\n\t\t\t\t\tclick: this.onEditButtonClick.bind(this),\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tonEditButtonClick()\n\t{\n\t\tthis.getFieldListEditor().showSlider();\n\t\tthis.setIsChanged(true);\n\t}\n\n\tgetFooterLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('footerLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"crm-requisite-fieldset-viewer-footer\">\n\t\t\t\t\t${this.getEditButton().render()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}"],"names":["FieldsetViewer","EventEmitter","constructor","options","cache","Cache","MemoryCache","setEventNamespace","subscribeFromOptions","events","setOptions","Event","bind","bindElement","onBindElementClick","setData","data","set","getData","get","load","Promise","resolve","entityTypeId","entityId","getOptions","BX","ajax","runAction","json","then","result","getPopup","remember","Popup","autoHide","width","height","className","noAllPaddings","Type","isPlainObject","popupOptions","onClose","emit","changed","getIsChanged","setIsChanged","value","Text","toBoolean","getLoader","Loader","show","popup","Dom","clean","getContentContainer","setContent","createPopupContent","hide","close","event","preventDefault","Tag","render","createBannerLayout","createListLayout","getFooterLayout","createCloseButton","title","Loc","getMessage","replace","encode","description","text","isStringFilled","more","createListContainer","fields","map","createListItem","editButton","editing","url","onEditButtonClick","SidePanel","Instance","open","cacheable","label","onCloseClick","getFieldListEditor","ListEditor","setId","id","editable","type","required","autoSave","onSave","fieldsPanelOptions","hideRequisites","fieldListEditorOptions","getEditButton","Button","color","Color","LIGHT_BORDER","icon","Icon","EDIT","size","Size","SMALL","round","click","showSlider"],"mappings":"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"}