{"version":3,"file":"index.bundle.js","sources":["../src/item.js","../src/components/enums/icon-background-color.js","../src/components/layout/icon.js","../src/components/layout/menu.js","../src/action.js","../src/components/layout/header/change-stream-button.js","../src/components/layout/header/title.js","../src/components/enums/tag-type.js","../src/components/layout/header/tag.js","../src/components/layout/header/user.js","../src/components/layout/header/format-date.js","../src/components/layout/header/hint.js","../src/components/layout/header.js","../src/components/layout/body/logo.js","../src/components/layout/body/calendar-icon.js","../src/components/layout/body/logo-calendar.js","../src/components/layout/body.js","../src/components/enums/button-state.js","../src/components/layout/footer/add-button.js","../src/components/layout/footer/menu.js","../src/components/enums/button-type.js","../src/components/layout/button.js","../src/components/layout/footer/buttons.js","../src/components/enums/button-scope.js","../src/components/layout/footer.js","../src/components/layout/marketPanel.js","../src/components/layout/userPick.js","../src/stream-type.js","../src/components/item.js","../src/layout.js","../src/controller-manager.js","../src/configurable-item.js","../src/controllers/base.js","../src/controllers/activity.js","../src/components/enums/text-color.js","../src/components/enums/text-weight.js","../src/components/enums/text-size.js","../src/components/content-blocks/text.js","../src/components/content-blocks/link.js","../src/components/content-blocks/date.js","../src/components/content-blocks/with-title.js","../src/components/content-blocks/line-of-text-blocks.js","../src/components/enums/logo-type.js","../src/components/content-blocks/timeline-audio.js","../src/components/enums/client-mark.js","../src/components/content-blocks/client-mark.js","../src/components/content-blocks/money.js","../src/components/content-blocks/editable-text.js","../src/components/content-blocks/editable-description.js","../src/components/content-blocks/editable-date.js","../src/components/content-blocks/player-alert.js","../src/components/content-blocks/note.js","../src/components/content-blocks/date-pill.js","../src/controllers/common-content-blocks.js","../src/components/content-blocks/value-change.js","../src/controllers/modification.js","../src/components/content-blocks/chat-message.js","../src/controllers/openlines.js","../src/controllers/sign-document.js","../src/controllers/document.js","../src/controllers/call.js","../src/controllers/todo.js","../src/controller-registry.js"],"sourcesContent":["import {Dom, Type} from 'main.core'\n\nexport default class Item\n{\n\tconstructor()\n\t{\n\t\tthis._id = '';\n\t\tthis._isTerminated = false;\n\t\tthis._wrapper = null;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this._id;\n\t}\n\n\t_setId(id): void\n\t{\n\t\tthis._id = BX.type.isNotEmptyString(id) ? id : BX.util.getRandomString(4);\n\t}\n\n\t/**\n\t * @abstract\n\t */\n\tsetData(data): void\n\t{\n\t\tthrow new Error('Item.setData() must be overridden');\n\t}\n\n\t/**\n\t * @abstract\n\t */\n\tlayout(options): void\n\t{\n\t\tthrow new Error('Item.layout() must be overridden');\n\t}\n\n\trefreshLayout()\n\t{\n\t\tconst anchor = this._wrapper.previousSibling;\n\t\tthis.clearLayout();\n\n\t\tthis.layout({ anchor: anchor });\n\t}\n\n\tclearLayout()\n\t{\n\t\tDom.remove(this._wrapper);\n\t\tthis._wrapper = undefined;\n\t}\n\n\tdestroy()\n\t{\n\t\tthis.clearLayout();\n\t}\n\n\tgetWrapper(): ?HTMLElement\n\t{\n\t\treturn this._wrapper;\n\t}\n\n\tsetWrapper(wrapper: HTMLElement): void\n\t{\n\t\tthis._wrapper = wrapper;\n\t}\n\n\taddWrapperClass(className, timeout): void\n\t{\n\t\tif(!this._wrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tDom.addClass(this._wrapper, className);\n\n\t\tif(Type.isNumber(timeout) && timeout >= 0)\n\t\t{\n\t\t\twindow.setTimeout(this.removeWrapperClass.bind(this, className), timeout);\n\t\t}\n\t}\n\n\tremoveWrapperClass(className, timeout): void\n\t{\n\t\tif(!this._wrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.removeClass(this._wrapper, className);\n\t\tif(Type.isNumber(timeout) && timeout >= 0)\n\t\t{\n\t\t\twindow.setTimeout(this.addWrapperClass.bind(this, className), timeout);\n\t\t}\n\t}\n\n\tisTerminated(): boolean\n\t{\n\t\treturn this._isTerminated;\n\t}\n\n\tmarkAsTerminated(terminated): void\n\t{\n\t\tterminated = !!terminated;\n\n\t\tif (this._isTerminated === terminated)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isTerminated = terminated;\n\t\tif (!this._wrapper)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (terminated)\n\t\t{\n\t\t\tDom.addClass(this._wrapper, 'crm-entity-stream-section-last');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this._wrapper, 'crm-entity-stream-section-last');\n\t\t}\n\t}\n\n\tgetAssociatedEntityTypeId(): ?Number\n\t{\n\t\treturn null;\n\t}\n\n\tgetAssociatedEntityId(): ?Number\n\t{\n\t\treturn null;\n\t}\n\n}\n","export class IconBackgroundColor {\n\tstatic PRIMARY = 'primary';\n\tstatic PRIMARY_ALT = 'primary_alt';\n\tstatic FAILURE = 'failure';\n}","\nimport { IconBackgroundColor } from '../enums/icon-background-color';\nimport { Counter } from 'ui.cnt';\nimport { Dom } from 'main.core';\n\nexport const Icon = {\n\tprops: {\n\t\tcode: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'none',\n\t\t},\n\t\tcounterType: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tbackgroundColorToken: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: IconBackgroundColor.PRIMARY,\n\t\t},\n\t},\n\tinject: ['isLogMessage'],\n\tcomputed: {\n\t\tclassName() {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card_icon': true,\n\t\t\t\t[`--bg-${this.backgroundColorToken}`]: !!this.backgroundColorToken,\n\t\t\t\t[`--code-${this.code}`]: !!this.code,\n\t\t\t\t['--muted']: this.isLogMessage,\n\t\t\t}\n\t\t},\n\n\t\tcounterNodeContainer() {\n\t\t\treturn this.$refs.counter;\n\t\t},\n\t},\n\n\tmethods: {\n\t\trenderCounter() {\n\t\t\tif (!this.counterType) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tDom.clean(this.counterNodeContainer);\n\t\t\tconst counter = new Counter({\n\t\t\t\tvalue: 1,\n\t\t\t\tborder: true,\n\t\t\t\tcolor: Counter.Color[this.counterType.toUpperCase()],\n\t\t\t});\n\t\t\tcounter.renderTo(this.counterNodeContainer);\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.renderCounter();\n\t},\n\twatch: {\n\t\tcounterType(newCounterType): void // update if counter state changed\n\t\t{\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.renderCounter();\n\t\t\t});\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div :class=\"className\">\n\t\t\t<i></i>\n\t\t\t<div ref=\"counter\" v-show=\"!!counterType\" class=\"crm-timeline__card_icon_counter\"></div>\n\t\t</div>\n\t`\n};\n","import {MenuManager} from \"main.popup\";\nimport {Action} from \"../../action\";\n\nexport class Menu\n{\n\t#menuOptions = {};\n\t#vueComponent = {};\n\n\tconstructor(vueComponent: Object, menuItems: Array, menuOptions: ?Object)\n\t{\n\t\tthis.#vueComponent = vueComponent;\n\t\tthis.#menuOptions = menuOptions || {};\n\t\tthis.#menuOptions = {\n\t\t\tangle: false,\n\t\t\tcacheable: false,\n\t\t\t...this.#menuOptions\n\t\t};\n\n\t\tthis.#menuOptions.items = [];\n\t\tfor (const item of menuItems)\n\t\t{\n\t\t\tthis.#menuOptions.items.push(this.createMenuItem(item));\n\t\t}\n\t}\n\n\tshow(): void\n\t{\n\t\tMenuManager.show(this.#menuOptions);\n\t}\n\n\n\tcreateMenuItem(item): Object\n\t{\n\t\tif (item.hasOwnProperty('delimiter') && item.delimiter)\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: item.title || '',\n\t\t\t\tdelimiter: true\n\t\t\t};\n\t\t}\n\n\t\tconst result = {\n\t\t\ttext: item.title,\n\t\t\tvalue: item.title,\n\t\t};\n\n\t\tif (item.icon)\n\t\t{\n\t\t\tresult.className = 'menu-popup-item-' + item.icon;\n\t\t}\n\t\tif (item.menu)\n\t\t{\n\t\t\tresult.items = [];\n\t\t\tfor (const subItem of Object.values(item.menu.items || {}))\n\t\t\t{\n\t\t\t\tresult.items.push(this.createMenuItem(subItem));\n\t\t\t}\n\t\t}\n\t\telse if (item.action)\n\t\t{\n\t\t\tif (item.action.type === 'redirect')\n\t\t\t{\n\t\t\t\tresult.href = item.action.value;\n\t\t\t}\n\t\t\telse if (item.action.type === 'jsCode')\n\t\t\t{\n\t\t\t\tresult.onclick = item.action.value;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.onclick = () =>\n\t\t\t\t{\n\t\t\t\t\tthis.onMenuItemClick(item);\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tonMenuItemClick(item): void\n\t{\n\t\tconst menu = MenuManager.getCurrentMenu();\n\t\tif (menu)\n\t\t{\n\t\t\tmenu.close();\n\t\t}\n\n\t\t(new Action(item.action)).execute(this.#vueComponent);\n\t}\n\n\tstatic showMenu(vueComponent: Object, menuItems: Array, menuOptions: ?Object)\n\t{\n\t\tconst menu = new Menu(vueComponent, menuItems, menuOptions);\n\t\tmenu.show();\n\t}\n}","import {ajax, Type} from 'main.core';\nimport {UI} from 'ui.notification';\nimport {Menu} from \"./components/layout/menu\";\nimport {DateTimeFormat} from \"main.date\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\n\ndeclare type AnimationParams = {\n\ttarget: string,\n\ttype: string,\n\tforever: boolean,\n}\n\nconst AnimationTarget = {\n\tblock: 'block',\n\titem: 'item',\n};\n\nconst AnimationType = {\n\tdisable: 'disable',\n\tloader: 'loader',\n};\n\nexport class Action\n{\n\t#type: string = null;\n\t#value: string | Object  = null;\n\t#actionParams: ?Object = null;\n\t#animation: ?AnimationParams = null;\n\n\tconstructor(params)\n\t{\n\t\tthis.#type = params.type;\n\t\tthis.#value = params.value;\n\t\tthis.#actionParams = params.actionParams;\n\t\tthis.#animation = Type.isPlainObject(params.animation) ? params.animation : null;\n\t}\n\n\texecute(vueComponent): void\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (this.isJsEvent())\n\t\t\t{\n\t\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\t\taction: this.#value,\n\t\t\t\t\tactionType: 'jsEvent',\n\t\t\t\t\tactionData: this.#actionParams,\n\t\t\t\t\tanimationCallbacks: {\n\t\t\t\t\t\tonStart: this.#startAnimation.bind(this, vueComponent),\n\t\t\t\t\t\tonStop: this.#stopAnimation.bind(this, vueComponent),\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tresolve(true);\n\t\t\t}\n\t\t\telse if (this.isJsCode())\n\t\t\t{\n\t\t\t\tthis.#startAnimation(vueComponent);\n\t\t\t\teval(this.#value);\n\t\t\t\tthis.#stopAnimation(vueComponent);\n\t\t\t\tresolve(true);\n\t\t\t}\n\t\t\telse if (this.isAjaxAction())\n\t\t\t{\n\t\t\t\tthis.#startAnimation(vueComponent);\n\t\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\t\taction: this.#value,\n\t\t\t\t\tactionType: 'ajaxActionStarted',\n\t\t\t\t\tactionData: this.#actionParams,\n\t\t\t\t});\n\t\t\t\tajax.runAction(\n\t\t\t\t\tthis.#value,\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: this.#prepareRunActionParams(this.#actionParams),\n\t\t\t\t\t}\n\t\t\t\t).then(\n\t\t\t\t\t(response) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#stopAnimation(vueComponent);\n\t\t\t\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\t\t\t\taction: this.#value,\n\t\t\t\t\t\t\tactionType: 'ajaxActionFinished',\n\t\t\t\t\t\t\tactionData: this.#actionParams,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t},\n\t\t\t\t\t(response) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#stopAnimation(vueComponent);\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvueComponent.$Bitrix.eventEmitter.emit('crm:timeline:item:action', {\n\t\t\t\t\t\t\taction: this.#value,\n\t\t\t\t\t\t\tactionType: 'ajaxActionFailed',\n\t\t\t\t\t\t\tactionParams: this.#actionParams,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if (this.isRedirect())\n\t\t\t{\n\t\t\t\tthis.#startAnimation(vueComponent);\n\t\t\t\tlocation.href = this.#value;\n\t\t\t\tresolve(this.#value);\n\t\t\t}\n\t\t\telse if (this.isShowMenu())\n\t\t\t{\n\t\t\t\tMenu.showMenu(\n\t\t\t\t\tvueComponent,\n\t\t\t\t\tthis.#prepareMenuItems(this.#value.items, vueComponent),\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'actionMenu',\n\t\t\t\t\t\tbindElement: vueComponent.$el,\n\t\t\t\t\t\tminWidth: vueComponent.$el.offsetWidth,\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tresolve(true);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treject(false);\n\t\t\t}\n\t\t});\n\t}\n\n\tisJsEvent(): boolean\n\t{\n\t\treturn (this.#type === 'jsEvent');\n\t}\n\n\tisJsCode(): boolean\n\t{\n\t\treturn (this.#type === 'jsCode');\n\t}\n\n\tisAjaxAction(): boolean\n\t{\n\t\treturn (this.#type === 'runAjaxAction');\n\t}\n\n\tisRedirect(): boolean\n\t{\n\t\treturn (this.#type === 'redirect');\n\t}\n\n\tisShowMenu(): boolean\n\t{\n\t\treturn (this.#type === 'showMenu');\n\t}\n\n\tgetValue(): string | Object\n\t{\n\t\treturn this.#value;\n\t}\n\n\t#prepareRunActionParams(params): Object\n\t{\n\t\tconst result = {};\n\n\t\tif (Type.isUndefined(params))\n\t\t{\n\t\t\treturn result;\n\t\t}\n\t\tfor (const paramName in params)\n\t\t{\n\t\t\tconst paramValue = params[paramName];\n\t\t\tif (Type.isDate(paramValue))\n\t\t\t{\n\t\t\t\tresult[paramName] = DateTimeFormat.format(DatetimeConverter.getSiteDateTimeFormat(), paramValue);\n\t\t\t}\n\t\t\telse if (Type.isPlainObject(paramValue))\n\t\t\t{\n\t\t\t\tresult[paramName] = this.#prepareRunActionParams(paramValue);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult[paramName] = paramValue;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t#prepareMenuItems(items: Object, vueComponent: Object): Array\n\t{\n\t\treturn Object.values(items)\n\t\t\t.filter((item) => (item.state !== 'hidden' && item.scope !== 'mobile' && (!vueComponent.isReadOnly || !item.hideIfReadonly)))\n\t\t\t.sort((a, b) => (a.sort - b.sort))\n\t\t;\n\t}\n\n\t#startAnimation(vueComponent)\n\t{\n\t\tif (!this.#isAnimationValid())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (this.#animation.target === AnimationTarget.item)\n\t\t{\n\t\t\tif (this.#animation.type === AnimationType.disable)\n\t\t\t{\n\t\t\t\tvueComponent.$root.setFaded(true);\n\t\t\t}\n\t\t\tif (this.#animation.type === AnimationType.loader)\n\t\t\t{\n\t\t\t\tvueComponent.$root.showLoader(true);\n\t\t\t}\n\t\t}\n\t\tif (this.#animation.target === AnimationTarget.block)\n\t\t{\n\t\t\tif (this.#animation.type === AnimationType.disable)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(vueComponent.setDisabled))\n\t\t\t\t{\n\t\t\t\t\tvueComponent.setDisabled(true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.#animation.type === AnimationType.loader)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(vueComponent.setLoading))\n\t\t\t\t{\n\t\t\t\t\tvueComponent.setLoading(true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t#stopAnimation(vueComponent)\n\t{\n\t\tif (!this.#isAnimationValid())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (this.#animation.forever)\n\t\t{\n\t\t\treturn; // should not be stopped\n\t\t}\n\n\t\tif (this.#animation.target === AnimationTarget.item)\n\t\t{\n\t\t\tif (this.#animation.type === AnimationType.disable)\n\t\t\t{\n\t\t\t\tvueComponent.$root.setFaded(false);\n\t\t\t}\n\t\t\tif (this.#animation.type === AnimationType.loader)\n\t\t\t{\n\t\t\t\tvueComponent.$root.showLoader(false);\n\t\t\t}\n\t\t}\n\t\tif (this.#animation.target === AnimationTarget.block)\n\t\t{\n\t\t\tif (this.#animation.type === AnimationType.disable)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(vueComponent.setDisabled))\n\t\t\t\t{\n\t\t\t\t\tvueComponent.setDisabled(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.#animation.type === AnimationType.loader)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(vueComponent.setLoading))\n\t\t\t\t{\n\t\t\t\t\tvueComponent.setLoading(false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t#isAnimationValid(): boolean\n\t{\n\t\tif (!this.#animation)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tif (!AnimationTarget.hasOwnProperty(this.#animation.target))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tif (!AnimationType.hasOwnProperty(this.#animation.type))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n}\n","import {Action} from \"../../../action\";\n\nexport const ChangeStreamButton = {\n\tprops: {\n\t\tdisableIfReadonly: Boolean,\n\t\ttype: String,\n\t\ttitle: String,\n\t\taction: Object,\n\t},\n\tdata(): Object {\n\t\treturn {\n\t\t\tisReadonlyMode: false,\n\t\t}\n\t},\n\tinject: [\n\t\t'isReadOnly',\n\t],\n\tmounted()\n\t{\n\t\tthis.isReadonlyMode = this.isReadOnly;\n\t},\n\tcomputed: {\n\t\tisShowPinButton() {\n\t\t\treturn this.type === 'pin' && !this.isReadonlyMode;\n\t\t},\n\n\t\tisShowUnpinButton() {\n\t\t\treturn this.type==='unpin' && !this.isReadonlyMode;\n\t\t},\n\t},\n\tmethods: {\n\t\texecuteAction() {\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst action = new Action(this.action);\n\t\t\taction.execute(this);\n\t\t},\n\t\tonClick(): void\n\t\t{\n\t\t\tif (this.action)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.action);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t},\n\t\tsetDisabled(disabled: boolean)\n\t\t{\n\t\t\tif (!this.isReadonly && !disabled)\n\t\t\t{\n\t\t\t\tthis.isReadonlyMode = false;\n\t\t\t}\n\t\t\tif (disabled)\n\t\t\t{\n\t\t\t\tthis.isReadonlyMode = true;\n\t\t\t}\n\t\t}\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-top_controller\">\n\t\t\t<input\n\t\t\t\tv-if=\"type === 'complete'\"\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\t:disabled=\"isReadonlyMode\"\n\t\t\t\tclass=\"crm-timeline__card-top_checkbox\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tv-else-if=\"isShowPinButton\"\n\t\t\t\t:title=\"title\"\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\tclass=\"crm-timeline__card-top_icon --pin\"\n\t\t\t></div>\n\t\t\t<div\n\t\t\t\tv-else-if=\"isShowUnpinButton\"\n\t\t\t\t:title=\"title\"\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\tclass=\"crm-timeline__card-top_icon --unpin\"\n\t\t\t></div>\n\t\t</div>\n\t`,\n};\n","import {Action} from \"../../../action\";\n\nexport const Title = {\n\tprops: {\n\t\ttitle: String,\n\t\taction: Object,\n\t},\n\tinject: ['isLogMessage'],\n\tcomputed: {\n\t\tclassName(): Array {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-title', {\n\t\t\t\t'--light': this.isLogMessage,\n\t\t\t\t'--action': !!this.action,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\n\t\thref(): ?string {\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst action = new Action(this.action);\n\t\t\tif (action.isRedirect())\n\t\t\t{\n\t\t\t\treturn action.getValue();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t},\n\tmethods: {\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst action = new Action(this.action);\n\t\t\taction.execute(this);\n\t\t}\n\t},\n\ttemplate: `\n\t\t<a\n\t\t\tv-if=\"href\"\n\t\t\t:href=\"href\"\n\t\t\t:class=\"className\"\n\t\t\ttabindex=\"0\"\n\t\t\t:title=\"title\"\n\t\t>\n\t\t\t{{title}}\n\t\t</a>\n\t\t<span\n\t\t\tv-else\n\t\t\t@click=\"executeAction\"\n\t\t\t:class=\"className\"\n\t\t\ttabindex=\"0\"\n\t\t\t:title=\"title\"\n\t\t>\n\t\t\t{{title}}\n\t\t</span>`\n};\n","export class TagType {\n\tstatic PRIMARY = 'primary';\n\tstatic SECONDARY = 'secondary';\n\tstatic SUCCESS = 'success';\n\tstatic WARNING = 'warning';\n\tstatic FAILURE = 'failure';\n}","import {Action} from \"../../../action\";\nimport {Label} from 'ui.label';\nimport {TagType} from '../../enums/tag-type';\n\nexport const Tag = {\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\taction: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: TagType.SECONDARY,\n\t\t},\n\t\tstate: String,\n\t},\n\tcomputed: {\n\t\tclassName(): Object {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card-status': true,\n\t\t\t\t'--clickable': !!this.action,\n\t\t\t}\n\t\t},\n\n\t\ttagTypeToLabelColorDict() {\n\t\t\treturn {\n\t\t\t\t[TagType.PRIMARY]: Label.Color.LIGHT_BLUE,\n\t\t\t\t[TagType.SECONDARY]: Label.Color.LIGHT,\n\t\t\t\t[TagType.SUCCESS]: Label.Color.LIGHT_GREEN,\n\t\t\t\t[TagType.WARNING]: Label.Color.LIGHT_YELLOW,\n\t\t\t\t[TagType.FAILURE]: Label.Color.LIGHT_RED,\n\t\t\t};\n\t\t},\n\n\t\ttagContainerRef() {\n\t\t\treturn this.$refs.tag;\n\t\t}\n\t},\n\tmethods: {\n\n\t\tgetLabelColorFromTagType(tagType) {\n\t\t\tconst lowerCaseTagType = tagType ? tagType.toLowerCase() : '';\n\t\t\tconst labelColor = this.tagTypeToLabelColorDict[lowerCaseTagType];\n\t\t\treturn labelColor ? labelColor : Label.Color.LIGHT;\n\t\t},\n\n\t\trenderTag(tagOptions): HTMLElement | null {\n\t\t\tif (!tagOptions || !this.tagContainerRef) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\n\t\t\tconst {title, type} = tagOptions;\n\n\t\t\tconst uppercaseTitle = title && typeof title === 'string' ? title.toUpperCase() : '';\n\t\t\tconst label = new Label({\n\t\t\t\ttext: uppercaseTitle,\n\t\t\t\tcolor: this.getLabelColorFromTagType(type),\n\t\t\t\tfill: true,\n\t\t\t});\n\n\t\t\tthis.tagContainerRef.appendChild(label.render());\n\t\t},\n\n\t\texecuteAction() {\n\t\t\tif (!this.action) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst action = new Action(this.action);\n\t\t\taction.execute(this);\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.renderTag({title: this.title, type: this.type});\n\t},\n\ttemplate: `\n\t\t<div ref=\"tag\" :class=\"className\" @click=\"executeAction\"></div>\n\t`\n};\n","import {Text} from \"main.core\"\n\nexport const User = {\n\tprops: {\n\t\ttitle: String,\n\t\tdetailUrl: String,\n\t\timageUrl: String,\n\t},\n\tinject: ['isLogMessage'],\n\tcomputed: {\n\t\tstyles()\n\t\t{\n\t\t\tif (!this.imageUrl)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tbackgroundImage: \"url('\" + Text.encode(this.imageUrl) + \"')\",\n\t\t\t\tbackgroundSize: '21px'\n\t\t\t};\n\t\t},\n\n\t\tclassName() {\n\t\t\treturn [\n\t\t\t\t'ui-icon',\n\t\t\t\t'ui-icon-common-user',\n\t\t\t\t'crm-timeline__user-icon', {\n\t\t\t\t'--muted': this.isLogMessage,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `<a :class=\"className\" :href=\"detailUrl\"\n\t\t\t\t  target=\"_blank\" :title=\"title\"><i :style=\"styles\"></i></a>`\n};\n","import { DatetimeConverter } from 'crm.timeline.tools';\n\nexport const FormatDate = {\n\tname: 'FormatDate',\n\tprops: {\n\t\ttimestamp: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t\tdefault: 0,\n\t\t},\n\n\t\tdatePlaceholder: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\n\t\tuseShortTimeFormat: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\n\t\tclass: {\n\t\t\ttype: [Array, Object, String],\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\tformattedDate() {\n\t\t\tif (!this.timestamp)\n\t\t\t{\n\t\t\t\treturn this.datePlaceholder;\n\t\t\t}\n\t\t\tconst converter = DatetimeConverter.createFromServerTimestamp(this.timestamp).toUserTime();\n\n\t\t\treturn this.useShortTimeFormat ? converter.toTimeString() : converter.toDatetimeString({delimiter: ', '});\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div :class=\"$props.class\">{{ formattedDate }}</div>\n\t`\n}","import { Popup, PopupOptions } from 'main.popup';\nimport {Event, Runtime, Dom} from 'main.core';\nimport { Action } from '../../../action';\n\nexport const Hint = {\n\tdata(): Object {\n\t\treturn {\n\t\t\tisMouseOnHintArea: false,\n\t\t\thintPopup: null,\n\t\t}\n\t},\n\tprops: {\n\t\ticon: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'auto-sum',\n\t\t},\n\t\ttextBlocks: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => ({\n\t\t\t\t'text1': {\n\t\t\t\t\ttype: 'text',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\ttext: 'Now the amount is calculated automatically based on the value of the goods in the transaction. ',\n\t\t\t\t\t\t// text: 'Hello my friend, want more?'\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t'link1' : {\n\t\t\t\t\ttype: 'link',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\ttext: 'More',\n\t\t\t\t\t\taction: () => {},\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}),\n\t\t},\n\t},\n\tcomputed: {\n\t\thintContentIcon(): HTMLElement {\n\t\t\tconst iconElement = Dom.create('i');\n\n\t\t\treturn Dom.create('div', {\n\t\t\t\tattrs: {\n\t\t\t\t\tclassname: this.hintContentIconClassname,\n\t\t\t\t},\n\t\t\t\tchildren: [iconElement],\n\t\t\t});\n\t\t},\n\n\t\thintContentText(): HTMLElement {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tattrs: {\n\t\t\t\t\tclassname: 'crm-timeline__hint_popup-content-text',\n\t\t\t\t},\n\t\t\t\tchildren: this.hintContentTextBlocks,\n\t\t\t});\n\t\t},\n\n\t\thintContentTextBlocks(): HTMLElement[] {\n\t\t\treturn Object.values(this.textBlocks).map(this.getContentBlockNode);\n\t\t},\n\n\t\thintContentIconClassname(): string {\n\t\t\tconst baseClassname = 'crm-timeline__hint_popup-content-icon';\n\t\t\treturn `${baseClassname} --${this.icon}`;\n\t\t},\n\n\t\thintIconClassname(): Array {\n\t\t\treturn [\n\t\t\t\t'ui-hint',\n\t\t\t\t'crm-timeline__header-hint', {\n\t\t\t\t'--active': this.hintPopup,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t},\n\tmethods: {\n\t\tgetHintContent(): HTMLElement {\n\t\t\treturn Dom.create('div', {\n\t\t\t\tattrs: {\n\t\t\t\t\tclassname: 'crm-timeline__hint_popup-content'\n\t\t\t\t},\n\t\t\t\tstyle: {\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t},\n\t\t\t\tchildren: [this.hintContentIcon, this.hintContentText],\n\t\t\t});\n\t\t},\n\n\t\tgetPopupOptions(): PopupOptions {\n\t\t\treturn {\n\t\t\t\tdarkMode: true,\n\t\t\t\tautoHide: false,\n\t\t\t\tcontent: this.getHintContent(),\n\t\t\t\tmaxWidth: 400,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'top',\n\t\t\t\t},\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t}\n\t\t},\n\n\t\tgetPopupPosition(): {left: number, right: number} {\n\t\t\tconst hintElem = this.$refs.hint;\n\t\t\tconst defaultAngleLeftOffset = Popup.getOption('angleLeftOffset');\n\t\t\tconst { width: hintWidth, left: hintLeftOffset, top: hintTopOffset } = Dom.getPosition(hintElem);\n\t\t\tconst { width: popupWidth } = Dom.getPosition(this.hintPopup?.getPopupContainer());\n\t\t\treturn {\n\t\t\t\tleft: hintLeftOffset + defaultAngleLeftOffset - (popupWidth - hintWidth) / 2,\n\t\t\t\ttop: hintTopOffset + 15,\n\t\t\t}\n\t\t},\n\n\t\tgetPopupAngleOffset(popupContainer: HTMLElement): number {\n\t\t\tconst angleWidth = 33;\n\t\t\tconst { width: popupWidth } = Dom.getPosition(popupContainer);\n\t\t\treturn (popupWidth - angleWidth) / 2;\n\t\t},\n\n\t\tonMouseEnterToPopup(): void {\n\t\t\tthis.isMouseOnHintArea = true;\n\t\t},\n\n\t\tonHintAreaMouseLeave(): void {\n\t\t\tthis.isMouseOnHintArea = false;\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!this.isMouseOnHintArea)\n\t\t\t\t{\n\t\t\t\t\tthis.hideHintPopup();\n\t\t\t\t}\n\t\t\t}, 400);\n\t\t},\n\n\t\tonMouseEnterToHint(): void {\n\t\t\tthis.isMouseOnHintArea = true;\n\t\t\tthis.showHintPopupWithDebounce();\n\t\t},\n\n\t\tshowHintPopup(): void {\n\t\t\tif (!this.isMouseOnHintArea || this.hintPopup && this.hintPopup.isShown())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.hintPopup = new Popup(this.getPopupOptions());\n\t\t\tconst popupContainer = this.hintPopup.getPopupContainer();\n\t\t\tEvent.bind(popupContainer, 'mouseenter', this.onMouseEnterToPopup);\n\t\t\tEvent.bind(popupContainer, 'mouseleave', this.onHintAreaMouseLeave);\n\t\t\tthis.hintPopup.show();\n\t\t\tthis.hintPopup.setBindElement(this.getPopupPosition());\n\t\t\tthis.hintPopup.setAngle(false);\n\t\t\tthis.hintPopup.setAngle({offset: this.getPopupAngleOffset(popupContainer, this.$refs.hint)});\n\t\t\tthis.hintPopup.adjustPosition();\n\t\t\tthis.hintPopup.show();\n\t\t},\n\n\t\tshowHintPopupWithDebounce() {\n\t\t\tRuntime.debounce(this.showHintPopup, 300, this)();\n\t\t},\n\n\t\thideHintPopup(): void {\n\t\t\tif (!this.hintPopup)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.hintPopup.close();\n\t\t\tconst popupContainer = this.hintPopup.getPopupContainer();\n\t\t\tEvent.unbind(popupContainer, 'mouseenter', this.onMouseEnterToPopup);\n\t\t\tEvent.unbind(popupContainer, 'mouseleave', this.onHintAreaMouseLeave);\n\t\t\tthis.hintPopup.destroy();\n\t\t\tthis.hintPopup = null;\n\t\t},\n\n\t\thideHintPopupWithDebounce(): void {\n\t\t\treturn Runtime.debounce(this.hideHintPopup, 300, this);\n\t\t},\n\n\t\tgetContentBlockNode(contentBlock): HTMLElement | null {\n\t\t\tif (contentBlock.type === 'text')\n\t\t\t{\n\t\t\t\treturn this.getTextNode(contentBlock.options);\n\t\t\t}\n\t\t\telse if (contentBlock.type === 'link')\n\t\t\t{\n\t\t\t\treturn this.getLinkNode(contentBlock.options);\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tgetTextNode(textOptions = {}): HTMLElement {\n\t\t\treturn Dom.create('span', {text: textOptions.text});\n\t\t},\n\n\t\tgetLinkNode(linkOptions = {}): HTMLElement {\n\t\t\tconst link = Dom.create('span', {text: linkOptions.text});\n\t\t\tDom.addClass(link, 'crm-timeline__hint_popup-content-link');\n\t\t\tlink.onclick = () => {\n\t\t\t\tthis.executeAction(linkOptions.action);\n\t\t\t}\n\n\t\t\treturn link;\n\t\t},\n\n\t\texecuteAction(actionObj): void {\n\t\t\tif (actionObj)\n\t\t\t{\n\t\t\t\tconst action = new Action(actionObj);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<span\n\t\t\tref=\"hint\"\n\t\t\t@click.stop.prevent\n\t\t\t@mouseenter=\"onMouseEnterToHint\"\n\t\t\t@mouseleave=\"onHintAreaMouseLeave\"\n\t\t\t:class=\"hintIconClassname\"\n\t\t>\n\t\t\t<span class=\"ui-hint-icon\" />\n\t\t</span>\n\t`\n}\n","import {ChangeStreamButton} from './header/change-stream-button'\nimport {Title} from './header/title'\nimport {Tag} from './header/tag'\nimport {User} from './header/user'\nimport {FormatDate} from './header/format-date';\nimport {Runtime} from 'main.core';\nimport {Hint} from './header/hint';\n\nexport const Header = {\n\tcomponents: {\n\t\tChangeStreamButton,\n\t\tTitle,\n\t\tTag,\n\t\tUser,\n\t\tFormatDate,\n\t\tHint,\n\t},\n\tprops: {\n\t\ttitle: String,\n\t\ttitleAction: Object,\n\t\tdate: Number,\n\t\tdatePlaceholder: String,\n\t\tuseShortTimeFormat: Boolean,\n\t\tchangeStreamButton: Object|null,\n\t\ttags: Object,\n\t\tuser: Object,\n\t\tinfoHelper: Object,\n\t},\n\tinject: [\n\t\t'isReadOnly',\n\t],\n\tcomputed: {\n\t\tvisibleTags(): Array\n\t\t{\n\t\t\treturn this.tags\n\t\t\t\t? Object.values(this.tags).filter(this.isVisibleTagFilter)\n\t\t\t\t: []\n\t\t\t;\n\t\t},\n\n\t\tvisibleAndAscSortedTags(): Array\n\t\t{\n\t\t\tconst tagsCopy = Runtime.clone(this.visibleTags);\n\t\t\treturn tagsCopy.sort(this.tagsAscSorter);\n\t\t},\n\n\t\tisShowDate(): boolean\n\t\t{\n\t\t\treturn this.date || this.datePlaceholder;\n\t\t},\n\t},\n\tmethods: {\n\t\tisVisibleTagFilter(tag): Boolean {\n\t\t\treturn tag.state !== 'hidden' && tag.scope !== 'mobile' && (!this.isReadOnly || !tag.hideIfReadonly);\n\t\t},\n\n\t\ttagsAscSorter(tagA, tagB): Number {\n\t\t\treturn tagA.sort - tagB.sort;\n\t\t},\n\n\t\tgetChangeStreamButton(): ?Object\n\t\t{\n\t\t\treturn this.$refs.changeStreamButton;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-top\">\n\t\t\t<div class=\"crm-timeline__card-top_info\">\n\t\t\t\t<div class=\"crm-timeline__card-top_info_left\">\n\t\t\t\t\t<ChangeStreamButton v-if=\"changeStreamButton\" v-bind=\"changeStreamButton\" ref=\"changeStreamButton\"></ChangeStreamButton>\n\t\t\t\t\t<Title :title=\"title\" :action=\"titleAction\"></Title>\n\t\t\t\t\t<Hint v-if=\"infoHelper\" v-bind=\"infoHelper\"></Hint>\n\t\t\t\t</div>\n\t\t\t\t<div ref=\"tags\" class=\"crm-timeline__card-top_info_right\">\n\t\t\t\t\t<Tag\n\t\t\t\t\t\tv-for=\"(tag, index) in visibleAndAscSortedTags\"\n\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\tv-bind=\"tag\"\n\t\t\t\t\t/>\n\t\t\t\t\t<FormatDate\n\t\t\t\t\t\tv-if=\"isShowDate\"\n\t\t\t\t\t\t:timestamp=\"date\"\n\t\t\t\t\t\t:use-short-time-format=\"useShortTimeFormat\"\n\t\t\t\t\t\t:date-placeholder=\"datePlaceholder\"\n\t\t\t\t\t\tclass=\"crm-timeline__card-time\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"crm-timeline__card-top_user\">\n\t\t\t\t<User v-bind=\"user\"></User>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {Action} from \"../../../action\";\n\nexport const Logo = {\n\tprops: {\n\t\ttype: String,\n\t\taddIcon: String,\n\t\taddIconType: String,\n\t\ticon: String,\n\t\ticonType: String,\n\t\tinCircle: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\taction: Object,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcurrentIcon: this.icon,\n\t\t}\n\t},\n\tcomputed: {\n\t\tclassName(): string\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-logo',\n\t\t\t\t`--${this.type}`, {\n\t\t\t\t'--clickable': this.action,\n\t\t\t\t}\n\t\t\t];\n\t\t},\n\n\t\ticonClassname() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-logo_icon',\n\t\t\t\t`--${this.currentIcon}`,\n\t\t\t\t`--type-${this.iconType}`, {\n\t\t\t\t\t'--in-circle': this.inCircle,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\n\t\taddIconClassname() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card-logo_add-icon',\n\t\t\t\t`--type-${this.addIconType}`,\n\t\t\t\t`--icon-${this.addIcon}`\n\t\t\t]\n\t\t},\n\t},\n\twatch: {\n\t\ticon(newIcon): void\n\t\t{\n\t\t\tthis.currentIcon = newIcon;\n\t\t}\n\t},\n\tmethods: {\n\t\texecuteAction() {\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst action = new Action(this.action);\n\t\t\taction.execute(this);\n\t\t},\n\t\tsetIcon(icon: String) {\n\t\t\tthis.currentIcon = icon;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div :class=\"className\" @click=\"executeAction\">\n\t\t\t<div class=\"crm-timeline__card-logo_content\">\n\t\t\t\t<div :class=\"iconClassname\">\n\t\t\t\t\t<i></i>\n\t\t\t\t</div>\n\t\t\t\t<div :class=\"addIconClassname\" v-if=\"addIcon\">\n\t\t\t\t\t<i></i>\n\t\t\t\t</div>\n\t\t\t</div>\n<!--\t\t\t<div v-if=\"action\" @click=\"executeAction\" class=\"crm-timeline__card-icon_action-btn\"></div>-->\n\t\t</div>\n\t`\n};\n","import {DateTimeFormat} from 'main.date';\nimport { DatetimeConverter } from 'crm.timeline.tools';\n\nexport const CalendarIcon = {\n\tprops: {\n\t\ttimestamp: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t\tdefault: 0,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tuserTime() {\n\t\t\treturn DatetimeConverter.createFromServerTimestamp(this.timestamp).toUserTime().getValue();\n\t\t},\n\t\tdate() {\n\t\t\treturn DateTimeFormat.format('d', this.userTime);\n\t\t},\n\t\tmonth() {\n\t\t\treturn DateTimeFormat.format('F', this.userTime);\n\t\t},\n\t\tdayWeek() {\n\t\t\treturn DateTimeFormat.format('D', this.userTime);\n\t\t},\n\n\t\ttime() {\n\t\t\treturn DatetimeConverter.createFromServerTimestamp(this.timestamp).toUserTime().toTimeString();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__calendar-icon\">\n\t\t\t<header class=\"crm-timeline__calendar-icon_top\">\n\t\t\t\t<div class=\"crm-timeline__calendar-icon_bullets\">\n\t\t\t\t\t<div class=\"crm-timeline__calendar-icon_bullet\"></div>\n\t\t\t\t\t<div class=\"crm-timeline__calendar-icon_bullet\"></div>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t<main class=\"crm-timeline__calendar-icon_content\">\n\t\t\t\t<div class=\"crm-timeline__calendar-icon_day\">{{ date }}</div>\n\t\t\t\t<div class=\"crm-timeline__calendar-icon_month\">{{ month }}</div>\n\t\t\t\t<div class=\"crm-timeline__calendar-icon_date\">\n\t\t\t\t\t<span class=\"crm-timeline__calendar-icon_day-week\">{{ dayWeek }}</span>\n\t\t\t\t\t<span class=\"crm-timeline__calendar-icon_time\">{{ time }}</span>\n\t\t\t\t</div>\n\t\t\t</main>\n\t\t</div>\n\t`\n}","import {BitrixVue} from 'ui.vue3';\n\nimport {Logo} from './logo';\nimport {CalendarIcon} from './calendar-icon';\n\nexport const LogoCalendar = BitrixVue.cloneComponent(Logo, {\n\tcomponents: {\n\t\tCalendarIcon,\n\t},\n\tprops: {\n\t\ttimestamp: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :class=\"className\" @click=\"executeAction\">\n\t\t\t<div class=\"crm-timeline__card-logo_content\">\n\t\t\t\t<CalendarIcon :timestamp=\"timestamp\" />\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import { Logo } from './body/logo';\nimport { LogoCalendar } from './body/logo-calendar';\nimport { Type } from 'main.core';\n\nexport const Body = {\n\tcomponents: {\n\t\tLogo,\n\t\tLogoCalendar,\n\t},\n\tprops: {\n\t\tlogo: Object,\n\t\tblocks: Object,\n\t},\n\tmounted() {\n\t\tconst blocks = this.$refs.blocks;\n\t\tif (!blocks || !this.visibleBlocks)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.visibleBlocks.forEach((block, index) => {\n\t\t\tif (Type.isDomNode(blocks[index].$el))\n\t\t\t{\n\t\t\t\tblocks[index].$el.setAttribute('data-id', block.id);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthrow new Error('Vue component \"' + block.rendererName + '\" was not found');\n\t\t\t}\n\t\t});\n\t},\n\tcomputed: {\n\t\tvisibleBlocks(): Array\n\t\t{\n\t\t\treturn Object.keys(this.blocks)\n\t\t\t\t.map((id) => ({id, ...this.blocks[id]}))\n\t\t\t\t.filter((item) => (item.scope !== 'mobile'))\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\tlet aSort = a.sort === undefined ? 0 : a.sort\n\t\t\t\t\tlet bSort = b.sort === undefined ? 0 : b.sort\n\n\t\t\t\t\tif (aSort < bSort) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tif (aSort > bSort) {\n\t\t\t\t\t\treturn  1;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn 0\n\t\t\t\t})\n\t\t\t;\n\t\t},\n\t},\n\tmethods: {\n\t\tgetContentBlockById(blockId: string): ?Object\n\t\t{\n\t\t\tconst blocks = this.$refs.blocks;\n\n\t\t\treturn this.visibleBlocks.reduce((found, block, index) => {\n\t\t\t\tif (found)\n\t\t\t\t{\n\t\t\t\t\treturn found;\n\t\t\t\t}\n\t\t\t\tif (block.id === blockId)\n\t\t\t\t{\n\t\t\t\t\treturn blocks[index];\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t}, null);\n\t\t},\n\t\tgetLogo(): ?Object\n\t\t{\n\t\t\treturn this.$refs.logo;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-body\">\n\t\t\t<div v-if=\"logo\" class=\"crm-timeline__card-logo_container\">\n\t\t\t\t<LogoCalendar v-if=\"logo.icon === 'calendar'\" v-bind=\"logo\"></LogoCalendar>\n\t\t\t\t<Logo v-else v-bind=\"logo\" ref=\"logo\"></Logo>\n\t\t\t</div>\n\t\t\t<div class=\"crm-timeline__card-container\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"block in visibleBlocks\"\n\t\t\t\t\t:key=\"block.id\"\n\t\t\t\t\tclass=\"crm-timeline__card-container_block\"\n\t\t\t\t>\n\t\t\t\t\t<component\n\t\t\t\t\t\t:is=\"block.rendererName\"\n\t\t\t\t\t\tv-bind=\"block.properties\"\n\t\t\t\t\t\tref=\"blocks\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","export class ButtonState {\n\tstatic DEFAULT = '';\n\tstatic LOADING = 'loading';\n\tstatic DISABLED = 'disabled';\n\tstatic HIDDEN = 'hidden';\n}","import {ButtonState} from \"../../enums/button-state\";\nimport {Action} from \"../../../action\";\n\nexport const AdditionalButtonIcon = Object.freeze({\n\tNOTE: 'note',\n\tSCRIPT: 'script',\n\tPRINT: 'print',\n\tDOTS: 'dots',\n});\n\nexport const AdditionalButtonColor = Object.freeze({\n\tDEFAULT: 'default',\n\tPRIMARY: 'primary',\n});\n\nexport const AdditionalButton = {\n\tprops: {\n\t\ticonName: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t\tvalidator(value: string) {\n\t\t\t\treturn Object.values(AdditionalButtonIcon).indexOf(value) > -1;\n\t\t\t},\n\t\t},\n\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: AdditionalButtonColor.DEFAULT,\n\t\t\tvalidator(value: string)\n\t\t\t{\n\t\t\t\treturn Object.values(AdditionalButtonColor).indexOf(value) > -1;\n\t\t\t},\n\t\t},\n\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\n\t\tstate: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ButtonState.DEFAULT,\n\t\t},\n\n\t\taction: Object,\n\t},\n\n\tcomputed: {\n\t\tclassName() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__card_add-button', {\n\t\t\t\t[`--icon-${this.iconName}`]: this.iconName,\n\t\t\t\t[`--color-${this.color}`]: this.color,\n\t\t\t\t},\n\t\t\t]\n\t\t},\n\t},\n\tmethods: {\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (this.action && this.currentState !== ButtonState.DISABLED && this.currentState !== ButtonState.LOADING)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.action);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :title=\"title\" :class=\"className\" @click=\"executeAction\"></div>\n\t`\n}","import {MenuManager} from \"main.popup\";\nimport {Menu as LayoutMenu} from \"../../layout/menu\";\nconst MenuId = 'timeline-more-button-menu';\nimport {AdditionalButton, AdditionalButtonColor, AdditionalButtonIcon} from './add-button';\n\nexport const Menu = {\n\tcomponents: {\n\t\tAdditionalButton,\n\t},\n\tprops: {\n\t\tbuttons: Array, // buttons that didn't fit into footer\n\t\titems: Object, // real menu items\n\t},\n\tinject: [\n\t\t'isReadOnly',\n\t],\n\tcomputed: {\n\t\titemsArray(): Array\n\t\t{\n\t\t\tif (!this.items)\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn Object.values(this.items)\n\t\t\t\t.filter((item) => (item.state !== 'hidden' && item.scope !== 'mobile' && (!this.isReadOnly || !item.hideIfReadonly)))\n\t\t\t\t.sort((a, b) => (a.sort - b.sort))\n\t\t\t;\n\t\t},\n\t\tmenuItems(): Array\n\t\t{\n\t\t\tlet result = this.buttons;\n\t\t\tif (this.buttons.length && this.itemsArray.length)\n\t\t\t{\n\t\t\t\tresult.push({delimiter: true});\n\t\t\t}\n\t\t\tresult = [...result, ...this.itemsArray];\n\n\t\t\treturn result;\n\t\t},\n\t\tbuttonProps() {\n\t\t\treturn {\n\t\t\t\tcolor: AdditionalButtonColor.DEFAULT,\n\t\t\t\ticon: AdditionalButtonIcon.DOTS,\n\t\t\t}\n\t\t},\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tconst menu = MenuManager.getMenuById(MenuId);\n\t\tif (menu)\n\t\t{\n\t\t\tmenu.destroy();\n\t\t}\n\t},\n\tmethods: {\n\t\tshowMenu(): void\n\t\t{\n\t\t\tLayoutMenu.showMenu(\n\t\t\t\tthis,\n\t\t\t\tthis.menuItems,\n\t\t\t\t{\n\t\t\t\t\tid: MenuId,\n\t\t\t\t\tclassName: 'crm-timeline__card_more-menu',\n\t\t\t\t\twidth: 230,\n\t\t\t\t\tangle: false,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tbindElement: this.$el,\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-action_menu-item\" @click=\"showMenu\">\n\t\t<AdditionalButton iconName=\"dots\" color=\"default\"></AdditionalButton>\n\t\t</div>\n\t`\n};\n","export class ButtonType {\n\tstatic ICON = 'icon';\n\tstatic PRIMARY = 'primary';\n\tstatic SECONDARY = 'secondary';\n\tstatic LIGHT = 'light';\n}","import {Action} from \"../../action\";\nimport { ButtonOptions, Button as UIButton } from 'ui.buttons';\nimport {ButtonType} from '../enums/button-type';\nimport {ButtonState} from '../enums/button-state';\nimport {Type} from 'main.core';\n\nexport const Button = {\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ButtonType.SECONDARY,\n\t\t},\n\t\tstate: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ButtonState.DEFAULT,\n\t\t},\n\t\ticonName: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'extra_small'\n\t\t},\n\t\taction: Object,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tpopup: null,\n\t\t\tuiButton: Object.freeze(null),\n\t\t\tcurrentState: this.state,\n\t\t}\n\t},\n\tcomputed: {\n\t\tbuttonOptions(): ButtonOptions {\n\t\t\tconst upperCaseIconName = Type.isString(this.iconName) ? this.iconName.toUpperCase() : '';\n\t\t\tconst upperCaseButtonSize = Type.isString(this.size) ? this.size.toUpperCase() : 'extra_small';\n\t\t\tconst color = this.itemTypeToButtonColorDict[this.type] || UIButton.Color.LIGHT_BORDER;\n\t\t\tconst text = this.type === ButtonType.ICON ? '' : this.title;\n\t\t\treturn {\n\t\t\t\tround: true,\n\t\t\t\tdependOnTheme: false,\n\t\t\t\tsize: UIButton.Size[upperCaseButtonSize],\n\t\t\t\ttext: text,\n\t\t\t\tcolor: color,\n\t\t\t\tstate: this.itemStateToButtonStateDict[this.currentState],\n\t\t\t\ticon: UIButton.Icon[upperCaseIconName],\n\t\t\t}\n\t\t},\n\n\t\titemTypeToButtonColorDict() {\n\t\t\treturn {\n\t\t\t\t[ButtonType.PRIMARY]: UIButton.Color.PRIMARY,\n\t\t\t\t[ButtonType.SECONDARY]: UIButton.Color.LIGHT_BORDER,\n\t\t\t\t[ButtonType.LIGHT]: UIButton.Color.LIGHT,\n\t\t\t\t[ButtonType.ICON]: UIButton.Color.LINK,\n\t\t\t}\n\t\t},\n\n\t\titemStateToButtonStateDict() {\n\t\t\treturn {\n\t\t\t\t[ButtonState.LOADING]: UIButton.State.WAITING,\n\t\t\t\t[ButtonState.DISABLED]: UIButton.State.DISABLED,\n\t\t\t}\n\t\t},\n\n\t\tbuttonContainerRef(): HTMLElement | undefined {\n\t\t\treturn this.$refs.buttonContainer;\n\t\t},\n\n\t},\n\tmethods: {\n\t\tgetUiButton(): ?UIButton\n\t\t{\n\t\t\treturn this.uiButton;\n\t\t},\n\n\t\tsetDisabled(disabled: boolean): void\n\t\t{\n\t\t\tif (disabled)\n\t\t\t{\n\t\t\t\tthis.setButtonState(ButtonState.DISABLED);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setButtonState(ButtonState.DEFAULT);\n\t\t\t}\n\t\t},\n\n\t\tsetLoading(loading: boolean): void\n\t\t{\n\t\t\tif (loading)\n\t\t\t{\n\t\t\t\tthis.setButtonState(ButtonState.LOADING);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setButtonState(ButtonState.DEFAULT);\n\t\t\t}\n\t\t},\n\n\t\tsetButtonState(state): void\n\t\t{\n\t\t\tif (this.currentState !== state)\n\t\t\t{\n\t\t\t\tthis.currentState = state;\n\t\t\t\tthis.getUiButton()?.setState(this.itemStateToButtonStateDict[this.currentState] ?? null);\n\t\t\t}\n\t\t},\n\n\t\trenderButton(): void {\n\t\t\tif (!this.buttonContainerRef) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.buttonContainerRef.innerHTML = '';\n\t\t\tconst button = new UIButton(this.buttonOptions);\n\t\t\tbutton.renderTo(this.buttonContainerRef);\n\t\t\tthis.uiButton = button;\n\t\t},\n\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (this.action && this.currentState !== ButtonState.DISABLED && this.currentState !== ButtonState.LOADING)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.action);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t},\n\n\t\tonLayoutUpdated(): void\n\t\t{\n\t\t\tthis.setButtonState(this.state);\n\t\t},\n\n\t},\n\tcreated() {\n\t\tthis.$Bitrix.eventEmitter.subscribe('layout:updated', this.onLayoutUpdated);\n\t},\n\tbeforeDestroy(): void\n\t{\n\t\tthis.$Bitrix.eventEmitter.unsubscribe('layout:updated', this.onLayoutUpdated);\n\t},\n\tmounted() {\n\t\tthis.renderButton();\n\t},\n\tupdated() {\n\t\tthis.renderButton();\n\t},\n\twatch: {\n\t\tstate(newValue): void\n\t\t{\n\t\t\tthis.setButtonState(newValue);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"$attrs.class\"\n\t\t\tref=\"buttonContainer\"\n\t\t\t@click=\"executeAction\">\n\t\t</div>\n\t`\n};\n","import {Button} from '../button';\n\nexport const Buttons = {\n\tcomponents: {\n\t\tButton,\n\t},\n\tprops: {\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: () => [],\n\t\t},\n\t},\n\tmethods: {\n\t\tgetButtonById(buttonId: string): ?Object\n\t\t{\n\t\t\tconst buttons = this.$refs.buttons;\n\n\t\t\treturn this.items.reduce((found, button, index) =>\n\t\t\t{\n\t\t\t\tif (found)\n\t\t\t\t{\n\t\t\t\t\treturn found;\n\t\t\t\t}\n\t\t\t\tif (button.id === buttonId)\n\t\t\t\t{\n\t\t\t\t\treturn buttons[index];\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t}, null);\n\t\t},\n\t},\n\ttemplate:\n\t\t`\n\t\t\t<div class=\"crm-timeline__card-action_buttons\">\n\t\t\t\t<Button class=\"crm-timeline__card-action-btn\" v-for=\"item in items\" v-bind=\"item\" ref=\"buttons\" />\n\t\t\t</div>\n\t\t`\n};\n","export class ButtonScope {\n\tstatic MOBILE = 'mobile';\n}","import {Menu} from './footer/menu';\nimport {Buttons} from './footer/buttons';\nimport {Type} from 'main.core';\nimport {Button} from './button';\nimport {ButtonState} from '../enums/button-state';\nimport {ButtonScope} from '../enums/button-scope';\nimport {ButtonType} from '../enums/button-type';\nimport {AdditionalButton} from './footer/add-button';\n\nexport const Footer = {\n\tcomponents: {\n\t\tButtons,\n\t\tMenu,\n\t\tButton,\n\t\tAdditionalButton,\n\t},\n\tprops: {\n\t\tbuttons: Object,\n\t\tmenu: Object,\n\t\tadditionalButtons: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t\tmaxBaseButtonsCount: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 3,\n\t\t},\n\n\t},\n\tinject: [\n\t\t'isReadOnly',\n\t],\n\tcomputed: {\n\t\tbaseButtons(): Array\n\t\t{\n\t\t\treturn this.visibleAndSortedButtons.slice(0, this.maxBaseButtonsCount);\n\t\t},\n\n\t\tmoreButtons(): Array\n\t\t{\n\t\t\treturn this.visibleAndSortedButtons.slice(this.maxBaseButtonsCount);\n\t\t},\n\n\n\t\tvisibleAndSortedButtons() {\n\t\t\treturn this.visibleButtons.sort(this.buttonsSorter);\n\t\t},\n\n\t\tvisibleAndSortedAdditionalButtons() {\n\t\t\treturn this.visibleAdditionalButtons.sort(this.buttonsSorter);\n\t\t},\n\n\t\tvisibleButtons(): Array\n\t\t{\n\t\t\treturn this.buttons\n\t\t\t\t?  Object.keys(this.buttons)\n\t\t\t\t\t.map((id) => ({id, ...this.buttons[id]}))\n\t\t\t\t\t.filter(this.visibleButtonsFilter)\n\t\t\t\t: [];\n\t\t},\n\n\t\tvisibleAdditionalButtons(): Array {\n\t\t\treturn this.additionalButtonsArray\n\t\t\t\t? Object.values(this.additionalButtonsArray).filter(this.visibleButtonsFilter)\n\t\t\t\t: [];\n\t\t},\n\n\t\tadditionalButtonsArray() {\n\t\t\treturn Object.entries(this.additionalButtons).map(([id, button]) => {\n\t\t\t\treturn {id, type: ButtonType.ICON, ...button};\n\t\t\t});\n\t\t},\n\n\t\thasMenu(): boolean\n\t\t{\n\t\t\treturn this.moreButtons.length || (Type.isPlainObject(this.menu) && Object.keys(this.menu).length);\n\t\t},\n\t},\n\tmethods: {\n\t\tvisibleButtonsFilter(buttonItem) {\n\t\t\treturn buttonItem.state !== ButtonState.HIDDEN\n\t\t\t\t&& buttonItem.scope !== ButtonScope.MOBILE\n\t\t\t\t&& (!this.isReadOnly || !buttonItem.hideIfReadonly);\n\t\t},\n\n\t\tbuttonsSorter(buttonA, buttonB) {\n\t\t\treturn buttonA?.sort - buttonB?.sort;\n\t\t},\n\n\t\tgetButtonById(buttonId: string): ?Object\n\t\t{\n\t\t\tif (this.$refs.buttons)\n\t\t\t{\n\t\t\t\tconst foundButton = this.$refs.buttons.getButtonById(buttonId);\n\t\t\t\tif (foundButton)\n\t\t\t\t{\n\t\t\t\t\treturn foundButton;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.$refs.additionalButtons)\n\t\t\t{\n\t\t\t\treturn this.visibleAndSortedAdditionalButtons.reduce((found, button, index) =>\n\t\t\t\t{\n\t\t\t\t\tif (found)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn found;\n\t\t\t\t\t}\n\t\t\t\t\tif (button.id === buttonId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn buttons[index];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t}, null);\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-action\">\n\t\t\t<Buttons ref=\"buttons\" :items=\"baseButtons\" />\n\t\t\t<div class=\"crm-timeline__card-action_menu\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"button in visibleAndSortedAdditionalButtons\"\n\t\t\t\t\t:key=\"button.id\"\n\t\t\t\t\tclass=\"crm-timeline__card-action_menu-item\"\n\t\t\t\t>\n\t\t\t\t\t<additional-button\n\t\t\t\t\t\tv-bind=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t</additional-button>\n\t\t\t\t</div>\n\t\t\t\t<Menu v-if=\"hasMenu\" :buttons=\"moreButtons\" v-bind=\"menu\" />\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import {Type} from \"main.core\";\nimport {Action} from \"../../action\";\n\nexport const MarketPanel = {\n\tprops: {\n\t\ttext: String,\n\t\tdetailsText: String,\n\t\tdetailsTextAction: Object,\n\n\t},\n\tcomputed: {\n\t\tneedShowDetailsText(): boolean\n\t\t{\n\t\t\treturn Type.isStringFilled(this.detailsText);\n\t\t},\n\t\thref(): ?string\n\t\t{\n\t\t\tif (!this.detailsTextAction)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst action = new Action(this.detailsTextAction);\n\t\t\tif (action.isRedirect())\n\t\t\t{\n\t\t\t\treturn action.getValue();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t},\n\tmethods: {\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (this.detailsTextAction)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.detailsTextAction);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-bottom\">\n\t\t<div class=\"crm-timeline__card-market\">\n\t\t\t<div class=\"crm-timeline__card-market_container\">\n\t\t\t\t<span class=\"crm-timeline__card-market_logo\"></span>\n\t\t\t\t<span class=\"crm-timeline__card-market_text\">{{ text }}</span>\n\t\t\t\t<a\n\t\t\t\t\tv-if=\"href && needShowDetailsText\"\n\t\t\t\t\t:href=\"href\"\n\t\t\t\t\tclass=\"crm-timeline__card-market_more\"\n\t\t\t\t>\n\t\t\t\t\t{{detailsText}}\n\t\t\t\t</a>\n\t\t\t\t<span\n\t\t\t\t\tv-if=\"!href && needShowDetailsText\"\n\t\t\t\t\t@click=\"executeAction\"\n\t\t\t\t\tclass=\"crm-timeline__card-market_more\"\n\t\t\t\t>\n\t\t\t\t{{detailsText}}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"crm-timeline__card-market_cross\"><i></i></div>\n\t\t</div>\n\t\t</div>\n\t`\n};\n","export const UserPick = {\n\ttemplate: `\n\t\t<div class=\"ui-icon ui-icon-common-user crm-timeline__card-top_user-icon\">\n\t\t\t<i></i>\n\t\t</div>\n\t`\n}","export const StreamType = {\n\thistory: 0,\n\tscheduled: 1,\n\tpinned: 2,\n}","import {Icon} from './layout/icon';\nimport {Header} from './layout/header';\nimport {Body} from './layout/body';\nimport {Footer} from './layout/footer';\nimport {MarketPanel} from './layout/marketPanel';\nimport {UserPick} from './layout/userPick';\nimport {Dom, Runtime} from \"main.core\";\nimport {BaseEvent} from \"main.core.events\";\nimport {Loader} from \"main.loader\";\nimport {StreamType} from '../stream-type';\n\nexport const Item = {\n\tcomponents: {\n\t\tIcon,\n\t\tHeader,\n\t\tBody,\n\t\tFooter,\n\t\tMarketPanel,\n\t\tUserPick\n\t},\n\tprops: {\n\t\tinitialLayout: Object,\n\t\tid: String,\n\t\tuseShortTimeFormat: Boolean,\n\t\tisLogMessage: Boolean,\n\t\tisReadOnly: Boolean,\n\t\tcurrentUser: Object | null,\n\t\tonAction: Function,\n\t\tstreamType: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: StreamType.history,\n\t\t}\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tlayout: this.initialLayout,\n\t\t\tisFaded: false,\n\t\t\tloader: Object.freeze(null),\n\t\t}\n\t},\n\tprovide() {\n\t\treturn {\n\t\t\tisLogMessage: !!this.initialLayout?.isLogMessage,\n\t\t\tisReadOnly: this.isReadOnly,\n\t\t\tcurrentUser: this.currentUser,\n\t\t};\n\t},\n\tcreated(): void\n\t{\n\t\tthis.$Bitrix.eventEmitter.subscribe('crm:timeline:item:action', this.onActionEvent);\n\t},\n\tbeforeDestroy(): void\n\t{\n\t\tthis.$Bitrix.eventEmitter.unsubscribe('crm:timeline:item:action', this.onActionEvent);\n\t},\n\tmethods: {\n\t\tonActionEvent(event: BaseEvent): void\n\t\t{\n\t\t\tconst eventData = event.getData();\n\t\t\tthis.onAction(Runtime.clone(eventData));\n\t\t},\n\t\tsetLayout(newLayout: Object): void\n\t\t{\n\t\t\tthis.layout = newLayout;\n\t\t\tthis.isFaded = false;\n\t\t\tthis.$Bitrix.eventEmitter.emit('layout:updated');\n\t\t},\n\n\t\tsetFaded(faded: boolean)\n\t\t{\n\t\t\tthis.isFaded = faded;\n\t\t},\n\n\t\tshowLoader(showLoader: boolean)\n\t\t{\n\t\t\tif (showLoader)\n\t\t\t{\n\t\t\t\tthis.setFaded(true);\n\t\t\t\tif (!this.loader)\n\t\t\t\t{\n\t\t\t\t\tthis.loader = new Loader();\n\t\t\t\t}\n\t\t\t\tthis.loader.show(this.$el.parentNode);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.loader)\n\t\t\t\t{\n\t\t\t\t\tthis.loader.hide();\n\t\t\t\t}\n\t\t\t\tthis.setFaded(false);\n\t\t\t}\n\t\t},\n\n\t\tgetContentBlockById(blockId: string): ?Object\n\t\t{\n\t\t\tif (!this.$refs.body)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.$refs.body.getContentBlockById(blockId);\n\t\t},\n\n\t\tgetLogo(): ?Object\n\t\t{\n\t\t\tif (!this.$refs.body)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.$refs.body.getLogo();\n\t\t},\n\n\t\tgetHeaderChangeStreamButton(): ?Object\n\t\t{\n\t\t\tif (!this.$refs.header)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.$refs.header.getChangeStreamButton();\n\t\t},\n\n\t\tgetFooterButtonById(buttonId: string): ?Object\n\t\t{\n\t\t\tif (!this.$refs.footer)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.$refs.footer.getButtonById(buttonId);\n\t\t},\n\n\t\thighlightContentBlockById(blockId: string, isHighlighted: boolean): void\n\t\t{\n\t\t\tif (!isHighlighted)\n\t\t\t{\n\t\t\t\tthis.isFaded = false;\n\t\t\t}\n\t\t\tconst block = this. getContentBlockById(blockId);\n\t\t\tif (!block)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (isHighlighted)\n\t\t\t{\n\t\t\t\tthis.isFaded = true;\n\t\t\t\tDom.addClass(block.$el, '--highlighted');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.isFaded = false;\n\t\t\t\tDom.removeClass(block.$el, '--highlighted');\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\ttimelineCardClassname() {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card': true,\n\t\t\t\t'crm-timeline__card-scope': true,\n\t\t\t\t'--stream-type-history': this.streamType === StreamType.history,\n\t\t\t\t'--stream-type-scheduled': this.streamType === StreamType.scheduled,\n\t\t\t\t'--stream-type-pinned': this.streamType === StreamType.pinned,\n\t\t\t\t'--log-message': !!this.layout.isLogMessage,\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div :data-id=\"id\" :class=\"timelineCardClassname\">\n\t\t\t<div class=\"crm-timeline__card_fade\" v-if=\"isFaded\"></div>\n\t\t\t<div class=\"crm-timeline__card_icon_container\">\n\t\t\t\t<Icon v-bind=\"layout.icon\"></Icon>\n\t\t\t</div>\n\t\t\t<Header v-if=\"layout.header\" v-bind=\"layout.header\" :use-short-time-format=\"useShortTimeFormat\" ref=\"header\"></Header>\n\t\t\t<Body v-if=\"layout.body\" v-bind=\"layout.body\" ref=\"body\"></Body>\n\t\t\t<Footer v-if=\"layout.footer\" v-bind=\"layout.footer\" ref=\"footer\"></Footer>\n\t\t\t<MarketPanel v-if=\"layout.marketPanel\" v-bind=\"layout.marketPanel\"></MarketPanel>\n\t\t</div>\n\t`\n};\n","import {Runtime} from 'main.core';\n\nexport default class Layout {\n\t#layout: Object = null;\n\n\tconstructor (layout: Object) {\n\t\tthis.#layout = layout;\n\t}\n\n\tasPlainObject (): Object {\n\t\treturn Runtime.clone(this.#layout);\n\t}\n\n\tgetFooterMenuItemById (id: string): ?Object {\n\t\tconst items = this.#layout?.footer?.menu?.items ?? {};\n\n\t\treturn items.hasOwnProperty(id) ? items.id : null;\n\t}\n\n\taddFooterMenuItem (menuItem: Object): void {\n\t\tthis.#layout.footer = this.#layout.footer || {};\n\t\tthis.#layout.footer.menu = this.#layout.footer.menu || {};\n\t\tthis.#layout.footer.menu.items = this.#layout.footer.menu.items || {};\n\t\tthis.#layout.footer.menu.items[menuItem.id] = menuItem;\n\t}\n}\n","import ConfigurableItem from \"./configurable-item\";\n\nexport default class ControllerManager\n{\n\t#id: ?string = null;\n\n\tconstructor(id)\n\t{\n\t\tthis.#id = id;\n\t}\n\n\tgetItemControllers(item: ConfigurableItem): Array\n\t{\n\t\tconst foundControllers = [];\n\t\tfor (const controller of ControllerManager.getRegisteredControllers())\n\t\t{\n\t\t\tif (controller.isItemSupported(item))\n\t\t\t{\n\t\t\t\tfoundControllers.push(new controller());\n\t\t\t}\n\t\t}\n\n\t\treturn foundControllers;\n\t}\n\n\tstatic getInstance(timelineId): ControllerManager\n\t{\n\t\tif (!this.#instances.hasOwnProperty(timelineId))\n\t\t{\n\t\t\tthis.#instances[timelineId] = new ControllerManager(timelineId);\n\t\t}\n\n\t\treturn this.#instances[timelineId];\n\t}\n\n\tstatic registerController(controller): void\n\t{\n\t\tthis.#availableControllers.push(controller);\n\t}\n\n\tstatic getRegisteredControllers(): Array\n\t{\n\t\treturn this.#availableControllers;\n\t}\n\n\tstatic #instances = {};\n\tstatic #availableControllers = [];\n}\n","import { Dom, Text, Type } from 'main.core';\nimport TimelineItem from './item';\nimport { Item } from './components/item';\nimport Layout from './layout';\nimport { BitrixVue } from 'ui.vue3';\nimport ControllerManager from './controller-manager';\nimport { DatetimeConverter } from 'crm.timeline.tools';\nimport {StreamType} from 'crm.timeline.item';\n\ndeclare type ConfigurableItemParams = {\n\ttimelineId: string,\n\tcontainer: HTMLElement,\n\titemClassName: string,\n\tuseShortTimeFormat: boolean,\n\tisReadOnly: boolean,\n\tcurrentUser: ?Object,\n\tdata: ConfigurableItemData,\n\tstreamType: number;\n};\n\ndeclare type ConfigurableItemData = {\n\ttype: string,\n\ttimestamp: ?Number,\n\tsort: ?Array,\n\tlayout: ?Object,\n}\n\nexport default class ConfigurableItem extends TimelineItem\n{\n\t#container: HTMLElement = null;\n\t#itemClassName: string = null;\n\t#type: string = null;\n\t#timelineId: string = null;\n\t#timestamp: number = null;\n\t#sort: Array = null;\n\t#useShortTimeFormat: boolean = false;\n\t#isReadOnly: boolean = false;\n\t#currentUser: ?Object = null;\n\t#controllers: Array = null;\n\t#layoutComponent: ?Object = null;\n\t#layoutApp: ?Object = null;\n\t#layout: ?Layout = null;\n\t#streamType: number = null;\n\n\tinitialize(id, settings: ConfigurableItemParams): void\n\t{\n\t\tthis._setId(id);\n\t\tsettings = settings || {};\n\t\tthis.#timelineId = settings.timelineId || '';\n\t\tthis.setContainer(settings.container || null);\n\t\tthis.#itemClassName = settings.itemClassName || '';\n\n\t\tif (Type.isPlainObject(settings.data))\n\t\t{\n\t\t\tthis.setData(settings.data);\n\n\t\t\tthis.#useShortTimeFormat = settings.useShortTimeFormat || false;\n\t\t\tthis.#isReadOnly = settings.isReadOnly || false;\n\t\t\tthis.#currentUser = settings.currentUser || null;\n\t\t\tthis.#streamType = settings.streamType || StreamType.history;\n\t\t}\n\n\t\tthis.#controllers = ControllerManager.getInstance(this.#timelineId).getItemControllers(this);\n\t}\n\n\tsetData(data: ConfigurableItemData): void\n\t{\n\t\tthis.#type = data.type || null;\n\t\tthis.#timestamp = data.timestamp || null;\n\t\tthis.#sort = data.sort || [];\n\t\tthis.#layout = new Layout(data.layout || {});\n\t}\n\n\tgetLayout(): Layout\n\t{\n\t\treturn this.#layout;\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn this.#type;\n\t}\n\n\tlayout(options): void\n\t{\n\t\tlet needBindToContainer = true;\n\t\tlet bindTo = null;\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\tneedBindToContainer = BX.prop.getBoolean(options, 'add', true);\n\t\t\tbindTo = Type.isElementNode(options['anchor']) ? options['anchor'] : null;\n\t\t}\n\t\tthis.setWrapper(Dom.create({tag: 'div', attrs: {className: this.#itemClassName}}));\n\t\tthis.#initLayoutApp();\n\n\t\tif (needBindToContainer)\n\t\t{\n\t\t\tif (bindTo && bindTo.nextSibling)\n\t\t\t{\n\t\t\t\tDom.insertBefore(this.getWrapper(), bindTo.nextSibling);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.append(this.getWrapper(), this.#container);\n\t\t\t}\n\t\t}\n\t}\n\n\trefreshLayout(): void\n\t{\n\t\t// try to refresh layout via vue reactivity, if possible:\n\t\tif (this.#layoutComponent)\n\t\t{\n\t\t\tthis.#layoutComponent.setLayout(this.getLayout().asPlainObject());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsuper.refreshLayout();\n\t\t}\n\t}\n\n\tgetLayoutContentBlockById(id: string): ?Object\n\t{\n\t\treturn this.#layoutComponent.getContentBlockById(id);\n\t}\n\n\tgetLogo(): ?Object\n\t{\n\t\treturn this.#layoutComponent.getLogo();\n\t}\n\n\tgetLayoutFooterButtonById(id: string): ?Object\n\t{\n\t\treturn this.#layoutComponent.getFooterButtonById(id);\n\t}\n\n\tgetLayoutHeaderChangeStreamButton(): ?Object\n\t{\n\t\treturn this.#layoutComponent.getHeaderChangeStreamButton();\n\t}\n\n\thighlightContentBlockById(blockId: string, isHighlighted: boolean): void\n\t{\n\t\tthis.#layoutComponent.highlightContentBlockById(blockId, isHighlighted);\n\t}\n\n\tclearLayout(): void\n\t{\n\t\tfor (const controller of this.#controllers)\n\t\t{\n\t\t\tcontroller.onBeforeItemClearLayout(this);\n\t\t}\n\t\tthis.#layoutApp.unmount();\n\t\tsuper.clearLayout();\n\t}\n\n\tgetCreatedDate(): Date\n\t{\n\t\tconst serverTimezoneDate = (this.#timestamp ? new Date(this.#timestamp * 1000) : new Date());\n\n\t\treturn BX.prop.extractDate((new DatetimeConverter(serverTimezoneDate)).toUserTime().getValue());\n\t}\n\n\tgetSourceId(): number\n\t{\n\t\tlet id = this.getId();\n\t\tif (!Type.isInteger(id))\n\t\t{\n\t\t\t// id is like ACTIVITY_12\n\t\t\tid = Text.toInteger(id.replace(/^\\D+/g, ''));\n\t\t}\n\n\t\treturn id;\n\t}\n\n\t#initLayoutApp(): void\n\t{\n\t\tif (!this.#layoutApp)\n\t\t{\n\t\t\tthis.#layoutApp = BitrixVue.createApp(Item, this.#getLayoutAppProps());\n\n\t\t\tconst contentBlockComponents = this.#getContentBlockComponents();\n\t\t\tfor (const componentName in contentBlockComponents)\n\t\t\t{\n\t\t\t\tthis.#layoutApp.component(componentName, contentBlockComponents[componentName]);\n\t\t\t}\n\n\t\t\tthis.#layoutComponent = this.#layoutApp.mount(this.getWrapper());\n\t\t}\n\t}\n\n\t#getLayoutAppProps(): Object\n\t{\n\t\treturn {\n\t\t\tinitialLayout: this.getLayout().asPlainObject(),\n\t\t\tid: String(this.getId()),\n\t\t\tuseShortTimeFormat: this.#useShortTimeFormat,\n\t\t\tisReadOnly: this.isReadOnly(),\n\t\t\tcurrentUser: this.getCurrentUser(),\n\t\t\tstreamType: this.#streamType,\n\t\t\tonAction: this.#onLayoutAppAction.bind(this),\n\t\t};\n\t}\n\n\t#onLayoutAppAction(eventData: ?Object)\n\t{\n\t\tfor (const controller of this.#controllers)\n\t\t{\n\t\t\tcontroller.onItemAction(this, eventData);\n\t\t}\n\t}\n\n\t#getContentBlockComponents(): Object\n\t{\n\t\tlet components = {};\n\t\tfor (const controller of this.#controllers)\n\t\t{\n\t\t\tcomponents = Object.assign(components, controller.getContentBlockComponents(this));\n\t\t}\n\n\t\treturn components;\n\t}\n\n\tsetContainer(container): void\n\t{\n\t\tthis.#container = container;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.#container;\n\t}\n\n\tgetDeadline(): ?Date\n\t{\n\t\tif (!this.#timestamp)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (new DatetimeConverter(new Date(this.#timestamp * 1000))).toUserTime().getValue();\n\t}\n\n\tgetSort(): Array\n\t{\n\t\treturn this.#sort;\n\t}\n\n\tisReadOnly(): boolean\n\t{\n\t\treturn this.#isReadOnly;\n\t}\n\n\tgetCurrentUser(): ?Object\n\t{\n\t\treturn this.#currentUser;\n\t}\n\n\tclone(): ConfigurableItem\n\t{\n\t\treturn ConfigurableItem.create(this.getId(), {\n\t\t\ttimelineId: this.#timelineId,\n\t\t\tcontainer: this.getContainer(),\n\t\t\titemClassName: this.#itemClassName,\n\t\t\tuseShortTimeFormat: this.#useShortTimeFormat,\n\t\t\tisReadOnly: this.#isReadOnly,\n\t\t\tcurrentUser: this.#currentUser,\n\t\t\tstreamType: this.#streamType,\n\t\t\tdata: {\n\t\t\t\ttype: this.#type,\n\t\t\t\ttimestamp: this.#timestamp,\n\t\t\t\tsort: this.#sort,\n\t\t\t\tlayout: this.getLayout().asPlainObject(),\n\t\t\t},\n\t\t});\n\t}\n\n\tstatic create(id, settings): ConfigurableItem\n\t{\n\t\tconst self = new ConfigurableItem();\n\t\tself.initialize(id, settings);\n\t\treturn self;\n\t}\n}\n","import ConfigurableItem from '../configurable-item';\n\ndeclare type ActionParams =\n{\n\taction: String,\n\tactionType: String,\n\tactionData: ?Object,\n\tanimationCallbacks: ?ActionAnimationCallbacks,\n};\n\ndeclare type ActionAnimationCallbacks =\n{\n\tonStart: ?function,\n\tonStop: ?function,\n};\n\nexport class Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\n\t}\n\n\tgetContentBlockComponents(item: ConfigurableItem): Object\n\t{\n\t\treturn {};\n\t}\n\n\t/**\n\t * Will be executed before item node deleted from DOM\n\t * @param item\n\t */\n\tonBeforeItemClearLayout(item: ConfigurableItem): void\n\t{\n\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn false;\n\t}\n}\n","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport {ajax as Ajax} from 'main.core';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport {UI} from 'ui.notification';\n\nexport class Activity extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData, animationCallbacks} = actionParams;\n\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (action === 'Activity:Edit' && actionData && actionData.activityId)\n\t\t{\n\t\t\tthis.#editActivity(actionData.activityId);\n\t\t}\n\t\tif (action === 'Activity:View' && actionData && actionData.activityId)\n\t\t{\n\t\t\tthis.#viewActivity(actionData.activityId);\n\t\t}\n\t\tif (action === 'Activity:Delete' && actionData && actionData.activityId)\n\t\t{\n\t\t\tconst confirmationText = actionData.confirmationText ?? '';\n\t\t\tif (confirmationText)\n\t\t\t{\n\t\t\t\tMessageBox.show({\n\t\t\t\t\tmessage: confirmationText,\n\t\t\t\t\tmodal: true,\n\t\t\t\t\tbuttons: MessageBoxButtons.YES_NO,\n\t\t\t\t\tonYes: () => {\n\t\t\t\t\t\treturn this.#deleteActivity(actionData.activityId, actionData.ownerTypeId, actionData.ownerId, animationCallbacks);\n\t\t\t\t\t},\n\t\t\t\t\tonNo: (messageBox) => {\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#deleteActivity(actionData.activityId, actionData.ownerTypeId, actionData.ownerId);\n\t\t\t}\n\t\t}\n\t}\n\n\t#viewActivity(id): void\n\t{\n\t\tconst editor = this.#getActivityEditor();\n\t\tif (editor && id)\n\t\t{\n\t\t\teditor.viewActivity(id);\n\t\t}\n\t}\n\n\t#editActivity(id): void\n\t{\n\t\tconst editor = this.#getActivityEditor();\n\t\tif (editor && id)\n\t\t{\n\t\t\teditor.editActivity(id);\n\t\t}\n\t}\n\n\t#deleteActivity(activityId: Number, ownerTypeId: Number, ownerId: Number, animationCallbacks: ?Object)\n\t{\n\t\tif (animationCallbacks.onStart)\n\t\t{\n\t\t\tanimationCallbacks.onStart();\n\t\t}\n\t\treturn Ajax.runAction(\n\t\t\t'crm.timeline.activity.delete',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tactivityId,\n\t\t\t\t\townerTypeId,\n\t\t\t\t\townerId,\n\t\t\t\t}\n\t\t\t}\n\t\t).then(() => {\n\t\t\tif (animationCallbacks.onStop)\n\t\t\t{\n\t\t\t\tanimationCallbacks.onStop();\n\t\t\t}\n\t\t\treturn true;\n\t\t}, (response) =>\n\t\t{\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\tautoHideDelay: 5000,\n\t\t\t});\n\t\t\tif (animationCallbacks.onStop)\n\t\t\t{\n\t\t\t\tanimationCallbacks.onStop();\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t}\n\n\t#getActivityEditor(): BX.CrmActivityEditor\n\t{\n\t\treturn BX.CrmActivityEditor.getDefault();\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\tconst itemType = item.getType();\n\n\t\treturn (\n\t\t\titemType.indexOf('Activity:') === 0  // for items with type started from `Activity:`\n\t\t\t|| itemType === 'TodoCreated' // TodoCreated can contain link to activity\n\t\t);\n\t}\n}\n\n","export class TextColor {\n\tstatic GREEN = 'green';\n\tstatic BASE_50 = 'base-50';\n\tstatic BASE_70 = 'base-70';\n\tstatic BASE_90 = 'base-90';\n}","export class TextWeight {\n\tstatic NORMAL = 'normal';\n\tstatic MEDIUM = 'medium';\n\tstatic BOLD = 'bold';\n}","export class TextSize {\n\tstatic XS = 'xs';\n\tstatic SM = 'sm';\n\tstatic MD = 'md';\n}","import { TextColor } from '../enums/text-color';\nimport { TextWeight } from '../enums/text-weight';\nimport { TextSize } from '../enums/text-size';\nimport {Text} from \"main.core\";\n\nexport default {\n\tprops: {\n\t\tvalue: String|Number,\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tweight: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'normal',\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: 'md',\n\t\t},\n\t\tmultiline: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tclassName(): Array {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__text-block',\n\t\t\t\tthis.colorClassname,\n\t\t\t\tthis.weightClassname,\n\t\t\t\tthis.sizeClassname,\n\t\t\t]\n\t\t},\n\t\tcolorClassname(): string {\n\t\t\tconst upperCaseColorProp = this.color ? this.color.toUpperCase() : '';\n\t\t\tconst color = TextColor[upperCaseColorProp] ? TextColor[upperCaseColorProp] : '';\n\t\t\treturn `--color-${color}`;\n\t\t},\n\n\t\tweightClassname(): string {\n\t\t\tconst upperCaseWeightProp = this.weight ? this.weight.toUpperCase() : '';\n\t\t\tconst weight = TextWeight[upperCaseWeightProp] ? TextWeight[upperCaseWeightProp] : TextWeight.NORMAL;\n\t\t\treturn `--weight-${weight}`\n\t\t},\n\n\t\tsizeClassname(): string {\n\t\t\tconst upperCaseWeightProp = this.size ? this.size.toUpperCase() : '';\n\t\t\tconst size = TextSize[upperCaseWeightProp] ? TextSize[upperCaseWeightProp] : TextSize.SM;\n\t\t\treturn `--size-${size}`;\n\t\t},\n\t\tencodedText(): string {\n\t\t\tlet text = Text.encode(this.value);\n\t\t\tif (this.multiline)\n\t\t\t{\n\t\t\t\ttext = text.replace(/\\n/g, '<br />');\n\t\t\t}\n\n\t\t\treturn text;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<span\n\t\t\t:title=\"title\"\n\t\t\t:class=\"className\"\n\t\t\tv-html=\"encodedText\"\n\t\t></span>`\n};\n","import {Action} from \"../../action\";\n\nexport default {\n\tprops: {\n\t\ttext: String,\n\t\taction: Object,\n\t\tbold: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\thref(): ?string\n\t\t{\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst action = new Action(this.action);\n\t\t\tif (action.isRedirect())\n\t\t\t{\n\t\t\t\treturn action.getValue();\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tclassName() {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card_link': true,\n\t\t\t\t'--bold': this.bold,\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (this.action)\n\t\t\t{\n\t\t\t\tconst action = new Action(this.action);\n\t\t\t\taction.execute(this);\n\t\t\t}\n\t\t}\n\t},\n\n\ttemplate:\n\t\t`\n\t\t\t<a\n\t\t\t\tv-if=\"href\"\n\t\t\t\t:href=\"href\"\n\t\t\t\t:class=\"className\"\n\t\t\t>\n\t\t\t{{text}}\n\t\t\t</a>\n\t\t\t<span\n\t\t\t\tv-else\n\t\t\t\t@click=\"executeAction\"\n\t\t\t\t:class=\"className\"\n\t\t\t>\n\t\t\t\t{{text}}\n\t\t\t</span>\n\t\t`\n};\n","import Text from \"./text\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\nimport {Text as CoreTextHelper} from \"main.core\";\n\nexport default {\n\tprops: {\n\t\twithTime: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\textends: Text,\n\tcomputed: {\n\t\tencodedText() {\n\t\t\tconst dateInUserTimezone = (DatetimeConverter.createFromServerTimestamp(this.value)).toUserTime();\n\n\t\t\treturn CoreTextHelper.encode(this.withTime\n\t\t\t\t? dateInUserTimezone.toDatetimeString({delimiter: ', '})\n\t\t\t\t: dateInUserTimezone.toDateString()\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: Text.template\n}\n","export default {\n\tprops: {\n\t\ttitle: String,\n\t\tinline: Boolean,\n\t\tcontentBlock: Object,\n\t},\n\tcomputed: {\n\t\tclassName(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-timeline__card-container_info': true,\n\t\t\t\t'--inline': this.inline,\n\t\t\t}\n\t\t}\n\t},\n\n\ttemplate:\n\t\t`\n\t\t\t<div :class=\"className\">\n\t\t\t\t<div class=\"crm-timeline__card-container_info-title\">{{ title }}</div>\n\t\t\t\t<div class=\"crm-timeline__card-container_info-value\">\n\t\t\t\t\t<component :is=\"contentBlock.rendererName\" v-bind=\"contentBlock.properties\"></component>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`\n};\n","import {Type} from 'main.core';\n\nexport default {\n\tprops: {\n\t\tblocks: Object,\n\t},\n\tmounted() {\n\t\tconst blocks = this.$refs.blocks;\n\t\tthis.visibleBlocks.forEach((block, index) => {\n\t\t\tif (Type.isDomNode(blocks[index].$el))\n\t\t\t{\n\t\t\t\tblocks[index].$el.setAttribute('data-id', block.id);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthrow new Error('Vue component \"' + block.rendererName + '\" was not found');\n\t\t\t}\n\t\t});\n\t},\n\tcomputed: {\n\t\tvisibleBlocks(): Array\n\t\t{\n\t\t\treturn Object.keys(this.blocks)\n\t\t\t\t.map((id) => ({id, ...this.blocks[id]}))\n\t\t\t\t.filter((item) => (item.scope !== 'mobile'))\n\t\t\t;\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<span class=\"crm-timeline-block-line-of-texts\">\n\t\t\t<span\n\t\t\t\tv-for=\"(block) in visibleBlocks\"\n\t\t\t\t:key=\"block.id\"\n\t\t\t>\n\t\t\t\t<component :is=\"block.rendererName\"\n\t\t\t\t\t\t   v-bind=\"block.properties\"\n\t\t\t\t\t\t   ref=\"blocks\"/>\n\t\t\t<span>&nbsp;</span>\n\t\t\t</span>\n\t\t</span>`\n};\n","export class LogoType {\n\tstatic CALL_AUDIO_PLAY = 'call-play-record';\n\tstatic CALL_AUDIO_PAUSE = 'call-pause-record';\n}\n","import {AudioPlayer, AudioPlayerState} from 'ui.vue3.components.audioplayer';\nimport {BitrixVue} from 'ui.vue3';\nimport {Menu} from 'main.popup';\nimport {Dom, bind, unbind} from 'main.core';\nimport { LogoType } from '../enums/logo-type';\n\nconst defaultPlaybackRateValues = [0.5, 0.7, 1.0, 1.2, 1.5, 1.7, 2.0];\n\nexport const TimelineAudio = BitrixVue.cloneComponent(AudioPlayer, {\n\tprops: {\n\t\tplaybackRateValues: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: () => defaultPlaybackRateValues,\n\t\t},\n\t\tisShowPlaybackRateMenu: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t...this.parentData(),\n\t\t\tplaybackRate: defaultPlaybackRateValues[2],\n\t\t\tisSeeking: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tcontainerClassname() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__audioplayer-contianer',\n\t\t\t\t'ui-vue-audioplayer-container', {\n\t\t\t\t'ui-vue-audioplayer-container-dark': this.isDark,\n\t\t\t\t'ui-vue-audioplayer-container-mobile': this.isMobile,\n\t\t\t}];\n\t\t},\n\t\tcontrolClassname() {\n\t\t\treturn [\n\t\t\t\t'ui-vue-audioplayer-control',\n\t\t\t\t'ui-btn-icon-start', {\n\t\t\t\t'ui-vue-audioplayer-control-loader': this.loading,\n\t\t\t\t'ui-vue-audioplayer-control-play': !this.loading && this.state !== this.State.play,\n\t\t\t\t'ui-vue-audioplayer-control-pause': !this.loading && this.state === this.State.play,\n\t\t\t}];\n\t\t},\n\t\ttimeCurrentClassname() {\n\t\t\treturn [\n\t\t\t\t'ui-vue-audioplayer-time',\n\t\t\t\t'ui-vue-audioplayer-time-current',\n\t\t\t\t{\n\t\t\t\t\t'--is-playing': this.state === this.State.play,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\n\t\ttotalTimeClassname() {\n\t\t\treturn [\n\t\t\t\t'ui-vue-audioplayer-total-time',\n\t\t\t]\n\t\t},\n\n\t\tprogressPosition() {\n\t\t\treturn `width: ${this.progressInPixel}px;`;\n\t\t},\n\n\t\tseekPosition() {\n\t\t\tconst minSeekWidth = 20;\n\t\t\tconst seekWidth = this.$refs.seek?.offsetWidth ? this.$refs.seek.offsetWidth : minSeekWidth;\n\n\t\t\treturn `left: ${this.progressInPixel - (seekWidth / 2)}px;`;\n\t\t},\n\n\t\tformatTimeCurrent() {\n\t\t\treturn this.formatTime(this.timeCurrent);\n\t\t},\n\n\t\tformatTimeTotal() {\n\t\t\treturn this.formatTime(this.timeTotal);\n\t\t},\n\n\t\tplaybackRateMenuItems() {\n\t\t\treturn this.playbackRateValues.map((rate) => {\n\t\t\t\treturn this.createPlaybackRateMenuItem({\n\t\t\t\t\ttext: this.getPlaybackRateOptionText(rate),\n\t\t\t\t\trate,\n\t\t\t\t\tisActive: rate === this.playbackRate,\n\t\t\t\t})\n\t\t\t});\n\t\t},\n\t},\n\tmethods: {\n\t\tchangePlaybackRate(playbackRate: number) {\n\t\t\tthis.playbackRate = playbackRate;\n\t\t\tif (this.$refs?.source?.playbackRate)\n\t\t\t{\n\t\t\t\tthis.$refs.source.playbackRate = playbackRate;\n\t\t\t}\n\t\t},\n\n\t\tcreatePlaybackRateMenuItem(options = {}) {\n\t\t\tconst rate = options.rate || 1;\n\t\t\tconst text = options.text || '';\n\t\t\tconst isActive = options.isActive || false;\n\t\t\tconst className = `playback-speed-menu-item ${isActive ? 'menu-popup-item-accept-sm' : ''}`;\n\n\t\t\treturn {\n\t\t\t\ttext: text,\n\t\t\t\tclassName,\n\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\tthis.changePlaybackRate(rate);\n\t\t\t\t\titem.menuWindow.popupWindow.close();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetPlaybackRateOptionText(rate: number): string {\n\t\t\treturn this.isFloat(rate) ? `${rate}x` : `${rate}.0x`;\n\t\t},\n\n\t\tshowPlaybackRateMenu() {\n\t\t\tconst menu = new Menu({\n\t\t\t\tid: `12xx${this.id}`,\n\t\t\t\tclassName: 'crm-timeline__playback-speed-menu_scope',\n\t\t\t\twidth: 100,\n\t\t\t\tbindElement: this.$refs.playbackRateButtonContainer,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupShow: ()=> {\n\t\t\t\t\t\tconst {width: btnContainerWidth} = Dom.getPosition(this.$refs.playbackRateButtonContainer);\n\t\t\t\t\t\tconst popupWindow = menu.getPopupWindow();\n\n\t\t\t\t\t\tpopupWindow.setOffset({\n\t\t\t\t\t\t\toffsetLeft: btnContainerWidth / 2,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tpopupWindow.adjustPosition();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tangle: {\n\t\t\t\t\tposition: 'top',\n\t\t\t\t},\n\t\t\t\toffsetLeft: 0,\n\t\t\t\titems: this.playbackRateMenuItems,\n\t\t\t});\n\n\t\t\tmenu.show();\n\t\t},\n\n\t\tisFloat(n: number) {\n\t\t\treturn n % 1 !== 0;\n\t\t},\n\n\t\tstartSeeking(event) {\n\t\t\tthis.isSeeking = true;\n\t\t\tconst {clientX} = event;\n\t\t\tthis.source().pause();\n\n\t\t\tbind(document, 'mouseup', this.finishSeeking);\n\t\t\tbind(document, 'mousemove', this.seeking);\n\t\t\tthis.setSeekByCursor(clientX);\n\t\t},\n\n\t\tseeking(event) {\n\t\t\tif (!this.isSeeking)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst timeline = this.$refs.track;\n\t\t\tconst {clientX} = event;\n\n\t\t\tconst {left, right, width} = Dom.getPosition(timeline);\n\t\t\tif (clientX < left)\n\t\t\t{\n\t\t\t\tthis.seek = 0;\n\t\t\t}\n\t\t\telse if (clientX > right)\n\t\t\t{\n\t\t\t\tthis.seek = width - 1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.seek = clientX - left;\n\t\t\t}\n\n\t\t\tthis.setPosition();\n\n\t\t\tevent.preventDefault();\n\t\t},\n\n\t\tfinishSeeking() {\n\t\t\tthis.isSeeking = false;\n\t\t\tthis.setPosition();\n\t\t\tthis.source().play();\n\t\t\tunbind(document, 'mouseup', this.finishSeeking);\n\t\t\tunbind(document, 'mousemove', this.seeking);\n\t\t},\n\n\t\tsetSeekByCursor(x: number) {\n\t\t\tconst timeline = this.$refs.track;\n\t\t\tconst {clientX} = event;\n\n\t\t\tconst {left, right, width} = Dom.getPosition(timeline);\n\t\t\tif (clientX < left)\n\t\t\t{\n\t\t\t\tthis.seek = 0;\n\t\t\t}\n\t\t\telse if (x > right)\n\t\t\t{\n\t\t\t\tthis.seek = width;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.seek = clientX - left;\n\t\t\t}\n\t\t},\n\n\t\tsetPosition(event)\n\t\t{\n\t\t\tif (!this.loaded)\n\t\t\t{\n\t\t\t\tthis.loadFile(true);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst pixelPerPercent = this.$refs.track.offsetWidth / 100;\n\n\t\t\tthis.setProgress(this.seek / pixelPerPercent, this.seek);\n\n\t\t\tthis.source().currentTime = this.timeTotal/100*this.progress;\n\t\t},\n\n\n\t\tchangeLogoIcon(icon: String)\n\t\t{\n\t\t\tif (!this.$parent)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst logo = this.$parent.getLogo();\n\t\t\tif (!logo)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlogo.setIcon(icon);\n\t\t},\n\n\t\taudioEventRouterWrapper(eventName: String, event)\n\t\t{\n\t\t\tthis.audioEventRouter(eventName, event);\n\n\t\t\tif (eventName === 'play')\n\t\t\t{\n\t\t\t\tthis.changeLogoIcon(LogoType.CALL_AUDIO_PAUSE);\n\t\t\t}\n\n\t\t\tif (eventName === 'pause')\n\t\t\t{\n\t\t\t\tthis.changeLogoIcon(LogoType.CALL_AUDIO_PLAY);\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"containerClassname\"\n\t\t\tref=\"body\"\n\t\t>\n\t\t\t<div class=\"ui-vue-audioplayer-controls-container\">\n\t\t\t\t<button :class=\"controlClassname\" @click=\"clickToButton\">\n\t\t\t\t\t<svg v-if=\"state !== State.play\" class=\"ui-vue-audioplayer-control-icon\" width=\"9\" height=\"12\" viewBox=\"0 0 9 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.52196 5.40967L1.77268 0.637568C1.61355 0.523473 1.40621 0.510554 1.23498 0.604066C1.06375 0.697578 0.957151 0.881946 0.958524 1.0822V10.6259C0.956507 10.8265 1.06301 11.0114 1.23449 11.105C1.40597 11.1987 1.61368 11.1854 1.77268 11.0706L8.52196 6.29847C8.66466 6.19871 8.75016 6.0322 8.75016 5.85407C8.75016 5.67593 8.66466 5.50942 8.52196 5.40967Z\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<svg v-else width=\"8\" height=\"10\" viewBox=\"0 0 8 10\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path d=\"M2.5625 0.333008H0.375V9.66634H2.5625V0.333008Z\" fill=\"inherit\" />\n\t\t\t\t\t\t<path d=\"M7.25 0.333008H5.0625V9.66634H7.25V0.333008Z\" fill=\"inherit\" />\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class=\"ui-vue-audioplayer-timeline-container\">\n\t\t\t\t<div class=\"ui-vue-audioplayer-track-container\" @mousedown=\"startSeeking\" ref=\"track\">\n\t\t\t\t\t<div class=\"ui-vue-audioplayer-track-mask\"></div>\n\t\t\t\t\t<div class=\"ui-vue-audioplayer-track\" :style=\"progressPosition\"></div>\n\t\t\t\t\t<div @mousedown=\"startSeeking\" class=\"ui-vue-audioplayer-track-seek\" :style=\"seekPosition\">\n\t\t\t\t\t\t<div ref=\"seek\" class=\"ui-vue-audioplayer-track-seek-icon\"></div>\n\t\t\t\t\t</div>\n<!--\t\t\t\t\t<div class=\"ui-vue-audioplayer-track-event\" @mousemove=\"seeking\"></div>-->\n\t\t\t\t</div>\n\t\t\t\t<div :class=\"totalTimeClassname\">\n\t\t\t\t\t<div :class=\"timeCurrentClassname\">{{formatTimeCurrent}}</div>\n\t\t\t\t\t<div ref=\"totalTime\" class=\"ui-vue-audioplayer-time\">{{formatTimeTotal}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\t@click=\"showPlaybackRateMenu\"\n\t\t\t\tref=\"playbackRateButtonContainer\"\n\t\t\t\tclass=\"ui-vue-audioplayer_playback-speed-menu-container\"\n\t\t\t>\n\t\t\t\t{{ getPlaybackRateOptionText(playbackRate) }}\n\t\t\t</div>\n\t\t\t<audio\n\t\t\t\tv-if=\"src\"\n\t\t\t\t:src=\"src\"\n\t\t\t\tclass=\"ui-vue-audioplayer-source\"\n\t\t\t\tref=\"source\"\n\t\t\t\t:preload=\"preload\"\n\t\t\t\t@abort=\"audioEventRouter('abort', $event)\"\n\t\t\t\t@error=\"audioEventRouter('error', $event)\"\n\t\t\t\t@suspend=\"audioEventRouter('suspend', $event)\"\n\t\t\t\t@canplay=\"audioEventRouter('canplay', $event)\"\n\t\t\t\t@canplaythrough=\"audioEventRouter('canplaythrough', $event)\"\n\t\t\t\t@durationchange=\"audioEventRouter('durationchange', $event)\"\n\t\t\t\t@loadeddata=\"audioEventRouter('loadeddata', $event)\"\n\t\t\t\t@loadedmetadata=\"audioEventRouter('loadedmetadata', $event)\"\n\t\t\t\t@timeupdate=\"audioEventRouter('timeupdate', $event)\"\n\t\t\t\t@play=\"audioEventRouterWrapper('play', $event)\"\n\t\t\t\t@playing=\"audioEventRouter('playing', $event)\"\n\t\t\t\t@pause=\"audioEventRouterWrapper('pause', $event)\"\n\t\t\t></audio>\n\t\t</div>\n\t`\n});\n","export class ClientMark\n{\n\tstatic POSITIVE = 'positive';\n\tstatic NEUTRAL = 'neutral';\n\tstatic NEGATIVE = 'negative';\n}\n","import {ClientMark as ClientMarkType} from '../enums/client-mark';\n\nexport const ClientMark = {\n\tprops: {\n\t\tmark: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ClientMarkType.POSITIVE,\n\t\t},\n\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\n\t},\n\tcomputed: {\n\t\tclassName(): Object {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__client-mark': true,\n\t\t\t\t'--positive-mark': this.mark === ClientMarkType.POSITIVE,\n\t\t\t\t'--neutral-mark': this.mark === ClientMarkType.NEUTRAL,\n\t\t\t\t'--negative-mark': this.mark === ClientMarkType.NEGATIVE,\n\t\t\t}\n\t\t},\n\n\t\ticonClassname() {\n\t\t\treturn {\n\t\t\t\t'crm-timeline__client-mark_icon': true,\n\t\t\t\t'--flipped': this.mark === ClientMarkType.NEGATIVE,\n\t\t\t}\n\t\t},\n\n\n\t},\n\ttemplate: `\n\t\t<div :class=\"className\">\n\t\t\t<i class=\"crm-timeline__client-mark_icon-wrapper\">\n\t\t\t\t<svg :class=\"iconClassname\" width=\"11.35\" height=\"11.36\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M14.8367 6.7166L11.2351 6.71731C11.1314 6.71731 11.0313 6.65735 10.9925 6.56213C10.8303 6.15654 10.8366 5.69947 11.0144 5.29671C11.3127 4.42841 11.3466 3.49029 11.1124 2.60224C10.8676 1.9914 10.8028 0.875521 9.67347 0.82403C9.32009 0.876226 9.01184 1.08854 8.8341 1.39819C8.80235 1.45321 8.78895 1.5181 8.78895 1.58088C8.78895 1.58088 8.84085 2.6644 8.78895 3.41764C8.73706 4.17087 7.29571 6.08954 6.37945 7.30769C6.32161 7.38528 6.24049 7.43607 6.14456 7.45088C5.80104 7.50232 5.14581 7.58943 4.90962 7.62062C4.85434 7.62792 4.82201 7.69735 4.82201 7.72994C4.82201 9.2527 4.82201 11.5306 4.82201 14.5636C4.82201 14.5887 4.85234 14.6435 4.90623 14.6524C5.09126 14.6829 5.55408 14.7676 6.02112 14.9178C6.60798 15.1061 7.0968 15.5519 8.07513 15.882C8.12662 15.8997 8.18375 15.9088 8.23807 15.9088H12.8321C13.4253 15.803 13.8668 15.2959 13.8972 14.6872C13.9056 14.3479 13.8379 14.0121 13.699 13.7039C13.6792 13.6594 13.7053 13.6129 13.7533 13.6037C14.3422 13.4965 15.0786 12.3785 14.1715 11.4778C14.1476 11.4545 14.1518 11.4228 14.1842 11.4143C14.6843 11.2866 15.0674 10.8874 15.1844 10.3894C15.2296 10.199 15.2134 10.0022 15.1569 9.81524C15.0906 9.59235 14.9848 9.38356 14.8445 9.19735C14.8092 9.15079 14.8289 9.09013 14.8854 9.07179C15.3834 8.90321 15.7262 8.4271 15.7226 7.88538C15.7798 7.35424 15.353 6.71731 14.8367 6.7166ZM3.412 7.00439H0.808518C0.673089 7.00439 0.570107 7.1243 0.593384 7.25479L2.10567 15.7508C2.12895 15.8813 2.24392 15.9766 2.37865 15.9766H3.34146C3.49029 15.9766 3.61091 15.8588 3.61091 15.7135L3.63207 7.22023C3.63207 7.10102 3.53403 7.00439 3.412 7.00439Z\"/>\n\t\t\t\t</svg>\n\t\t\t</i>\n\t\t\t<span class=\"crm-timeline__client-mark_text\">{{ text }}</span>\n\t\t</div>\n\t`\n}\n","import { CurrencyCore } from \"currency.currency-core\";\nimport { Type } from \"main.core\";\n\nexport default {\n\tprops: {\n\t\topportunity: Number,\n\t\tcurrencyId: String,\n\t},\n\tcomputed: {\n\t\tmoneyHtml(): ?string\n\t\t{\n\t\t\tif (!Type.isNumber(this.opportunity) || !Type.isStringFilled(this.currencyId))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn CurrencyCore.currencyFormat(this.opportunity, this.currencyId, true);\n\t\t}\n\t},\n\ttemplate: `<span v-if=\"moneyHtml\" v-html=\"moneyHtml\"></span>`\n};\n","import Text from './text';\nimport { Action } from \"../../action\";\nimport {Runtime} from \"main.core\";\nimport {BitrixVue} from 'ui.vue3';\n\nexport default BitrixVue.cloneComponent(Text, {\n\tcomponents: {\n\t\tText,\n\t},\n\tprops: {\n\t\taction: Object,\n\t},\n\tdata(): Object {\n\t\treturn {\n\t\t\tisEdit: false,\n\t\t\tcurrentValue: this.value,\n\t\t\tinitialValue: this.value,\n\t\t\tactionTimeoutId: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttextProps(): Object {\n\t\t\treturn {\n\t\t\t\t...this.$props,\n\t\t\t\tvalue: this.currentValue,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\tenableEdit(): void\n\t\t{\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\tthis.isEdit = true;\n\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.$refs.input.focus();\n\t\t\t});\n\t\t},\n\t\tdisableEdit(): void\n\t\t{\n\t\t\tthis.isEdit = false;\n\n\t\t\tthis.scheduleActionExecution();\n\t\t},\n\n\t\tscheduleActionExecution(): void\n\t\t{\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\tthis.actionTimeoutId = setTimeout(this.executeAction.bind(this), 3 * 1000);\n\t\t},\n\t\tcancelScheduledActionExecution(): void\n\t\t{\n\t\t\tif (this.actionTimeoutId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.actionTimeoutId);\n\t\t\t\tthis.actionTimeoutId = null;\n\t\t\t}\n\t\t},\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (!this.action || this.currentValue === this.initialValue)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// to avoid unintended props mutation\n\t\t\tconst actionDescription = Runtime.clone(this.action);\n\n\t\t\tactionDescription.actionParams ??= {};\n\t\t\tactionDescription.actionParams.value = this.currentValue;\n\n\t\t\tconst action = new Action(actionDescription);\n\t\t\taction.execute(this);\n\n\t\t\tthis.initialValue = this.currentValue;\n\t\t},\n\t},\n\ttemplate: `\n\t\t\t<input\n\t\t\t\tv-if=\"isEdit\"\n\t\t\t\tref=\"input\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tv-model.trim=\"currentValue\"\n\t\t\t\t@focusout=\"disableEdit\"\n\t\t\t>\n\t\t\t<Text\n\t\t\t\tv-else\n\t\t\t\tv-bind=\"textProps\"\n\t\t\t\t@click=\"enableEdit\"\n\t\t\t/>\n\t\t`\n});\n\n","import { Action } from \"../../action\";\nimport {Runtime, Browser} from \"main.core\";\nimport {Button} from '../layout/button';\nimport {ButtonState} from '../enums/button-state';\nimport {ButtonType} from '../enums/button-type';\n\nexport const EditableDescription = {\n\tcomponents: {\n\t\tButton,\n\t},\n\tprops: {\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tsaveAction: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tvalue: this.text,\n\t\t\toldValue: this.text,\n\t\t\tisEdit: false,\n\t\t\tisSaving: false,\n\t\t\tisLongText: false,\n\t\t\tisCollapsed: false,\n\t\t};\n\t},\n\n\tinject: ['isReadOnly'],\n\n\tcomputed: {\n\t\tclassName() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__editable-text', {\n\t\t\t\t'--is-edit': this.isEdit,\n\t\t\t\t'--is-long': this.isLongText,\n\t\t\t\t'--is-expanded': this.isCollapsed || !this.isLongText,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\n\t\tsaveTextButtonProps() {\n\t\t\treturn {\n\t\t\t\tstate: this.saveTextButtonState,\n\t\t\t\ttype: ButtonType.PRIMARY,\n\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_EDITABLE_DESCRIPTION_SAVE'),\n\t\t\t}\n\t\t},\n\n\t\tcancelEditingButtonProps() {\n\t\t\treturn {\n\t\t\t\ttype: ButtonType.LIGHT,\n\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_EDITABLE_DESCRIPTION_CANCEL'),\n\t\t\t\tstate: this.isSaving ? ButtonState.DISABLED : ButtonState.DEFAULT,\n\t\t\t}\n\t\t},\n\n\t\tsaveTextButtonState() {\n\t\t\tconst trimValue = this.value.trim();\n\t\t\tif (trimValue.length === 0) {\n\t\t\t\treturn ButtonState.DISABLED;\n\t\t\t} else if (this.isSaving) {\n\t\t\t\treturn ButtonState.LOADING;\n\t\t\t} else {\n\t\t\t\treturn ButtonState.DEFAULT;\n\t\t\t}\n\n\t\t},\n\n\t\texpandButtonText() {\n\t\t\treturn this.isCollapsed\n\t\t\t\t? this.$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_EDITABLE_DESCRIPTION_HIDE')\n\t\t\t\t: this.$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_EDITABLE_DESCRIPTION_SHOW');\n\t\t},\n\t},\n\n\tmethods: {\n\t\tstartEditing() {\n\t\t\tthis.isEdit = true;\n\t\t\tthis.isCollapsed = true;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tconst textarea = this.$refs.textarea;\n\t\t\t\tthis.adjustHeight(textarea);\n\t\t\t\ttextarea.focus();\n\t\t\t});\n\n\t\t\tthis.emitEvent('EditableDescription:StartEdit');\n\t\t},\n\n\t\temitEvent(eventName: string)\n\t\t{\n\t\t\tconst action = new Action({\n\t\t\t\ttype: 'jsEvent',\n\t\t\t\tvalue: eventName\n\t\t\t});\n\t\t\taction.execute(this);\n\t\t},\n\n\t\tadjustHeight(elem) {\n\t\t\telem.style.height = 0;\n\t\t\telem.style.height = (elem.scrollHeight)+\"px\";\n\t\t},\n\n\t\tonPressEnter(event) {\n\t\t\tif (\n\t\t\t\tevent.ctrlKey === true ||\n\t\t\t\t( Browser.isMac() && (event.metaKey === true || event.altKey === true) )\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.saveText();\n\t\t\t}\n\t\t},\n\n\t\tsaveText() {\n\t\t\tif (this.saveTextButtonState === ButtonState.DISABLED || this.saveTextButtonState === ButtonState.LOADING || !this.isEdit)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.value.trim() === this.oldValue)\n\t\t\t{\n\t\t\t\tthis.isEdit = false;\n\t\t\t\tthis.emitEvent('EditableDescription:FinishEdit');\n\t\t\t}\n\n\t\t\tthis.isSaving = true;\n\t\t\tconst encodedTrimText = this.value.trim();\n\n\t\t\tthis.executeSaveAction(encodedTrimText).then(() => {\n\t\t\t\tthis.isEdit = false;\n\t\t\t\tthis.oldValue = encodedTrimText;\n\t\t\t\tthis.value = encodedTrimText;\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.isLongText = this.checkIsLongText();\n\t\t\t\t});\n\t\t\t\tthis.emitEvent('EditableDescription:FinishEdit');\n\t\t\t}).finally(() => {\n\t\t\t\tthis.isSaving = false;\n\t\t\t});\n\t\t},\n\n\t\texecuteSaveAction(text: string): void {\n\t\t\tif (!this.saveAction)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.value)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// to avoid unintended props mutation\n\t\t\tconst actionDescription = Runtime.clone(this.saveAction);\n\n\t\t\tactionDescription.actionParams ??= {};\n\t\t\tactionDescription.actionParams.value = text;\n\n\t\t\tconst action = new Action(actionDescription);\n\n\t\t\treturn action.execute(this);\n\t\t},\n\n\t\tcancelEditing() {\n\t\t\tif (!this.isEdit || this.isSaving)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.value = this.oldValue;\n\t\t\tthis.isEdit = false;\n\t\t\tthis.emitEvent('EditableDescription:FinishEdit');\n\t\t},\n\n\t\tclearText() {\n\t\t\tif (this.isSaving)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.value = '';\n\t\t\tthis.$refs.textarea.focus();\n\t\t},\n\n\t\ttoggleIsCollapsed() {\n\t\t\tthis.isCollapsed = !this.isCollapsed;\n\t\t},\n\n\t\tcheckIsLongText() {\n\t\t\tconst textBlock = this.$refs.text;\n\t\t\tif (!textBlock) return false;\n\t\t\tconst textBlockMaxHeightStyle = window.getComputedStyle(textBlock).getPropertyValue('--crm-timeline__editable-text_max-height');\n\t\t\tconst textBlockMaxHeight = parseFloat(textBlockMaxHeightStyle.slice(0, -2));\n\t\t\treturn this.$refs.rootElement?.offsetHeight > textBlockMaxHeight;\n\t\t},\n\t},\n\n\twatch: {\n\t\ttext(newTextValue) {\n\t\t\t// update text from push\n\t\t\tthis.value = newTextValue;\n\t\t\tthis.oldValue = newTextValue;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.isLongText = this.checkIsLongText();\n\t\t\t});\n\t\t},\n\n\t\tvalue() {\n\t\t\tif (!this.isEdit) return;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.adjustHeight(this.$refs.textarea);\n\t\t\t});\n\t\t},\n\t},\n\n\tmounted() {\n\t\tthis.$nextTick(() => {\n\t\t\tthis.isLongText = this.checkIsLongText();\n\t\t});\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-timeline__editable-text_wrapper\">\n\t\t\t<div ref=\"rootElement\" :class=\"className\">\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"isEdit\"\n\t\t\t\t\t:disabled=\"isSaving\"\n\t\t\t\t\t@click=\"clearText\"\n\t\t\t\t\tclass=\"crm-timeline__editable-text_clear-btn\"\n\t\t\t\t>\n\t\t\t\t\t<i class=\"crm-timeline__editable-text_clear-icon\"></i>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"isLongText && !isEdit && !isReadOnly\"\n\t\t\t\t\t:disabled=\"isSaving\"\n\t\t\t\t\t@click=\"startEditing\"\n\t\t\t\t\tclass=\"crm-timeline__editable-text_edit-btn\"\n\t\t\t\t>\n\t\t\t\t\t<i class=\"crm-timeline__editable-text_edit-icon\"></i>\n\t\t\t\t</button>\n\t\t\t\t<div class=\"crm-timeline__editable-text_inner\">\n\t\t\t\t\t<div class=\"crm-timeline__editable-text_content\">\n\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\tv-if=\"isEdit\"\n\t\t\t\t\t\t\tref=\"textarea\"\n\t\t\t\t\t\t\tv-model=\"value\"\n\t\t\t\t\t\t\t:disabled=\"!isEdit || isSaving\"\n\t\t\t\t\t\t\t:placeholder=\"$Bitrix.Loc.getMessage('CRM_TIMELINE_ITEM_EDITABLE_DESCRIPTION_PLACEHOLDER')\"\n\t\t\t\t\t\t\t@keydown.esc=\"cancelEditing\"\n\t\t\t\t\t\t\t@keydown.enter=\"onPressEnter\"\n\t\t\t\t\t\t\tclass=\"crm-timeline__editable-text_text\"\n\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\tref=\"text\"\n\t\t\t\t\t\t\tclass=\"crm-timeline__editable-text_text\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{value}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"!isEdit && !isLongText && !isReadOnly\"\n\t\t\t\t\t\t\t@click=\"startEditing\"\n\t\t\t\t\t\t\tclass=\"crm-timeline__editable-text_text-edit-icon\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"crm-timeline__editable-text_edit-icon\"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"isEdit\"\n\t\t\t\t\t\tclass=\"crm-timeline__editable-text_actions\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"crm-timeline__editable-text_action\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tv-bind=\"saveTextButtonProps\"\n\t\t\t\t\t\t\t\t@click=\"saveText\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-timeline__editable-text_action\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tv-bind=\"cancelEditingButtonProps\"\n\t\t\t\t\t\t\t\t@click=\"cancelEditing\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"isLongText && !isEdit\"\n\t\t\t\t\t@click=\"toggleIsCollapsed\"\n\t\t\t\t\tclass=\"crm-timeline__editable-text_collapse-btn\"\n\t\t\t\t>\n\t\t\t\t\t{{ expandButtonText }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import { DateTimeFormat } from \"main.date\";\nimport { Runtime } from \"main.core\";\nimport Link from './link';\nimport { Action } from \"../../action\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\n\nexport default {\n\tcomponents: {\n\t\tLink,\n\t},\n\tprops: {\n\t\tvalue: Number,\n\t\twithTime: Boolean,\n\t\taction: Object,\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentDate: this.value,\n\t\t\tinitialDate: this.value,\n\t\t\tactionTimeoutId: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\tcurrentDateObject(): ?Date\n\t\t{\n\t\t\treturn this.currentDate ? new Date(this.currentDate * 1000) : null;\n\t\t},\n\t\tcurrentDateInSiteFormat(): ?string\n\t\t{\n\t\t\tif (!this.currentDateObject)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn DateTimeFormat.format(DatetimeConverter.getSiteDateFormat(), this.currentDateObject);\n\t\t},\n\t\ttextProps(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.currentDateInSiteFormat,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\topenCalendar(event: PointerEvent): void\n\t\t{\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\t// eslint-disable-next-line bitrix-rules/no-bx\n\t\t\tBX.calendar({\n\t\t\t\tnode: event.target,\n\t\t\t\tvalue: this.currentDateInSiteFormat,\n\t\t\t\tbTime: this.withTime,\n\t\t\t\tbHideTime: !this.withTime,\n\t\t\t\tbSetFocus: false,\n\t\t\t\tcallback_after: (newDate: Date) => {\n\t\t\t\t\tthis.currentDate = Math.round(newDate.getTime() / 1000);\n\n\t\t\t\t\tthis.scheduleActionExecution();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tscheduleActionExecution(): void\n\t\t{\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\tthis.actionTimeoutId = setTimeout(this.executeAction.bind(this), 3 * 1000);\n\t\t},\n\t\tcancelScheduledActionExecution(): void\n\t\t{\n\t\t\tif (this.actionTimeoutId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.actionTimeoutId);\n\t\t\t\tthis.actionTimeoutId = null;\n\t\t\t}\n\t\t},\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.currentDate === this.initialDate)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// to avoid unintended props mutation\n\t\t\tconst actionDescription = Runtime.clone(this.action);\n\n\t\t\tactionDescription.actionParams ??= {};\n\t\t\tactionDescription.actionParams.value = this.currentDateObject;\n\n\t\t\tconst action = new Action(actionDescription);\n\t\t\taction.execute(this);\n\n\t\t\tthis.initialDate = this.currentDate;\n\t\t},\n\t},\n\ttemplate: `<Link @click=\"openCalendar\" v-bind=\"textProps\"></Link>`,\n};\n","import LineOfTextBlocks from './line-of-text-blocks';\nimport { AlertColor, AlertIcon } from 'ui.alerts';\n\nexport const PlayerAlert = {\n\tcomponents: {\n\t\tLineOfTextBlocks,\n\t},\n\tprops: {\n\t\tblocks: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: AlertColor.DEFAULT,\n\t\t},\n\t\ticon: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: AlertIcon.NONE,\n\t\t},\n\t},\n\tcomputed: {\n\t\tcontainerClassname() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__player-alert',\n\t\t\t\t'ui-alert',\n\t\t\t\t'ui-alert-xs',\n\t\t\t\t'ui-alert-text-center',\n\t\t\t\tthis.color,\n\t\t\t\tthis.icon,\n\t\t\t]\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :class=\"containerClassname\">\n\t\t\t<div class=\"ui-alert-message\">\n\t\t\t\t<LineOfTextBlocks :blocks=\"blocks\"></LineOfTextBlocks>\n\t\t\t</div>\n\t\t</div>\n\t`\n}","import {User} from '../layout/header/user';\nimport {Action} from '../../action';\nimport {Button} from '../layout/button';\nimport {ButtonState} from '../enums/button-state';\nimport {ButtonType} from '../enums/button-type';\nimport {Browser, Runtime} from 'main.core';\nimport {MessageBox, MessageBoxButtons} from \"ui.dialogs.messagebox\";\n\nexport const Note = {\n\tcomponents: {\n\t\tUser,\n\t\tButton,\n\t},\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tdeleteConfirmationText: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tsaveNoteAction: {\n\t\t\ttype: Object,\n\t\t},\n\t\tdeleteNoteAction: {\n\t\t\ttype: Object,\n\t\t},\n\t\tupdatedBy: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tnote: this.text,\n\t\t\toldNote: this.text,\n\t\t\tisEdit: false,\n\t\t\tisExist: !!this.id,\n\t\t\tisSaving: false,\n\t\t\tisDeleting: false,\n\t\t}\n\t},\n\tinject: ['isReadOnly', 'currentUser'],\n\tcomputed: {\n\t\tButtonType()\n\t\t{\n\t\t\treturn ButtonType;\n\t\t},\n\n\t\tisDeleteButtonVisible()\n\t\t{\n\t\t\treturn this.isEdit && !(this.isReadOnly || this.isSaving)\n\t\t},\n\n\t\tisEditButtonVisible()\n\t\t{\n\t\t\treturn !(this.isReadOnly || this.isEdit);\n\t\t},\n\n\t\tsaveButtonState()\n\t\t{\n\t\t\tif (this.isSaving)\n\t\t\t{\n\t\t\t\treturn ButtonState.LOADING;\n\t\t\t}\n\t\t\tif (this.note.trim().length > 0)\n\t\t\t{\n\t\t\t\treturn ButtonState.DEFAULT;\n\t\t\t}\n\n\t\t\treturn ButtonState.DISABLED;\n\t\t},\n\n\t\tcancelButtonState()\n\t\t{\n\t\t\tif (this.isSaving)\n\t\t\t{\n\t\t\t\treturn ButtonState.DISABLED;\n\t\t\t}\n\n\t\t\treturn ButtonState.DEFAULT;\n\t\t},\n\n\t\tisNoteVisible()\n\t\t{\n\t\t\treturn this.isExist || this.isEdit;\n\t\t},\n\n\t\tuser()\n\t\t{\n\t\t\tif (this.updatedBy)\n\t\t\t{\n\t\t\t\treturn this.updatedBy;\n\t\t\t}\n\t\t\tif (this.currentUser)\n\t\t\t{\n\t\t\t\treturn this.currentUser;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\ttitle: '',\n\t\t\t\tdetailUrl: '',\n\t\t\t\timageUrl: '',\n\t\t\t};\n\t\t}\n\t},\n\tmethods: {\n\t\tstartEditing()\n\t\t{\n\t\t\tthis.isEdit = true;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tconst textarea = this.$refs.noteText;\n\t\t\t\tthis.adjustHeight(textarea);\n\t\t\t\ttextarea.focus();\n\t\t\t});\n\n\t\t\tthis.executeAction({type: 'jsEvent', value: 'Note:StartEdit'});\n\t\t},\n\n\t\tadjustHeight(elem) {\n\t\t\telem.style.height = 0;\n\t\t\telem.style.height = (elem.scrollHeight)+\"px\";\n\t\t},\n\n\t\tsetEditMode(editMode: boolean)\n\t\t{\n\t\t\tconst isEdit = editMode ? !this.isReadOnly : false;\n\t\t\tif (isEdit !== this.isEdit)\n\t\t\t{\n\t\t\t\tif(isEdit)\n\t\t\t\t{\n\t\t\t\t\tthis.startEditing();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.isEdit = false;\n\t\t\t\t\tthis.executeAction({type: 'jsEvent', value: 'Note:FinishEdit'})\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tonEnterHandle(event)\n\t\t{\n\t\t\tif (\n\t\t\t\tevent.ctrlKey === true ||\n\t\t\t\t( Browser.isMac() && (event.metaKey === true || event.altKey === true) )\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.saveNote();\n\t\t\t}\n\t\t},\n\n\t\tcancelEditing()\n\t\t{\n\t\t\tthis.note = this.oldNote;\n\t\t\tthis.isEdit = false;\n\t\t\tthis.executeAction({type: 'jsEvent', value: 'Note:FinishEdit'});\n\t\t},\n\n\t\tdeleteNote()\n\t\t{\n\t\t\tif (this.isSaving)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.isExist)\n\t\t\t{\n\t\t\t\tthis.cancelEditing();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.deleteConfirmationText && this.deleteConfirmationText.length)\n\t\t\t{\n\t\t\t\tMessageBox.show({\n\t\t\t\t\tmessage: this.deleteConfirmationText,\n\t\t\t\t\tmodal: true,\n\t\t\t\t\tbuttons: MessageBoxButtons.YES_NO,\n\t\t\t\t\tonYes: (messageBox) => {\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t\tthis.executeDeleteAction();\n\t\t\t\t\t},\n\t\t\t\t\tonNo: (messageBox) => {\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.executeDeleteAction();\n\t\t\t}\n\t\t},\n\n\t\tsaveNote()\n\t\t{\n\t\t\tif (this.saveButtonState === ButtonState.DISABLED || this.isSaving || this.isDeleting)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.note === this.text)\n\t\t\t{\n\t\t\t\tthis.cancelEditing();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isSaving = true;\n\t\t\tconst action = Runtime.clone(this.saveNoteAction);\n\t\t\taction.actionParams.text = this.note;\n\n\t\t\tthis.executeAction(action).then(({status}) =>\n\t\t\t{\n\t\t\t\tif (status === 'success')\n\t\t\t\t{\n\t\t\t\t\tthis.oldNote = this.$refs.noteText.value.trim();\n\t\t\t\t\tthis.isExist = true;\n\t\t\t\t\tthis.cancelEditing();\n\t\t\t\t}\n\t\t\t}).finally(() =>\n\t\t\t{\n\t\t\t\tthis.isSaving = false;\n\t\t\t});\n\t\t},\n\n\t\texecuteDeleteAction()\n\t\t{\n\t\t\tthis.isDeleting = true;\n\n\t\t\tthis.executeAction(this.deleteNoteAction).then(({status}) =>\n\t\t\t{\n\t\t\t\tif (status === 'success')\n\t\t\t\t{\n\t\t\t\t\tthis.oldNote = '';\n\t\t\t\t\tthis.isExist = false;\n\t\t\t\t\tthis.cancelEditing();\n\t\t\t\t}\n\t\t\t}).finally(() =>\n\t\t\t{\n\t\t\t\tthis.isDeleting = false;\n\t\t\t});\n\t\t},\n\n\t\texecuteAction(actionObject): Promise\n\t\t{\n\t\t\tif (!actionObject)\n\t\t\t{\n\t\t\t\tconsole.error('No action object to execute');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst action = new Action(actionObject);\n\t\t\treturn action.execute(this);\n\t\t},\n\t},\n\twatch: {\n\t\tid(id)\n\t\t{\n\t\t\tthis.isExist = !!id;\n\t\t},\n\n\t\ttext(text)\n\t\t{\n\t\t\tthis.note = text;\n\t\t\tthis.oldNote = text;\n\t\t},\n\n\t\tnote() {\n\t\t\tif (!this.isEdit)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.adjustHeight(this.$refs.noteText);\n\t\t\t});\n\t\t},\n\n\t\tisEdit(value)\n\t\t{\n\t\t\tif (value)\n\t\t\t{\n\t\t\t\tthis.$nextTick(() => this.$refs.noteText.focus());\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"crm-timeline__card-note\" v-show=\"isNoteVisible\">\n\t\t<div class=\"crm-timeline__card-note_user\">\n\t\t\t<User v-bind=\"user\"></User>\n\t\t</div>\n\t\t<div class=\"crm-timeline__card-note_area\">\n\t\t\t<div class=\"crm-timeline__card-note_value\">\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tv-if=\"isEdit\"\n\t\t\t\t\t\tv-model=\"note\"\n\t\t\t\t\t\t@keydown.esc=\"cancelEditing\"\n\t\t\t\t\t\t@keydown.enter=\"onEnterHandle\"\n\t\t\t\t\t\t:disabled=\"!isEdit || isSaving\"\n\t\t\t\t\t\t:placeholder=\"$Bitrix.Loc.getMessage('CRM_TIMELINE_USER_NOTE_PLACEHOLDER')\"\n\t\t\t\t\t\tref=\"noteText\"\n\t\t\t\t\t\tclass=\"crm-timeline__card-note_text\"\n\t\t\t\t\t></textarea>\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\tclass=\"crm-timeline__card-note_text\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{note}}\n\t\t\t\t\t</span>\n\n\t\t\t\t<span\n\t\t\t\t\tv-if=\"isEditButtonVisible\"\n\t\t\t\t\tclass=\"crm-timeline__card-note_edit\"\n\t\t\t\t\t@click.prevent.stop=\"startEditing\"\n\t\t\t\t>\n\t\t\t\t\t\t<i></i>\n\t\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div v-if=\"isEdit\" class=\"crm-timeline__card-note__controls\">\n\t\t\t\t<div class=\"crm-timeline__card-note__control --save\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\t@click=\"saveNote\"\n\t\t\t\t\t\t:state=\"saveButtonState\" :type=\"ButtonType.PRIMARY\"\n\t\t\t\t\t\t:title=\"$Bitrix.Loc.getMessage('CRM_TIMELINE_USER_NOTE_SAVE')\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-timeline__card-note__control --cancel\">\n\t\t\t\t\t<Button @click=\"cancelEditing\"\n\t\t\t\t\t\t\t:type=\"ButtonType.LIGHT\"\n\t\t\t\t\t\t\t:state=\"cancelButtonState\"\n\t\t\t\t\t\t\t:title=\"$Bitrix.Loc.getMessage('CRM_TIMELINE_USER_NOTE_CANCEL')\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"isDeleteButtonVisible\" class=\"crm-timeline__card-note_cross\" @click=\"deleteNote\">\n\t\t\t<i></i>\n\t\t</div>\n\t\t<div v-if=\"isDeleting\" class=\"crm-timeline__card-note_dimmer\"></div>\n\t\t</div>\n\t`\n};\n","import { Runtime } from \"main.core\";\nimport { Action } from \"../../action\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\nimport { DateTimeFormat } from \"main.date\";\nimport { TimestampConverter } from \"crm.datetime\";\n\nexport const DatePillColor = Object.freeze({\n\tDEFAULT: 'default',\n\tWARNING: 'warning',\n});\n\n\nexport default {\n\tprops: {\n\t\tvalue: Number,\n\t\twithTime: Boolean,\n\t\tbackgroundColor: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: DatePillColor.DEFAULT,\n\t\t\tvalidator(value: string) {\n\t\t\t\treturn Object.values(DatePillColor).includes(value);\n\t\t\t},\n\t\t},\n\t\taction: Object|null,\n\t},\n\tinject: ['isReadOnly'],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentTimestamp: this.value,\n\t\t\tinitialTimestamp: this.value,\n\t\t\tactionTimeoutId: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\tclassName() {\n\t\t\treturn [\n\t\t\t\t'crm-timeline__date-pill',\n\t\t\t\t`--color-${this.backgroundColor}`, {\n\t\t\t\t'--readonly': this.isPillReadonly,\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\tformattedDate(): string {\n\t\t\tif (!this.currentTimestamp)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn DatetimeConverter.createFromServerTimestamp(this.currentTimestamp).toUserTime().toDatetimeString({ withDayOfWeek: true, delimiter:', ' })\n\t\t},\n\t\tcurrentDateInSiteFormat(): ?string\n\t\t{\n\t\t\treturn DateTimeFormat.format(\n\t\t\t\tthis.withTime\n\t\t\t\t\t? DatetimeConverter.getSiteDateTimeFormat()\n\t\t\t\t\t: DatetimeConverter.getSiteDateFormat(),\n\t\t\t\t(DatetimeConverter.createFromServerTimestamp(this.currentTimestamp)).toUserTime().getValue()\n\t\t\t);\n\t\t},\n\n\t\tcalendarParams(): Object {\n\t\t\treturn {\n\t\t\t\tvalue: this.currentDateInSiteFormat,\n\t\t\t\tbTime: this.withTime,\n\t\t\t\tbHideTime: !this.withTime,\n\t\t\t\tbSetFocus: false,\n\t\t\t}\n\t\t},\n\n\t\tisPillReadonly(): boolean {\n\t\t\treturn this.isReadOnly || !this.action;\n\t\t}\n\t},\n\twatch: {\n\t\tvalue(newDate): void // update date from push\n\t\t{\n\t\t\tthis.initialTimestamp = newDate;\n\t\t\tthis.currentTimestamp = newDate;\n\t\t}\n\t},\n\tmethods: {\n\t\topenCalendar(event: PointerEvent): void\n\t\t{\n\t\t\tif (this.isPillReadonly)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.cancelScheduledActionExecution();\n\n\t\t\t// eslint-disable-next-line bitrix-rules/no-bx\n\t\t\tBX.calendar({\n\t\t\t\tnode: event.target,\n\t\t\t\tcallback_after: (newDate: Date) => {\n\t\t\t\t\tthis.currentTimestamp = TimestampConverter.userToBrowser(newDate.getTime() / 1000);\n\n\t\t\t\t\tthis.executeAction();\n\t\t\t\t},\n\t\t\t\t...this.calendarParams,\n\t\t\t});\n\t\t},\n\t\tcancelScheduledActionExecution(): void\n\t\t{\n\t\t\tif (this.actionTimeoutId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.actionTimeoutId);\n\t\t\t\tthis.actionTimeoutId = null;\n\t\t\t}\n\t\t},\n\t\texecuteAction(): void\n\t\t{\n\t\t\tif (!this.action)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.currentTimestamp === this.initialTimestamp)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// to avoid unintended props mutation\n\t\t\tconst actionDescription = Runtime.clone(this.action);\n\n\t\t\tactionDescription.actionParams ??= {};\n\t\t\tactionDescription.actionParams.value = this.currentDateInSiteFormat;\n\n\t\t\tconst action = new Action(actionDescription);\n\t\t\taction.execute(this);\n\n\t\t\tthis.initialTimestamp = this.currentTimestamp;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<span\n\t\t\t:class=\"className\"\n\t\t\t@click=\"openCalendar\"\n\t\t>\n\t\t\t<span>\n\t\t\t\t{{ formattedDate }}\n\t\t\t</span>\n\t\t\t<span class=\"crm-timeline__date-pill_caret\"></span>\n\t\t</span>`\n};","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport { ajax as Ajax, Type } from \"main.core\";\n\nimport TextBlock from '../components/content-blocks/text';\nimport LinkBlock from '../components/content-blocks/link';\nimport DateBlock from '../components/content-blocks/date';\nimport WithTitle from '../components/content-blocks/with-title';\nimport LineOfTextBlocks from '../components/content-blocks/line-of-text-blocks';\nimport {TimelineAudio} from '../components/content-blocks/timeline-audio';\nimport {ClientMark} from '../components/content-blocks/client-mark';\nimport Money from '../components/content-blocks/money';\nimport  EditableText from '../components/content-blocks/editable-text';\nimport { EditableDescription } from '../components/content-blocks/editable-description';\nimport EditableDate from '../components/content-blocks/editable-date';\nimport {PlayerAlert} from '../components/content-blocks/player-alert';\nimport {Note} from '../components/content-blocks/note';\nimport DatePill from '../components/content-blocks/date-pill';\nimport {ButtonState} from \"ui.buttons\";\n\nexport class CommonContentBlocks extends Base\n{\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tTextBlock,\n\t\t\tLinkBlock,\n\t\t\tDateBlock,\n\t\t\tWithTitle,\n\t\t\tLineOfTextBlocks,\n\t\t\tTimelineAudio,\n\t\t\tClientMark,\n\t\t\tMoney,\n\t\t\tEditableText,\n\t\t\tEditableDescription,\n\t\t\tEditableDate,\n\t\t\tPlayerAlert,\n\t\t\tDatePill,\n\t\t\tNote,\n\t\t};\n\t}\n\n\t/**\n\t * Process common events that aren't bound to specific item type\n\t */\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData} = actionParams;\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'Item:OpenEntityDetailTab' && Type.isStringFilled(actionData?.tabId))\n\t\t{\n\t\t\tthis.#openEntityDetailTab(actionData.tabId);\n\t\t}\n\n\t\tif(action === 'Note:StartEdit') {\n\t\t\tthis.#editNote(item);\n\t\t}\n\n\t\tif(action === 'Note:FinishEdit') {\n\t\t\tthis.#cancelEditNote(item);\n\t\t}\n\t}\n\n\t#openEntityDetailTab(tabId: string): void\n\t{\n\t\t// the event is handled by compatible code, it's a pain to use EventEmitter in this case\n\t\t// eslint-disable-next-line bitrix-rules/no-bx\n\t\tBX.onCustomEvent(window, 'OpenEntityDetailTab', [tabId]);\n\t}\n\n\t#editNote(item: ConfigurableItem) {\n\t\titem.getLayoutContentBlockById('note')?.setEditMode(true);\n\t\titem.highlightContentBlockById('note', true);\n\t}\n\n\t#cancelEditNote(item: ConfigurableItem) {\n\t\titem.getLayoutContentBlockById('note')?.setEditMode(false);\n\t\titem.highlightContentBlockById('note', false);\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn true; // common blocks can be used anywhere\n\t}\n}\n\n","export default {\n\tprops: {\n\t\tfrom: String,\n\t\tto: String,\n\t},\n\t// language=Vue\n\ttemplate: `<div class=\"crm-entity-stream-content-detail-info\">\n\t<span class=\"crm-entity-stream-content-detain-info-status\" v-if=\"from\">{{from}}</span>\n\t<span class=\"crm-entity-stream-content-detail-info-separator-icon\" v-if=\"from\"></span>\n\t<span class=\"crm-entity-stream-content-detain-info-status\" v-if=\"to\">{{to}}</span>\n\t</div>`\n};\n","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport ValueChange from '../components/content-blocks/value-change';\n\nexport class Modification extends Base\n{\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tValueChange,\n\t\t};\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (item.getType() === 'Modification');\n\t}\n}\n","export default {\n\tprops: {\n\t\tmessageHtml: String,\n\t\tisIncoming: Boolean,\n\t},\n\tcomputed: {\n\t\tclassName(): string\n\t\t{\n\t\t\treturn 'crm-entity-stream-content-detail-IM-message-' + (this.isIncoming ? 'incoming' : 'outgoing');\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `<div class=\"crm-entity-stream-content-detail-IM\"><div :class=\"[className]\" v-html=\"messageHtml\"></div></div>`\n};\n","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport ChatMessage from '../components/content-blocks/chat-message';\n\nexport class OpenLines extends Base\n{\n\tgetContentBlockComponents(Item: ConfigurableItem): Object\n\t{\n\t\treturn {\n\t\t\tChatMessage,\n\t\t};\n\t}\n\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData} = actionParams;\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (action === 'Openline:OpenChat' && actionData && actionData.dialogId)\n\t\t{\n\t\t\tthis.#openChat(actionData.dialogId);\n\t\t}\n\t}\n\n\t#openChat(dialogId): void\n\t{\n\t\tif (window.top['BXIM'])\n\t\t{\n\t\t\twindow.top['BXIM'].openMessengerSlider(dialogId, {RECENT: 'N', MENU: 'N'});\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (item.getType() === 'Activity:OpenLine');\n\t}\n}\n\n","import {ajax as Ajax, Text, Loc} from 'main.core';\nimport {Router} from 'crm.router';\nimport {Base} from './base';\nimport {ajax} from 'main.core';\nimport {DateTimeFormat} from \"main.date\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\n\nimport ConfigurableItem from '../configurable-item';\nimport {UI} from \"ui.notification\";\n\ndeclare type Signer = {\n\ttitle: string,\n}\n\nexport class SignDocument extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData, animationCallbacks} = actionParams;\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst documentId = Text.toInteger(actionData?.documentId);\n\t\tconst documentHash = actionData?.documentHash || '';\n\t\tconst activityId = Text.toInteger(actionData?.activityId);\n\t\tif ((action === 'SignDocument:Open' || action === 'Activity:SignDocument:Open') && documentId > 0)\n\t\t{\n\t\t\tthis.#openDocument(actionData);\n\t\t}\n\t\telse if ((action === 'SignDocument:Modify' || action === 'Activity:SignDocument:Modify') && documentId > 0)\n\t\t{\n\t\t\tthis.#modifyDocument(actionData);\n\t\t}\n\t\telse if ((action === 'SignDocument:UpdateActivityDeadline' || action === 'Activity:SignDocument:UpdateActivityDeadline') && activityId > 0)\n\t\t{\n\t\t\tthis.#updateActivityDeadline(activityId, actionData?.value);\n\t\t}\n\t\telse if (action === 'SignDocument:Resend' && documentId > 0 && actionData?.recipientHash)\n\t\t{\n\t\t\tthis.#resendDocument(actionData, animationCallbacks);\n\t\t}\n\t\telse if (action === 'SignDocument:TouchSigner' && documentId > 0)\n\t\t{\n\t\t\tthis.#touchSigner(actionData);\n\t\t}\n\t\telse if (action === 'SignDocument:Download' && documentHash)\n\t\t{\n\t\t\tthis.#download(actionData, animationCallbacks);\n\t\t}\n\t\telse if (action === 'SignDocumentEntry:Delete' && actionData?.entryId)\n\t\t{\n\t\t\tMessageBox.show({\n\t\t\t\tmessage: actionData?.confirmationText || '',\n\t\t\t\tmodal: true,\n\t\t\t\tbuttons: MessageBoxButtons.YES_NO,\n\t\t\t\tonYes: () =>\n\t\t\t\t{\n\t\t\t\t\treturn this.#deleteEntry(actionData.entryId);\n\t\t\t\t},\n\t\t\t\tonNo: (messageBox) =>\n\t\t\t\t{\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\t#deleteEntry(entryId): Promise\n\t{\n\t\tconsole.log('delete entry' + entryId);\n\t}\n\n\t#openDocument({\n\t\tdocumentId,\n\t\tmemberHash\n\t}): Promise\n\t{\n\t\treturn Router.Instance.openSignDocumentSlider(documentId, memberHash);\n\t}\n\n\t#modifyDocument({documentId}): Promise\n\t{\n\t\treturn Router.Instance.openSignDocumentModifySlider(documentId);\n\t}\n\n\tasync #updateActivityDeadline(activityId: number, value: ?Date): Promise<void>\n\t{\n\t\tconst valueInSiteFormat = DateTimeFormat.format(DatetimeConverter.getSiteDateFormat(), value);\n\n\t\tlet response: {data: {document?: {activityDeadline?: string}, success?: boolean, code?: number}};\n\t\ttry\n\t\t{\n\t\t\tresponse = await Ajax.runAction('crm.timeline.signdocument.updateActivityDeadline', {\n\t\t\t\tdata: {\n\t\t\t\t\tactivityId: activityId,\n\t\t\t\t\tactivityDeadline: valueInSiteFormat,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tcatch (responseWithError)\n\t\t{\n\t\t\tconsole.error(responseWithError);\n\t\t\treturn;\n\t\t}\n\n\t\tconst newCreateDate = response.data.document?.activityDeadline;\n\n\t\tif (valueInSiteFormat !== newCreateDate)\n\t\t{\n\t\t\tconsole.error(\"Updated document create date without errors, but for some reason date from the backend doesn't match sent value\");\n\t\t}\n\t}\n\n\t#resendDocument({documentId, recipientHash}, animationCallbacks): void\n\t{\n\t\tif (animationCallbacks.onStart)\n\t\t{\n\t\t\tanimationCallbacks.onStart();\n\t\t}\n\n\t\tajax.runAction(\n\t\t\t'sign.internal.document.resendFile',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tmemberHash: recipientHash,\n\t\t\t\t\tdocumentId: documentId\n\t\t\t\t},\n\t\t\t}\n\t\t).then(() =>\n\t\t{\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('CRM_TIMELINE_ITEM_SIGN_DOCUMENT_RESEND_SUCCESS'),\n\t\t\t\tautoHideDelay: 5000,\n\t\t\t});\n\t\t\tif (animationCallbacks.onStop)\n\t\t\t{\n\t\t\t\tanimationCallbacks.onStop();\n\t\t\t}\n\t\t}, (response) =>\n\t\t{\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\tautoHideDelay: 5000,\n\t\t\t});\n\t\t\tif (animationCallbacks.onStop)\n\t\t\t{\n\t\t\t\tanimationCallbacks.onStop();\n\t\t\t}\n\t\t});\n\n\t\tconsole.log('resend document ' + documentId + ' for ' + recipientHash);\n\t}\n\n\t#touchSigner({documentId}): void\n\t{\n\t\tconsole.log('touch signer document ' + documentId);\n\t}\n\n\t#download({documentHash, memberHash}, animationCallbacks): void\n\t{\n\t\tif (animationCallbacks.onStart)\n\t\t{\n\t\t\tanimationCallbacks.onStart();\n\t\t}\n\n\t\tconst req = ajax.xhr();\n\t\treq.open(\"GET\", '/bitrix/services/main/ajax.php?action=sign.document.getFileForSrc' +\n\t\t\t'&memberHash=' + memberHash +\n\t\t\t'&documentHash=' + documentHash, true);\n\t\treq.responseType = \"blob\";\n\n\t\treq.onload = () => {\n\t\t\tconst blob = req.response;\n\t\t\tconst url = window.URL.createObjectURL(new Blob([blob]));\n\t\t\tconst link = document.createElement('a');\n\t\t\tlink.href = url;\n\t\t\tlink.setAttribute('download', 'doc.pdf');\n\t\t\tdocument.body.appendChild(link);\n\t\t\tlink.click();\n\t\t\tdocument.body.removeChild(link);\n\n\t\t\tif (animationCallbacks.onStop)\n\t\t\t{\n\t\t\t\tanimationCallbacks.onStop();\n\t\t\t}\n\t\t};\n\n\t\treq.send()\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (\n\t\t\titem.getType() === 'SignDocument'\n\t\t\t|| item.getType() === 'Activity:SignDocument'\n\t\t);\n\t}\n}\n","import { ajax as Ajax, Text, Type, Loc } from 'main.core';\nimport {DateTimeFormat} from \"main.date\";\nimport { Base } from './base';\nimport ConfigurableItem from '../configurable-item';\nimport { Router } from \"crm.router\";\nimport { MessageBox } from \"ui.dialogs.messagebox\";\nimport { DatetimeConverter } from \"crm.timeline.tools\";\nimport {UI} from 'ui.notification';\n\nconst ITEM_TYPE = 'Activity:Document';\nconst ACTION_NAMESPACE = ITEM_TYPE + ':';\n\nexport class Document extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData} = actionParams;\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst documentId = Text.toInteger(actionData?.documentId);\n\t\tif (documentId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === (ACTION_NAMESPACE + 'Open'))\n\t\t{\n\t\t\tthis.#openDocument(documentId);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'CopyPublicLink'))\n\t\t{\n\t\t\t// todo block button while loading\n\t\t\tthis.#copyPublicLink(documentId, actionData?.publicUrl);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'Print'))\n\t\t{\n\t\t\tthis.#printDocument(actionData?.printUrl);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'DownloadPdf'))\n\t\t{\n\t\t\tthis.#downloadPdf(actionData?.pdfUrl);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'DownloadDocx'))\n\t\t{\n\t\t\tthis.#downloadDocx(actionData?.docxUrl);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'UpdateTitle'))\n\t\t{\n\t\t\tthis.#updateTitle(documentId, actionData?.value);\n\t\t}\n\t\telse if (action === (ACTION_NAMESPACE + 'UpdateCreateDate'))\n\t\t{\n\t\t\tthis.#updateCreateDate(documentId, actionData?.value);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconsole.info(`Unknown action ${action} in ${ITEM_TYPE}`);\n\t\t}\n\t}\n\n\t#openDocument(documentId: number): void\n\t{\n\t\tRouter.Instance.openDocumentSlider(documentId);\n\t}\n\n\tasync #copyPublicLink(documentId: number, publicUrl: ?string): Promise<void>\n\t{\n\t\tif (!Type.isStringFilled(publicUrl))\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tpublicUrl = await this.#createPublicUrl(documentId);\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tMessageBox.alert(error.message);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst isSuccess = BX.clipboard.copy(publicUrl);\n\t\tif (isSuccess)\n\t\t{\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('CRM_TIMELINE_ITEM_LINK_IS_COPIED'),\n\t\t\t\tautoHideDelay: 5000,\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tMessageBox.alert(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_COPY_PUBLIC_LINK_ERROR'));\n\t\t}\n\t}\n\n\tasync #createPublicUrl(documentId: number): Promise<string, Error>\n\t{\n\t\tlet response: {data: {publicUrl: string}};\n\t\ttry\n\t\t{\n\t\t\tresponse = await Ajax.runAction(\n\t\t\t\t'crm.documentgenerator.document.enablePublicUrl',\n\t\t\t\t{\n\t\t\t\t\tanalyticsLabel: 'enablePublicUrl',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tstatus: 1,\n\t\t\t\t\t\tid: documentId,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tcatch (responseWithError)\n\t\t{\n\t\t\tconsole.error(responseWithError);\n\n\t\t\tthrow new Error(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_CREATE_PUBLIC_LINK_ERROR'));\n\t\t}\n\n\t\tconst publicUrl = response.data.publicUrl;\n\t\tif (!Type.isStringFilled(publicUrl))\n\t\t{\n\t\t\tthrow new Error(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_CREATE_PUBLIC_LINK_ERROR'));\n\t\t}\n\n\t\treturn publicUrl;\n\t}\n\n\t#printDocument(printUrl: ?string): void\n\t{\n\t\tif (Type.isStringFilled(printUrl))\n\t\t{\n\t\t\twindow.open(printUrl, '_blank');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tMessageBox.alert(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_PRINT_NOT_READY'));\n\t\t}\n\t}\n\n\t#downloadPdf(pdfUrl: ?string): void\n\t{\n\t\tif (Type.isStringFilled(pdfUrl))\n\t\t{\n\t\t\twindow.open(pdfUrl, '_blank');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tMessageBox.alert(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_PDF_NOT_READY'));\n\t\t}\n\t}\n\n\t#downloadDocx(docxUrl: ?string): void\n\t{\n\t\tif (Type.isStringFilled(docxUrl))\n\t\t{\n\t\t\twindow.open(docxUrl, '_blank');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconsole.error('Docx download url is not found. This should be an impossible case, something went wrong');\n\t\t}\n\t}\n\n\tasync #updateTitle(documentId: number, value: ?string): Promise<void>\n\t{\n\t\tlet response: {data: {document?: {values?: {DocumentTitle?: string}}}};\n\t\ttry\n\t\t{\n\t\t\tresponse = await Ajax.runAction('crm.documentgenerator.document.update', {\n\t\t\t\tdata: {\n\t\t\t\t\tid: documentId,\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\tDocumentTitle: value,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tcatch (responseWithError)\n\t\t{\n\t\t\tconsole.error(responseWithError);\n\n\t\t\tMessageBox.alert(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_UPDATE_DOCUMENT_ERROR'));\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst newTitle = response.data.document?.values?.DocumentTitle;\n\t\tif (newTitle !== value)\n\t\t{\n\t\t\tconsole.error(\"Updated document title without errors, but for some reason title from the backend doesn't match sent value\");\n\t\t}\n\t}\n\n\tasync #updateCreateDate(documentId: number, value: ?Date): Promise<void>\n\t{\n\t\tconst valueInSiteFormat = DateTimeFormat.format(DatetimeConverter.getSiteDateFormat(), value);\n\n\t\tlet response: {data: {document?: {values?: {DocumentCreateTime?: string}}}};\n\t\ttry\n\t\t{\n\t\t\tresponse = await Ajax.runAction('crm.documentgenerator.document.update', {\n\t\t\t\tdata: {\n\t\t\t\t\tid: documentId,\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\tDocumentCreateTime: valueInSiteFormat,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tcatch (responseWithError)\n\t\t{\n\t\t\tconsole.error(responseWithError);\n\n\t\t\tMessageBox.alert(Loc.getMessage('CRM_TIMELINE_ITEM_ACTIVITY_DOCUMENT_UPDATE_DOCUMENT_ERROR'));\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst newCreateDate = response.data.document?.values?.DocumentCreateTime;\n\t\tif (valueInSiteFormat !== newCreateDate)\n\t\t{\n\t\t\tconsole.error(\"Updated document create date without errors, but for some reason date from the backend doesn't match sent value\");\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn item.getType() === ITEM_TYPE;\n\t}\n}\n","import { Base } from './base';\nimport { Type } from 'main.core';\nimport ConfigurableItem from '../configurable-item';\n\nexport class Call extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType, actionData} = actionParams;\n\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'Call:MakeCall' && actionData)\n\t\t{\n\t\t\tthis.#makeCall(actionData);\n\t\t}\n\n\t\tif (action === 'Call:Schedule' && actionData)\n\t\t{\n\t\t\tthis.#scheduleCall(actionData.activityId, actionData.scheduleDate);\n\t\t}\n\n\t\tif (action === 'Call:OpenTranscript' && actionData && actionData.callId)\n\t\t{\n\t\t\tthis.#openTranscript(actionData.callId);\n\t\t}\n\n\t\tif (action === 'Call:ChangePlayerState' && actionData && actionData.recordId)\n\t\t{\n\t\t\tthis.#changePlayerState(item, actionData.recordId);\n\t\t}\n\t}\n\n\t#makeCall(actionData): void\n\t{\n\t\tif (!Type.isStringFilled(actionData.phone))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst params = {\n\t\t\tENTITY_TYPE_NAME: BX.CrmEntityType.resolveName(actionData.entityTypeId),\n\t\t\tENTITY_ID: actionData.entityId,\n\t\t\tAUTO_FOLD: true\n\t\t};\n\n\t\tif (actionData.ownerTypeId !== actionData.entityTypeId || actionData.ownerId !== actionData.entityId)\n\t\t{\n\t\t\tparams.BINDINGS = {\n\t\t\t\tOWNER_TYPE_NAME: BX.CrmEntityType.resolveName(actionData.ownerTypeId),\n\t\t\t\tOWNER_ID: actionData.ownerId\n\t\t\t}\n\t\t}\n\n\t\tif (actionData.activityId > 0)\n\t\t{\n\t\t\tparams.SRC_ACTIVITY_ID = actionData.activityId;\n\t\t}\n\n\t\twindow.top['BXIM'].phoneTo(actionData.phone, params);\n\t}\n\n\t#scheduleCall(activityId: Number, scheduleDate: String): void\n\t{\n\t\tif (BX.CrmTimelineManager)\n\t\t{\n\t\t\tconst timeline = BX.CrmTimelineManager.getDefault();\n\t\t\tif (timeline)\n\t\t\t{\n\t\t\t\tconst menuBar = timeline.getMenuBar();\n\t\t\t\tBX(menuBar.getActiveItem()).scrollIntoView({block: 'start', inline: 'nearest', behavior: 'smooth'});\n\t\t\t\tmenuBar.setActiveItemById('todo');\n\n\t\t\t\tconst todoEditor = menuBar.getTodoEditor();\n\t\t\t\ttodoEditor.setFocused();\n\t\t\t\ttodoEditor.setParentActivityId(activityId);\n\t\t\t\ttodoEditor.setDeadLine(scheduleDate);\n\t\t\t}\n\t\t}\n\t}\n\n\t#openTranscript(callId): void\n\t{\n\t\tif (BX.Voximplant && BX.Voximplant.Transcript)\n\t\t{\n\t\t\tBX.Voximplant.Transcript.create({\n\t\t\t\tcallId: callId\n\t\t\t}).show();\n\t\t}\n\t}\n\n\t#changePlayerState(item: ConfigurableItem, recordId: Number): void\n\t{\n\t\tconst player = item.getLayoutContentBlockById('audio');\n\t\tif (!player)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (recordId !== player.id)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (player.state === 'play')\n\t\t{\n\t\t\tplayer.pause();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tplayer.play();\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (item.getType() === 'Activity:Call');\n\t}\n}\n","import {Base} from './base';\nimport ConfigurableItem from '../configurable-item';\nimport {ButtonState} from 'ui.buttons';\n\nexport class ToDo extends Base\n{\n\tonItemAction(item: ConfigurableItem, actionParams: ActionParams): void\n\t{\n\t\tconst {action, actionType} = actionParams;\n\t\tif (actionType !== 'jsEvent')\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (action === 'EditableDescription:StartEdit')\n\t\t{\n\t\t\titem.highlightContentBlockById('description', true);\n\t\t}\n\t\tif (action === 'EditableDescription:FinishEdit')\n\t\t{\n\t\t\titem.highlightContentBlockById('description', false);\n\t\t}\n\t}\n\n\tstatic isItemSupported(item: ConfigurableItem): boolean\n\t{\n\t\treturn (item.getType() === 'Activity:ToDo');\n\t}\n}\n","import ControllerManager from \"./controller-manager\";\n\nimport {Activity} from \"./controllers/activity\";\nimport {CommonContentBlocks} from \"./controllers/common-content-blocks\";\nimport {Modification} from \"./controllers/modification\";\nimport {OpenLines} from \"./controllers/openlines\";\nimport {SignDocument} from \"./controllers/sign-document\";\nimport {Document} from \"./controllers/document\";\nimport {Call} from \"./controllers/call\";\nimport {ToDo} from \"./controllers/todo\";\n\nControllerManager.registerController(Activity);\nControllerManager.registerController(CommonContentBlocks);\nControllerManager.registerController(OpenLines);\nControllerManager.registerController(Modification);\nControllerManager.registerController(SignDocument);\nControllerManager.registerController(Document);\nControllerManager.registerController(Call);\nControllerManager.registerController(ToDo);\n"],"names":["Item","_id","_isTerminated","_wrapper","id","BX","type","isNotEmptyString","util","getRandomString","data","Error","options","anchor","previousSibling","clearLayout","layout","Dom","remove","undefined","wrapper","className","timeout","addClass","Type","isNumber","window","setTimeout","removeWrapperClass","bind","removeClass","addWrapperClass","terminated","IconBackgroundColor","Icon","props","code","String","required","default","counterType","backgroundColorToken","PRIMARY","inject","computed","isLogMessage","counterNodeContainer","$refs","counter","methods","renderCounter","clean","Counter","value","border","color","Color","toUpperCase","renderTo","mounted","watch","newCounterType","$nextTick","template","Menu","vueComponent","menuItems","menuOptions","angle","cacheable","items","item","push","createMenuItem","MenuManager","show","hasOwnProperty","delimiter","text","title","result","icon","menu","subItem","Object","values","action","href","onclick","onMenuItemClick","getCurrentMenu","close","Action","execute","AnimationTarget","block","AnimationType","disable","loader","params","_classPrivateFieldInitSpec","actionParams","isPlainObject","animation","Promise","resolve","reject","isJsEvent","$Bitrix","eventEmitter","emit","actionType","actionData","animationCallbacks","onStart","onStop","isJsCode","eval","isAjaxAction","ajax","runAction","then","response","UI","Notification","Center","notify","content","errors","message","autoHideDelay","isRedirect","location","isShowMenu","showMenu","bindElement","$el","minWidth","offsetWidth","isUndefined","paramName","paramValue","isDate","DateTimeFormat","format","DatetimeConverter","getSiteDateTimeFormat","filter","state","scope","isReadOnly","hideIfReadonly","sort","a","b","target","$root","setFaded","showLoader","isFunction","setDisabled","setLoading","forever","ChangeStreamButton","disableIfReadonly","Boolean","isReadonlyMode","isShowPinButton","isShowUnpinButton","executeAction","onClick","disabled","isReadonly","Title","getValue","TagType","Tag","SECONDARY","tagTypeToLabelColorDict","Label","LIGHT_BLUE","LIGHT","SUCCESS","LIGHT_GREEN","WARNING","LIGHT_YELLOW","FAILURE","LIGHT_RED","tagContainerRef","tag","getLabelColorFromTagType","tagType","lowerCaseTagType","toLowerCase","labelColor","renderTag","tagOptions","uppercaseTitle","label","fill","appendChild","render","User","detailUrl","imageUrl","styles","backgroundImage","Text","encode","backgroundSize","FormatDate","name","timestamp","Number","datePlaceholder","useShortTimeFormat","class","Array","formattedDate","converter","createFromServerTimestamp","toUserTime","toTimeString","toDatetimeString","Hint","isMouseOnHintArea","hintPopup","textBlocks","hintContentIcon","iconElement","create","attrs","classname","hintContentIconClassname","children","hintContentText","hintContentTextBlocks","map","getContentBlockNode","baseClassname","hintIconClassname","getHintContent","style","display","getPopupOptions","darkMode","autoHide","maxWidth","bindOptions","position","getPopupPosition","hintElem","hint","defaultAngleLeftOffset","Popup","getOption","width","hintWidth","left","hintLeftOffset","top","hintTopOffset","getPosition","popupWidth","getPopupContainer","getPopupAngleOffset","popupContainer","angleWidth","onMouseEnterToPopup","onHintAreaMouseLeave","hideHintPopup","onMouseEnterToHint","showHintPopupWithDebounce","showHintPopup","isShown","Event","setBindElement","setAngle","offset","adjustPosition","Runtime","debounce","unbind","destroy","hideHintPopupWithDebounce","contentBlock","getTextNode","getLinkNode","textOptions","linkOptions","link","actionObj","Header","components","titleAction","date","changeStreamButton","tags","user","infoHelper","visibleTags","isVisibleTagFilter","visibleAndAscSortedTags","tagsCopy","clone","tagsAscSorter","isShowDate","tagA","tagB","getChangeStreamButton","Logo","addIcon","addIconType","iconType","inCircle","currentIcon","iconClassname","addIconClassname","newIcon","setIcon","CalendarIcon","userTime","month","dayWeek","time","LogoCalendar","BitrixVue","cloneComponent","Body","logo","blocks","visibleBlocks","forEach","index","isDomNode","setAttribute","rendererName","keys","aSort","bSort","getContentBlockById","blockId","reduce","found","getLogo","ButtonState","AdditionalButtonIcon","freeze","NOTE","SCRIPT","PRINT","DOTS","AdditionalButtonColor","DEFAULT","AdditionalButton","iconName","validator","indexOf","currentState","DISABLED","LOADING","MenuId","buttons","itemsArray","length","buttonProps","beforeUnmount","getMenuById","LayoutMenu","ButtonType","Button","size","popup","uiButton","buttonOptions","upperCaseIconName","isString","upperCaseButtonSize","itemTypeToButtonColorDict","UIButton","LIGHT_BORDER","ICON","round","dependOnTheme","Size","itemStateToButtonStateDict","LINK","State","WAITING","buttonContainerRef","buttonContainer","getUiButton","setButtonState","loading","setState","renderButton","innerHTML","button","onLayoutUpdated","created","subscribe","beforeDestroy","unsubscribe","updated","newValue","Buttons","getButtonById","buttonId","ButtonScope","Footer","additionalButtons","maxBaseButtonsCount","baseButtons","visibleAndSortedButtons","slice","moreButtons","visibleButtons","buttonsSorter","visibleAndSortedAdditionalButtons","visibleAdditionalButtons","visibleButtonsFilter","additionalButtonsArray","entries","hasMenu","buttonItem","HIDDEN","MOBILE","buttonA","buttonB","foundButton","MarketPanel","detailsText","detailsTextAction","needShowDetailsText","isStringFilled","UserPick","StreamType","history","scheduled","pinned","initialLayout","currentUser","onAction","Function","streamType","isFaded","provide","onActionEvent","event","eventData","getData","setLayout","newLayout","faded","Loader","parentNode","hide","body","getHeaderChangeStreamButton","header","getFooterButtonById","footer","highlightContentBlockById","isHighlighted","timelineCardClassname","Layout","menuItem","ControllerManager","foundControllers","controller","getRegisteredControllers","isItemSupported","timelineId","ConfigurableItem","settings","_setId","setContainer","container","itemClassName","setData","getInstance","getItemControllers","needBindToContainer","bindTo","prop","getBoolean","isElementNode","setWrapper","_classPrivateMethodGet","nextSibling","insertBefore","getWrapper","append","getLayout","asPlainObject","onBeforeItemClearLayout","unmount","serverTimezoneDate","Date","extractDate","getId","isInteger","toInteger","replace","getContainer","self","initialize","TimelineItem","createApp","contentBlockComponents","componentName","component","mount","getCurrentUser","onItemAction","assign","getContentBlockComponents","Base","Activity","_classPrivateMethodInitSpec","activityId","confirmationText","MessageBox","modal","MessageBoxButtons","YES_NO","onYes","ownerTypeId","ownerId","onNo","messageBox","itemType","getType","editor","viewActivity","editActivity","Ajax","CrmActivityEditor","getDefault","TextColor","TextWeight","TextSize","weight","multiline","colorClassname","weightClassname","sizeClassname","upperCaseColorProp","upperCaseWeightProp","NORMAL","SM","encodedText","bold","withTime","extends","dateInUserTimezone","CoreTextHelper","toDateString","inline","LogoType","defaultPlaybackRateValues","TimelineAudio","AudioPlayer","playbackRateValues","isShowPlaybackRateMenu","parentData","playbackRate","isSeeking","containerClassname","isDark","isMobile","controlClassname","play","timeCurrentClassname","totalTimeClassname","progressPosition","progressInPixel","seekPosition","minSeekWidth","seekWidth","seek","formatTimeCurrent","formatTime","timeCurrent","formatTimeTotal","timeTotal","playbackRateMenuItems","rate","createPlaybackRateMenuItem","getPlaybackRateOptionText","isActive","changePlaybackRate","source","menuWindow","popupWindow","isFloat","showPlaybackRateMenu","playbackRateButtonContainer","events","onPopupShow","btnContainerWidth","getPopupWindow","setOffset","offsetLeft","n","startSeeking","clientX","pause","document","finishSeeking","seeking","setSeekByCursor","timeline","track","right","setPosition","preventDefault","x","loaded","loadFile","pixelPerPercent","setProgress","currentTime","progress","changeLogoIcon","$parent","audioEventRouterWrapper","eventName","audioEventRouter","CALL_AUDIO_PAUSE","CALL_AUDIO_PLAY","ClientMark","mark","ClientMarkType","POSITIVE","NEUTRAL","NEGATIVE","opportunity","currencyId","moneyHtml","CurrencyCore","currencyFormat","isEdit","currentValue","initialValue","actionTimeoutId","textProps","$props","enableEdit","cancelScheduledActionExecution","input","focus","disableEdit","scheduleActionExecution","clearTimeout","actionDescription","EditableDescription","saveAction","oldValue","isSaving","isLongText","isCollapsed","saveTextButtonProps","saveTextButtonState","Loc","getMessage","cancelEditingButtonProps","trimValue","trim","expandButtonText","startEditing","textarea","adjustHeight","emitEvent","elem","height","scrollHeight","onPressEnter","ctrlKey","Browser","isMac","metaKey","altKey","saveText","encodedTrimText","executeSaveAction","checkIsLongText","finally","cancelEditing","clearText","toggleIsCollapsed","textBlock","textBlockMaxHeightStyle","getComputedStyle","getPropertyValue","textBlockMaxHeight","parseFloat","rootElement","offsetHeight","newTextValue","Link","currentDate","initialDate","currentDateObject","currentDateInSiteFormat","getSiteDateFormat","openCalendar","calendar","node","bTime","bHideTime","bSetFocus","callback_after","newDate","Math","getTime","PlayerAlert","LineOfTextBlocks","AlertColor","AlertIcon","NONE","Note","deleteConfirmationText","saveNoteAction","deleteNoteAction","updatedBy","note","oldNote","isExist","isDeleting","isDeleteButtonVisible","isEditButtonVisible","saveButtonState","cancelButtonState","isNoteVisible","noteText","setEditMode","editMode","onEnterHandle","saveNote","deleteNote","executeDeleteAction","status","actionObject","console","error","DatePillColor","backgroundColor","includes","currentTimestamp","initialTimestamp","isPillReadonly","withDayOfWeek","calendarParams","TimestampConverter","userToBrowser","CommonContentBlocks","TextBlock","LinkBlock","DateBlock","WithTitle","Money","EditableText","EditableDate","DatePill","tabId","onCustomEvent","getLayoutContentBlockById","from","to","Modification","ValueChange","messageHtml","isIncoming","OpenLines","ChatMessage","dialogId","openMessengerSlider","RECENT","MENU","SignDocument","documentId","documentHash","recipientHash","entryId","log","memberHash","Router","Instance","openSignDocumentSlider","openSignDocumentModifySlider","valueInSiteFormat","activityDeadline","responseWithError","newCreateDate","req","xhr","open","responseType","onload","blob","url","URL","createObjectURL","Blob","createElement","click","removeChild","send","ITEM_TYPE","ACTION_NAMESPACE","Document","publicUrl","printUrl","pdfUrl","docxUrl","info","openDocumentSlider","alert","isSuccess","clipboard","copy","analyticsLabel","DocumentTitle","newTitle","DocumentCreateTime","Call","scheduleDate","callId","recordId","phone","ENTITY_TYPE_NAME","CrmEntityType","resolveName","entityTypeId","ENTITY_ID","entityId","AUTO_FOLD","BINDINGS","OWNER_TYPE_NAME","OWNER_ID","SRC_ACTIVITY_ID","phoneTo","CrmTimelineManager","menuBar","getMenuBar","getActiveItem","scrollIntoView","behavior","setActiveItemById","todoEditor","getTodoEditor","setFocused","setParentActivityId","setDeadLine","Voximplant","Transcript","player","ToDo","registerController"],"mappings":"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"}