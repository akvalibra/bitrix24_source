{"version":3,"file":"guide.bundle.js","sources":["../src/check-automation-crm.js"],"sourcesContent":["import {Guide} from \"ui.tour\";\nimport {Loc, Type} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Settings} from \"bizproc.local-settings\";\n\nexport class CheckAutomationCrm\n{\n\tstatic #IS_SHOWN_SUCCESS_AUTOMATION = 'success_automation_shown';\n\tstatic #SHOW_SUCCESS_AUTOMATION = 'show_success_automation';\n\tstatic #SHOW_CHECK_AUTOMATION = 'show_check_automation';\n\n\tstatic #SHOW_HOW_CHECK_TRIIGGER = 'show_how_check_trigger';\n\tstatic #SHOW_HOW_CHECK_ROBOT = 'show_how_check_robot';\n\n\tstatic #TRIGGER_ADDED = 'is_trigger_added';\n\tstatic #ROBOT_ADDED = 'is_robot_added';\n\n\tstatic startCheckAutomationTour(documentType: string, categoryId: number)\n\t{\n\t\tif (!this.#isCorrectDocumentType(documentType) || !Type.isNumber(categoryId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#subscribeOnStartCheckAutomationEvents(documentType, categoryId);\n\t}\n\n\tstatic #subscribeOnStartCheckAutomationEvents(documentType: string, categoryId: number)\n\t{\n\t\tconst handlers = this.#getStartCheckAutomationHandlers();\n\t\tfor (const eventName of Object.keys(handlers))\n\t\t{\n\t\t\tEventEmitter.subscribe(eventName, handlers[eventName]);\n\t\t}\n\n\t\tconst slider = BX.SidePanel.Instance.getSliderByWindow(window);\n\t\tlet options = {};\n\t\tif (slider)\n\t\t{\n\t\t\tconst localSettings = new Settings('aut-guide-crm-check-automation');\n\t\t\tEventEmitter.subscribeOnce(slider, 'SidePanel.Slider:onCloseComplete', () => {\n\t\t\t\tfor (const eventName of Object.keys(handlers))\n\t\t\t\t{\n\t\t\t\t\tEventEmitter.unsubscribe(eventName, handlers[eventName]);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tlocalSettings.get(this.#SHOW_HOW_CHECK_TRIIGGER) === true\n\t\t\t\t\t|| localSettings.get(this.#SHOW_HOW_CHECK_ROBOT) === true\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.#saveUserOption('document_type', documentType);\n\t\t\t\t\tthis.#saveUserOption('category_id', categoryId);\n\t\t\t\t\tthis.#saveUserOption(this.#SHOW_CHECK_AUTOMATION, 'Y');\n\t\t\t\t\toptions = Object.assign(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdocument_type: documentType,\n\t\t\t\t\t\t\tcategory_id: categoryId,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlocalSettings.getAll()\n\t\t\t\t\t);\n\t\t\t\t\tthis.#sendUserOption();\n\t\t\t\t}\n\n\t\t\t\tlocalSettings.deleteAll();\n\t\t\t});\n\t\t}\n\n\t\tconst targetWindow = window.top;\n\t\tconst showHowCheckAutomationGuide = () => {\n\t\t\tif (targetWindow.BX.SidePanel.Instance.getOpenSlidersCount() <= 0)\n\t\t\t{\n\t\t\t\ttargetWindow.BX.Event.EventEmitter.unsubscribe(\n\t\t\t\t\t'SidePanel.Slider:onCloseComplete', showHowCheckAutomationGuide\n\t\t\t\t);\n\n\t\t\t\ttargetWindow.BX.Runtime.loadExtension('bizproc.automation.guide')\n\t\t\t\t\t.then((exports) => {\n\t\t\t\t\t\tconst {CrmCheckAutomationGuide} = exports;\n\t\t\t\t\t\tCrmCheckAutomationGuide.showHowCheckAutomationGuide(documentType, categoryId, options);\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\ttargetWindow.BX.Event.EventEmitter.subscribe('SidePanel.Slider:onCloseComplete', showHowCheckAutomationGuide);\n\t}\n\n\tstatic #getStartCheckAutomationHandlers(): {}\n\t{\n\t\tconst localSettings = new Settings('aut-guide-crm-check-automation');\n\t\tlocalSettings.set(this.#TRIGGER_ADDED, false);\n\t\tlocalSettings.set(this.#SHOW_HOW_CHECK_TRIIGGER, false);\n\t\tlocalSettings.set(this.#ROBOT_ADDED, false);\n\t\tlocalSettings.set(this.#SHOW_HOW_CHECK_ROBOT, false);\n\n\t\tconst handlers = {};\n\t\thandlers['BX.Bizproc.Automation:TriggerManager:trigger:add'] = () => {\n\t\t\tlocalSettings.set(this.#TRIGGER_ADDED, true);\n\t\t};\n\t\thandlers['BX.Bizproc.Automation:Template:robot:add'] = () => {\n\t\t\tlocalSettings.set(this.#ROBOT_ADDED, true);\n\t\t};\n\t\thandlers['BX.Bizproc.Component.Automation.Component:onSuccessAutomationSave'] = (event: BaseEvent) => {\n\t\t\tconst triggersCount = event.getData()['analyticsLabel']['triggers_count'];\n\t\t\tlocalSettings.set(\n\t\t\t\tthis.#SHOW_HOW_CHECK_TRIIGGER,\n\t\t\t\ttriggersCount > 0 && localSettings.get(this.#TRIGGER_ADDED) === true\n\t\t\t);\n\n\t\t\tconst robotsCount = event.getData()['analyticsLabel']['robots_count'];\n\t\t\tlocalSettings.set(\n\t\t\t\tthis.#SHOW_HOW_CHECK_ROBOT,\n\t\t\t\trobotsCount > 0 && localSettings.get(this.#ROBOT_ADDED) === true\n\t\t\t);\n\t\t\tlocalSettings.set(this.#TRIGGER_ADDED, false);\n\t\t\tlocalSettings.set(this.#ROBOT_ADDED, false);\n\t\t};\n\n\t\treturn handlers;\n\t}\n\n\tstatic showHowCheckAutomationGuide(documentType: string, categoryId: number, options: Object<string, any>): void\n\t{\n\t\tif (\n\t\t\tthis.#isSuccessAutomationStepShown(options)\n\t\t\t|| !this.#isTargetDocumentType(documentType, categoryId, options)\n\t\t\t|| this.#isNeedShowSuccessAutomationStep(options)\n\t\t\t|| this.#isNeedShowCheckAutomationStep(options)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst showTriggerGuide = (options[this.#SHOW_HOW_CHECK_TRIIGGER] === true);\n\t\tconst showRobotGuide = (options[this.#SHOW_HOW_CHECK_ROBOT] === true);\n\n\t\tif (!showTriggerGuide && !showRobotGuide)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst title =\n\t\t\tshowTriggerGuide\n\t\t\t\t? Loc.getMessage('BIZPROC_JS_WOW_MOMENT_CRM_HOW_CHECK_TRIGGER_TITLE')\n\t\t\t\t: Loc.getMessage('BIZPROC_JS_WOW_MOMENT_CRM_HOW_CHECK_ROBOT_TITLE')\n\t\t;\n\t\tconst text =\n\t\t\tshowTriggerGuide\n\t\t\t\t? Loc.getMessage('BIZPROC_JS_WOW_MOMENT_CRM_HOW_CHECK_TRIGGER_TEXT')\n\t\t\t\t: Loc.getMessage('BIZPROC_JS_WOW_MOMENT_CRM_HOW_CHECK_ROBOT_TEXT')\n\t\t;\n\n\t\t// kanban or list\n\t\tconst target =\n\t\t\tdocument.querySelector('.main-kanban-item')\n\t\t\t?? document.querySelector('.main-grid-row.main-grid-row-body:not(.main-grid-not-count) .main-grid-cell.main-grid-cell-left')\n\t\t;\n\n\t\tconst guide = this.#getGuide({target, title, text});\n\t\tif (!this.#isTargetExist(guide.getCurrentStep().getTarget()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tguide.showNextStep();\n\t}\n\n\tstatic showCheckAutomation(documentType: string, categoryId: number, options: Object<string, any>)\n\t{\n\t\tif (\n\t\t\tthis.#isSuccessAutomationStepShown(options)\n\t\t\t|| !this.#isTargetDocumentType(documentType, categoryId, options)\n\t\t\t|| this.#isNeedShowSuccessAutomationStep(options)\n\t\t\t|| !this.#isNeedShowCheckAutomationStep(options)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#saveUserOption(this.#SHOW_CHECK_AUTOMATION, 'N');\n\t\tthis.#saveUserOption(this.#SHOW_SUCCESS_AUTOMATION, 'Y');\n\t\tthis.#sendUserOption()\n\n\t\tconst guide = this.#getGuide({\n\t\t\ttarget: '[data-id=\"tab_automation\"]',\n\t\t\ttitle: Loc.getMessage('BIZPROC_JS_WOW_MOMENT_CRM_CHECK_AUTOMATION_TITLE'),\n\t\t\ttext: Loc.getMessage('BIZPROC_JS_WOW_MOMENT_CRM_CHECK_AUTOMATION_TEXT'),\n\t\t\tcondition: {top: true, bottom: false, color: 'primary'},\n\t\t});\n\n\t\tif (\n\t\t\t!this.#isTargetExist(guide.getCurrentStep().getTarget())\n\t\t\t|| guide.getCurrentStep().getTarget().offsetTop > 0\n\t\t)\n\t\t{\n\t\t\tguide.getCurrentStep().setTarget('.main-buttons-item.main-buttons-item-more-default.main-buttons-item-more.--has-menu');\n\t\t\tif (!this.#isTargetExist(guide.getCurrentStep().getTarget()))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tguide.showNextStep();\n\t}\n\n\tstatic showSuccessAutomation(documentType: string, categoryId: number, options: Object<string, any>)\n\t{\n\t\tif (\n\t\t\tthis.#isSuccessAutomationStepShown(options)\n\t\t\t|| !this.#isTargetDocumentType(documentType, categoryId, options)\n\t\t\t|| !this.#isNeedShowSuccessAutomationStep(options)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// success trigger or robot\n\t\tlet target =\n\t\t\tdocument.querySelector('.bizproc-automation-trigger-item.--complete')\n\t\t\t?? document.querySelector('.bizproc-automation-robot-container.--complete')\n\t\t;\n\t\tif (!this.#isTargetExist(target))\n\t\t{\n\t\t\t// trigger or robot\n\t\t\ttarget =\n\t\t\t\tdocument.querySelector('.bizproc-automation-trigger-item')\n\t\t\t\t?? document.querySelector('.bizproc-automation-robot-container')\n\t\t\t;\n\n\t\t\tif (!this.#isTargetExist(target))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.#deleteUserOption();\n\t\tthis.#saveUserOption(this.#IS_SHOWN_SUCCESS_AUTOMATION, 'Y');\n\n\t\tconst guide = this.#getGuide({\n\t\t\ttarget,\n\t\t\ttitle: Loc.getMessage('BIZPROC_JS_WOW_MOMENT_CRM_SUCCESS_AUTOMATION_TITLE'),\n\t\t\ttext: Loc.getMessage('BIZPROC_JS_WOW_MOMENT_CRM_SUCCESS_AUTOMATION_TEXT'),\n\t\t\tarticle: '6908975',\n\t\t\tposition: 'top',\n\t\t});\n\n\t\tguide.showNextStep();\n\t}\n\n\tstatic #isSuccessAutomationStepShown(options: Object<string, any>): boolean\n\t{\n\t\treturn options[this.#IS_SHOWN_SUCCESS_AUTOMATION] === 'Y';\n\t}\n\n\tstatic #isTargetDocumentType(documentType: string, categoryId: number, options: Object<string, any>): boolean\n\t{\n\t\treturn (\n\t\t\tthis.#isCorrectDocumentType(documentType)\n\t\t\t&& Type.isStringFilled(options['document_type'])\n\t\t\t&& options['document_type'] === documentType\n\t\t\t&& Number(options['category_id']) === Number(categoryId)\n\t\t);\n\t}\n\n\tstatic #isCorrectDocumentType(documentType: string): boolean\n\t{\n\t\treturn (\n\t\t\tType.isStringFilled(documentType)\n\t\t\t&& (\n\t\t\t\t['LEAD', 'DEAL', 'SMART_INVOICE', 'QUOTE', 'ORDER'].includes(documentType)\n\t\t\t\t|| documentType.startsWith('DYNAMIC_')\n\t\t\t)\n\t\t);\n\t}\n\n\tstatic #isNeedShowSuccessAutomationStep(options: Object<string, any>): boolean\n\t{\n\t\treturn options[this.#SHOW_SUCCESS_AUTOMATION] === 'Y';\n\t}\n\n\tstatic #isNeedShowCheckAutomationStep(options: Object<string, any>): boolean\n\t{\n\t\treturn options[this.#SHOW_CHECK_AUTOMATION] === 'Y';\n\t}\n\n\tstatic #saveUserOption(key, value)\n\t{\n\t\tBX.userOptions.save('bizproc.automation.guide', 'crm_check_automation', key, value, false);\n\t}\n\n\tstatic #sendUserOption()\n\t{\n\t\tBX.userOptions.send(null);\n\t}\n\n\tstatic #deleteUserOption()\n\t{\n\t\tBX.userOptions.del('bizproc.automation.guide', 'crm_check_automation');\n\t}\n\n\t// region guide\n\tstatic #getGuide(options: {\n\t\ttarget: string | Element,\n\t\ttitle: string,\n\t\ttext: string,\n\t\tposition?: string,\n\t\tcondition?: Object,\n\t\tarticle?: string,\n\t}): Guide\n\t{\n\t\treturn new Guide({\n\t\t\tsteps: [\n\t\t\t\t{\n\t\t\t\t\ttarget: options.target,\n\t\t\t\t\ttitle: options.title,\n\t\t\t\t\ttext: options.text,\n\t\t\t\t\tposition: options.position | 'bottom',\n\t\t\t\t\tcondition: Type.isPlainObject(options.condition) ? options.condition : null,\n\t\t\t\t\tarticle: options.article ?? null,\n\t\t\t\t}\n\t\t\t],\n\t\t\tonEvents: true,\n\t\t});\n\t}\n\n\tstatic #isTargetExist(target): boolean\n\t{\n\t\treturn Type.isElementNode(target);\n\t}\n\n\t// endregion\n}\n"],"names":["_IS_SHOWN_SUCCESS_AUTOMATION","babelHelpers","classPrivateFieldLooseKey","_SHOW_SUCCESS_AUTOMATION","_SHOW_CHECK_AUTOMATION","_SHOW_HOW_CHECK_TRIIGGER","_SHOW_HOW_CHECK_ROBOT","_TRIGGER_ADDED","_ROBOT_ADDED","_subscribeOnStartCheckAutomationEvents","_getStartCheckAutomationHandlers","_isSuccessAutomationStepShown","_isTargetDocumentType","_isCorrectDocumentType","_isNeedShowSuccessAutomationStep","_isNeedShowCheckAutomationStep","_saveUserOption","_sendUserOption","_deleteUserOption","_getGuide","_isTargetExist","CheckAutomationCrm","startCheckAutomationTour","documentType","categoryId","classPrivateFieldLooseBase","Type","isNumber","showHowCheckAutomationGuide","options","_document$querySelect","showTriggerGuide","showRobotGuide","title","Loc","getMessage","text","target","document","querySelector","guide","getCurrentStep","getTarget","showNextStep","showCheckAutomation","condition","top","bottom","color","offsetTop","setTarget","showSuccessAutomation","_document$querySelect2","_document$querySelect3","article","position","_subscribeOnStartCheckAutomationEvents2","handlers","eventName","Object","keys","EventEmitter","subscribe","slider","BX","SidePanel","Instance","getSliderByWindow","window","localSettings","Settings","subscribeOnce","unsubscribe","get","assign","document_type","category_id","getAll","deleteAll","targetWindow","getOpenSlidersCount","Event","Runtime","loadExtension","then","exports","CrmCheckAutomationGuide","_getStartCheckAutomationHandlers2","set","event","triggersCount","getData","robotsCount","_isSuccessAutomationStepShown2","_isTargetDocumentType2","isStringFilled","Number","_isCorrectDocumentType2","includes","startsWith","_isNeedShowSuccessAutomationStep2","_isNeedShowCheckAutomationStep2","_saveUserOption2","key","value","userOptions","save","_sendUserOption2","send","_deleteUserOption2","del","_getGuide2","_options$article","Guide","steps","isPlainObject","onEvents","_isTargetExist2","isElementNode","defineProperty","writable"],"mappings":"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"}