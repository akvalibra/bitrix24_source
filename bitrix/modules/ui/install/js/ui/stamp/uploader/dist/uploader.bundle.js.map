{"version":3,"file":"uploader.bundle.js","sources":["../src/header/header.js","../src/upload-layout/upload-layout.js","../src/dropzone/dropzone.js","../src/action-panel/action-panel.js","../src/status/status.js","../src/preview/preview.js","../src/message/message.js","../src/file-select/file-select.js","../src/uploader.js"],"sourcesContent":["import {Tag, Cache, Loc, Type, Dom, Text} from 'main.core';\nimport {Button} from 'ui.buttons';\n\nimport './css/style.css';\n\ntype HeaderOptions = {\n\tcontact: {\n\t\tlabel: string,\n\t\thref: string,\n\t},\n\tcontactsList: Array<any>,\n};\n\nexport default class Header\n{\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options)\n\t{\n\t\tthis.setOptions(options);\n\t}\n\n\tsetOptions(options: HeaderOptions)\n\t{\n\t\tthis.cache.set('options', {...options});\n\t}\n\n\tgetOptions(): HeaderOptions\n\t{\n\t\treturn this.cache.get('options', {});\n\t}\n\n\tsetValue(value: string)\n\t{\n\t\tif (Type.isString(value) || Type.isNumber(value))\n\t\t{\n\t\t\tthis.getValueLayout().textContent = value;\n\t\t}\n\t}\n\n\tgetValueLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('valueLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-stamp-uploader-header-text-value\">\n\t\t\t\t\t<span title=\"${Text.encode(this.getOptions().contact.label)}\">${Text.encode(this.getOptions().contact.label)}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetChangeContactButton(): Button\n\t{\n\t\treturn this.cache.remember('changeContactButton', () => {\n\t\t\treturn new Button({\n\t\t\t\ttext: Loc.getMessage('UI_STAMP_UPLOADER_HEADER_CHANGE_CONTACT_BUTTON_LABEL'),\n\t\t\t\tsize: Button.Size.EXTRA_SMALL,\n\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\tround: true,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('headerLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-stamp-uploader-header\">\n\t\t\t\t\t<div class=\"ui-stamp-uploader-header-icon\">\n\t\t\t\t\t\t<div class=\"ui-stamp-uploader-header-icon-image\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-stamp-uploader-header-text\">\n\t\t\t\t\t\t<div class=\"ui-stamp-uploader-header-text-label\">\n\t\t\t\t\t\t\t${Loc.getMessage('UI_STAMP_UPLOADER_HEADER_TITLE')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${this.getValueLayout()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-stamp-uploader-header-action\">\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tappendTo(target: HTMLElement)\n\t{\n\t\tif (Type.isDomNode(target))\n\t\t{\n\t\t\tDom.append(this.getLayout(), target);\n\t\t}\n\t}\n\n\tprependTo(target: HTMLElement)\n\t{\n\t\tif (Type.isDomNode(target))\n\t\t{\n\t\t\tDom.prepend(this.getLayout(), target);\n\t\t}\n\t}\n\n\trenderTo(target: HTMLElement)\n\t{\n\t\tthis.appendTo(target);\n\t}\n}","import {Cache, Tag} from 'main.core';\n\nimport './css/style.css';\n\ntype UploadLayoutOptions = {\n\tchildren: Array<{getLayout: () => HTMLElement}>,\n}\n\nexport default class UploadLayout\n{\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options: UploadLayoutOptions)\n\t{\n\t\tthis.setOptions(options);\n\t}\n\n\tsetOptions(options: UploadLayoutOptions)\n\t{\n\t\tthis.cache.set('options', {...options});\n\t}\n\n\tgetOptions(): UploadLayoutOptions\n\t{\n\t\treturn this.cache.get('options', {});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-stamp-uploader-upload-layout\">\n\t\t\t\t\t${this.getOptions().children.map((item) => item.getLayout())}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}","import {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Tag, Cache, Loc} from 'main.core';\n\nimport './css/style.css';\n\ntype DropzoneOptions = {\n\tevents?: {[key: string]: (BaseEvent) => void},\n};\n\nexport default class Dropzone extends EventEmitter\n{\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options: DropzoneOptions = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.UI.Stamp.Uploader.Dropzone');\n\t\tthis.subscribeFromOptions(options.events);\n\t\tthis.setOptions(options);\n\t}\n\n\tsetOptions(options: DropzoneOptions)\n\t{\n\t\tthis.cache.set('options', {...options});\n\t}\n\n\tgetOptions(): DropzoneOptions\n\t{\n\t\treturn this.cache.get('options', {});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-stamp-uploader-dropzone\">\n\t\t\t\t\t<div class=\"ui-stamp-uploader-dropzone-icon\"></div>\n\t\t\t\t\t<div class=\"ui-stamp-uploader-dropzone-header\">\n\t\t\t\t\t\t${Loc.getMessage('UI_STAMP_UPLOADER_DROPZONE_HEADER')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-stamp-uploader-dropzone-text\">\n\t\t\t\t\t\t${Loc.getMessage('UI_STAMP_UPLOADER_DROPZONE_TEXT')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}","import {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Tag, Cache, Loc} from 'main.core';\n\nimport './css/style.css';\n\ntype ActionPanelOptions = {\n\tevents?: {\n\t\tonCropClick: (event: BaseEvent) => void,\n\t},\n};\n\nexport default class ActionPanel extends EventEmitter\n{\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options: ActionPanelOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.UI.Stamp.Uploader.ActionPanel');\n\t\tthis.setOptions(options);\n\t}\n\n\tsetOptions(options: ActionPanelOptions)\n\t{\n\t\tthis.cache.set('options', {...options});\n\t}\n\n\tgetOptions(): ActionPanelOptions\n\t{\n\t\treturn this.cache.get('options', {});\n\t}\n\n\tgetCropButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('cropButton', () => {\n\t\t\tconst onClick = (event: MouseEvent) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.emit('onCropClick');\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div \n\t\t\t\t\tclass=\"ui-stamp-uploader-crop-button\"\n\t\t\t\t\tonclick=\"${onClick}\"\n\t\t\t\t>\n\t\t\t\t\t${Loc.getMessage('UI_STAMP_UPLOADER_CROP_BUTTON_LABEL')}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-stamp-uploader-action-panel\">\n\t\t\t\t\t${this.getCropButton()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}","import {Cache, Tag, Text, Dom, Loc} from 'main.core';\nimport {Loader} from 'main.loader';\n\nimport './css/style.css';\n\nexport default class Status\n{\n\tcache = new Cache.MemoryCache();\n\n\tstatic formatSize(bytes: number): {number: number, text: string}\n\t{\n\t\tif (bytes === 0)\n\t\t{\n\t\t\treturn `0 ${Loc.getMessage('UI_STAMP_UPLOADER_UPLOAD_STATUS_SIZE_B')}`;\n\t\t}\n\n\t\tconst sizes = [\n\t\t\tLoc.getMessage('UI_STAMP_UPLOADER_UPLOAD_STATUS_SIZE_B'),\n\t\t\tLoc.getMessage('UI_STAMP_UPLOADER_UPLOAD_STATUS_SIZE_KB'),\n\t\t\tLoc.getMessage('UI_STAMP_UPLOADER_UPLOAD_STATUS_SIZE_MB'),\n\t\t];\n\n\t\tconst textIndex = Math.floor(Math.log(bytes) / Math.log(1024));\n\n\t\treturn {\n\t\t\tnumber: parseFloat((bytes / Math.pow(1024, textIndex)).toFixed(2)),\n\t\t\ttext: sizes[textIndex],\n\t\t};\n\t}\n\n\tgetUploadStatusLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('statusLayout', () => {\n\t\t\tconst loaderLayout = Tag.render`\n\t\t\t\t<div class=\"ui-stamp-uploader-upload-status-loader\"></div>\n\t\t\t`;\n\t\t\tconst loader = new Loader({target: loaderLayout, mode: 'inline', size: 45});\n\t\t\tvoid loader.show();\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-stamp-uploader-upload-status\">\n\t\t\t\t\t${loaderLayout}\n\t\t\t\t\t<div class=\"ui-stamp-uploader-upload-status-text\">\n\t\t\t\t\t\t${Loc.getMessage('UI_STAMP_UPLOADER_UPLOAD_STATUS_TEXT')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-stamp-uploader-upload-status-percent\">\n\t\t\t\t\t\t${Loc.getMessage('UI_STAMP_UPLOADER_UPLOAD_STATUS_PERCENT')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-stamp-uploader-upload-status-size\">\n\t\t\t\t\t\t${Loc.getMessage('UI_STAMP_UPLOADER_UPLOAD_STATUS_SIZE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tupdateUploadStatus(options: {percent: number, size: number} = {percent: 0, size: 0})\n\t{\n\t\tconst percentNode = this.cache.remember('percentNode', () => {\n\t\t\treturn this.getUploadStatusLayout().querySelector('.ui-stamp-uploader-upload-status-percent');\n\t\t});\n\n\t\tconst sizeNode = this.cache.remember('sizeNode', () => {\n\t\t\treturn this.getUploadStatusLayout().querySelector('.ui-stamp-uploader-upload-status-size');\n\t\t});\n\n\t\tpercentNode.innerHTML = (\n\t\t\tLoc\n\t\t\t\t.getMessage('UI_STAMP_UPLOADER_UPLOAD_STATUS_PERCENT')\n\t\t\t\t.replace('{{number}}', `<strong>${Text.encode(options.percent)}</strong>`)\n\t\t);\n\n\t\tconst formatted = Status.formatSize(options.size);\n\t\tsizeNode.textContent = (\n\t\t\tLoc\n\t\t\t\t.getMessage('UI_STAMP_UPLOADER_UPLOAD_STATUS_SIZE')\n\t\t\t\t.replace('{{number}}', formatted.number)\n\t\t\t\t.replace('{{text}}', formatted.text)\n\t\t);\n\t}\n\n\tgetPreparingStatusLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('preparingStatusLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-stamp-uploader-preparing-status\">\n\t\t\t\t\t<div class=\"ui-stamp-uploader-preparing-status-icon\"></div>\n\t\t\t\t\t<div class=\"ui-stamp-uploader-preparing-status-text\">\n\t\t\t\t\t\t${Loc.getMessage('UI_STAMP_UPLOADER_PREPARING_STATUS')}\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-stamp-uploader-status\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tshowUploadStatus(options: {reset: boolean} = {reset: false})\n\t{\n\t\tconst layout = this.getLayout();\n\t\tconst uploadStatusLayout = this.getUploadStatusLayout();\n\t\tconst preparingStatusLayout = this.getPreparingStatusLayout();\n\n\t\tDom.remove(preparingStatusLayout);\n\t\tDom.append(uploadStatusLayout, layout);\n\n\t\tif (options.reset === true)\n\t\t{\n\t\t\tthis.updateUploadStatus({percent: 0, size: 0});\n\t\t}\n\n\t\tthis.setOpacity(1);\n\n\t\tthis.show();\n\t}\n\n\tshowPreparingStatus()\n\t{\n\t\tconst layout = this.getLayout();\n\t\tconst uploadStatusLayout = this.getUploadStatusLayout();\n\t\tconst preparingStatusLayout = this.getPreparingStatusLayout();\n\n\t\tDom.remove(uploadStatusLayout);\n\t\tDom.append(preparingStatusLayout, layout);\n\n\t\tthis.setOpacity(.45);\n\n\t\tthis.show();\n\t}\n\n\tsetOpacity(value: number)\n\t{\n\t\tDom.style(this.getLayout(), 'background-color', `rgba(255, 255, 255, ${value})`);\n\t}\n\n\thide()\n\t{\n\t\tDom.removeClass(this.getLayout(), 'ui-stamp-uploader-status-show');\n\t}\n\n\tshow()\n\t{\n\t\tDom.addClass(this.getLayout(), 'ui-stamp-uploader-status-show');\n\t}\n}","import {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Dom, Tag, Cache, Loc} from 'main.core';\n\nimport './css/style.css';\n\ntype PreviewOptions = {\n\tevents: {\n\t\t[key: string]: (event: BaseEvent) => void,\n\t},\n};\n\nexport default class Preview extends EventEmitter\n{\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options: PreviewOptions = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.UI.Stamp.Uploader');\n\t\tthis.subscribeFromOptions(options.events);\n\t\tthis.setOptions(options);\n\t}\n\n\tsetOptions(options: PreviewOptions)\n\t{\n\t\tthis.cache.set('options', {...options});\n\t}\n\n\tgetOptions(): PreviewOptions\n\t{\n\t\treturn this.cache.get('options', {});\n\t}\n\n\tgetImagePreviewLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('imagePreviewLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-stamp-uploader-preview-image\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetActionButtonLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('actionButtonLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-stamp-uploader-preview-actions-button\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div \n\t\t\t\t\tclass=\"ui-stamp-uploader-preview\" \n\t\t\t\t\ttitle=\"${Loc.getMessage('UI_STAMP_UPLOADER_PREVIEW_TITLE')}\"\n\t\t\t\t>\n\t\t\t\t\t${this.getImagePreviewLayout()}\n\t\t\t\t\t${this.getActionButtonLayout()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tshow(src: string)\n\t{\n\t\tDom.style(this.getImagePreviewLayout(), {\n\t\t\tbackgroundImage: `url(${src})`,\n\t\t});\n\n\t\tDom.addClass(this.getLayout(), 'ui-stamp-uploader-preview-show');\n\t}\n\n\thide()\n\t{\n\t\tDom.removeClass(this.getLayout(), 'ui-stamp-uploader-preview-show');\n\t}\n}","import {Cache, Tag, Loc} from 'main.core';\n\nimport './css/style.css';\n\nexport default class Message\n{\n\tcache = new Cache.MemoryCache();\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-stamp-uploader-message\">\n\t\t\t\t\t<div class=\"ui-stamp-uploader-message-icon\"></div>\n\t\t\t\t\t<div class=\"ui-stamp-uploader-message-text\">\n\t\t\t\t\t\t<div class=\"ui-stamp-uploader-message-text-header\">\n\t\t\t\t\t\t\t${Loc.getMessage('UI_STAMP_UPLOADER_SLIDER_MESSAGE_TITLE')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-stamp-uploader-message-text-description\">\n\t\t\t\t\t\t\t${Loc.getMessage('UI_STAMP_UPLOADER_SLIDER_MESSAGE_DESCRIPTION')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}","import {Cache, Loc, Tag} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Button} from 'ui.buttons';\n\nimport './css/style.css';\n\ntype FileSelectOptions = {\n\tevents: {\n\t\t[key: string]: (BaseEvent) => void,\n\t},\n};\n\nexport default class FileSelect extends EventEmitter\n{\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options: FileSelectOptions = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.UI.Stamp.Uploader.FileSelect');\n\t\tthis.subscribeFromOptions(options.events);\n\t\tthis.setOptions(options);\n\t}\n\n\tsetOptions(options: FileSelectOptions)\n\t{\n\t\tthis.cache.set('options', {...options});\n\t}\n\n\tgetOptions(): FileSelectOptions\n\t{\n\t\treturn this.cache.get('options', {});\n\t}\n\n\tgetTakePhotoButton(): Button\n\t{\n\t\treturn this.cache.remember('takePhotoButton', () => {\n\t\t\treturn new Button({\n\t\t\t\ttext: Loc.getMessage('UI_STAMP_UPLOADER_TAKE_PHOTO_BUTTON_LABEL'),\n\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\tsize: Button.Size.LARGE,\n\t\t\t\ticon: Button.Icon.CAMERA,\n\t\t\t\tround: true,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.emit('onTakePhotoClick');\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tgetSelectPhotoButton(): Button\n\t{\n\t\treturn this.cache.remember('selectPhotoButton', () => {\n\t\t\treturn new Button({\n\t\t\t\ttext: Loc.getMessage('UI_STAMP_UPLOADER_SELECT_PHOTO_BUTTON_LABEL'),\n\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\tsize: Button.Size.LARGE,\n\t\t\t\ticon: Button.Icon.DOWNLOAD,\n\t\t\t\tround: true,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.emit('onTakePhotoClick');\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-stamp-uploader-file-select\">\n\t\t\t\t\t<div class=\"ui-stamp-uploader-file-select-select-photo\">\n\t\t\t\t\t\t${this.getSelectPhotoButton().render()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}","import {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Type, Cache, Tag, Dom, Reflection, Loc} from 'main.core';\nimport {Uploader as FileUploader, UploaderFile} from 'ui.uploader.core';\nimport {MessageBox} from 'ui.dialogs.messagebox';\nimport {Layout} from 'ui.sidepanel.layout';\nimport {Button} from 'ui.buttons';\nimport Header from './header/header';\nimport UploadLayout from './upload-layout/upload-layout';\nimport Dropzone from './dropzone/dropzone';\nimport ActionPanel from './action-panel/action-panel';\nimport Status from './status/status';\nimport Preview from './preview/preview';\nimport Message from './message/message';\nimport FileSelect from './file-select/file-select';\n\nimport './css/style.css';\n\nexport type ContactItem = {\n\tid: number | string,\n\tlabel: string,\n\thref?: string,\n};\n\nexport type UploaderOptions = {\n\tcontroller: {\n\t\tupload: string,\n\t},\n\tmode: $Values<Uploader.Mode>,\n\tcontact: ContactItem,\n\tcontactsList: Array<ContactItem>,\n\tevents: {\n\t\t[key: string]: (event: BaseEvent) => void,\n\t},\n};\n\n/**\n * @namespace BX.UI.Stamp\n */\nexport class Uploader extends EventEmitter\n{\n\tstatic Mode = {\n\t\tSLIDER: 'slider',\n\t\tINLINE: 'inline',\n\t};\n\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options: UploaderOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.UI.Stamp.Uploader');\n\t\tthis.subscribeFromOptions(options.events);\n\t\tthis.setOptions(options);\n\n\t\tthis.cache.remember('fileUploader', () => {\n\t\t\tconst dropzoneLayout = this.getDropzone().getLayout();\n\t\t\tconst previewLayout = this.getPreview().getLayout();\n\t\t\tconst fileSelectButtonLayout = this.getFileSelect().getLayout();\n\t\t\treturn new FileUploader({\n\t\t\t\tcontroller: this.getOptions().controller.upload,\n\t\t\t\tassignAsFile: true,\n\t\t\t\tbrowseElement: [\n\t\t\t\t\tdropzoneLayout,\n\t\t\t\t\tpreviewLayout,\n\t\t\t\t\tfileSelectButtonLayout,\n\t\t\t\t\tthis.getHiddenInput(),\n\t\t\t\t],\n\t\t\t\tdropElement: [\n\t\t\t\t\tdropzoneLayout,\n\t\t\t\t\tpreviewLayout,\n\t\t\t\t],\n\t\t\t\timagePreviewHeight: 556,\n\t\t\t\timagePreviewWidth: 1000,\n\t\t\t\tautoUpload: false,\n\t\t\t\tacceptedFileTypes: ['image/png', 'image/jpeg'],\n\t\t\t\tevents: {\n\t\t\t\t\t'File:onAdd': (event: BaseEvent) => {\n\t\t\t\t\t\tconst {file, error} = event.getData();\n\n\t\t\t\t\t\tif (Type.isNil(error))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.getPreview().show(file.getClientPreviewUrl());\n\t\t\t\t\t\t\tthis.setUploaderFile(file);\n\n\t\t\t\t\t\t\tif (this.getMode() === Uploader.Mode.SLIDER)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.getSliderButtons().saveButton.setDisabled(false);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (this.getMode() === Uploader.Mode.INLINE)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.getInlineSaveButton().setDisabled(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t'File:onUploadProgress': (event: BaseEvent) => {\n\t\t\t\t\t\tconst {progress, file} = event.getData();\n\n\t\t\t\t\t\tthis.getStatus().updateUploadStatus({\n\t\t\t\t\t\t\tpercent: progress,\n\t\t\t\t\t\t\tsize: (file.getSize() / 100) * progress,\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t'File:onError': function(event: BaseEvent) {\n\t\t\t\t\t\tconst {error} = event.getData();\n\t\t\t\t\t\tMessageBox.alert(error.getMessage());\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #delay(callback: () => void, delay: number)\n\t{\n\t\tconst timeoutId = setTimeout(() => {\n\t\t\tcallback();\n\t\t\tclearTimeout(timeoutId);\n\t\t}, delay);\n\t}\n\n\tgetFileUploader(): FileUploader\n\t{\n\t\treturn this.cache.get('fileUploader');\n\t}\n\n\tsetUploaderFile(file: UploaderFile)\n\t{\n\t\tthis.cache.set('uploaderFile', file);\n\t}\n\n\tgetUploaderFile(): UploaderFile\n\t{\n\t\treturn this.cache.get('uploaderFile', null);\n\t}\n\n\tsetOptions(options: UploaderOptions)\n\t{\n\t\tthis.cache.set('options', {...options});\n\t}\n\n\tgetOptions(): UploaderOptions\n\t{\n\t\treturn this.cache.get('options', {});\n\t}\n\n\tgetMode(): $Values<Uploader.Mode>\n\t{\n\t\tconst {mode} = this.getOptions();\n\t\tif (Object.values(Uploader.Mode).includes(mode))\n\t\t{\n\t\t\treturn mode;\n\t\t}\n\n\t\treturn Uploader.Mode.SLIDER;\n\t}\n\n\tgetHeader(): Header\n\t{\n\t\treturn this.cache.remember('header', () => {\n\t\t\treturn new Header(this.getOptions());\n\t\t});\n\t}\n\n\tgetPreview(): Preview\n\t{\n\t\treturn this.cache.remember('preview', () => {\n\t\t\treturn new Preview({});\n\t\t});\n\t}\n\n\tgetFileSelect(): FileSelect\n\t{\n\t\treturn this.cache.remember('fileSelect', () => {\n\t\t\treturn new FileSelect({\n\t\t\t\tevents: {\n\t\t\t\t\tonTakePhotoClick: () => {\n\t\t\t\t\t\tthis.emit('onTakePhotoClick');\n\t\t\t\t\t},\n\t\t\t\t\tonSelectPhotoClick: () => {\n\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tgetUploadLayout(): UploadLayout\n\t{\n\t\treturn this.cache.remember('uploadLayout', () => {\n\t\t\treturn new UploadLayout({\n\t\t\t\tchildren: [\n\t\t\t\t\t(() => {\n\t\t\t\t\t\tif (this.getMode() === Uploader.Mode.INLINE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn this.getFileSelect();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn this.getDropzone();\n\t\t\t\t\t})(),\n\t\t\t\t\t// this.getActionPanel(),\n\t\t\t\t\tthis.getStatus(),\n\t\t\t\t\tthis.getPreview(),\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\t}\n\n\tgetDropzone(): Dropzone\n\t{\n\t\treturn this.cache.remember('dropzone', () => {\n\t\t\treturn new Dropzone({});\n\t\t});\n\t}\n\n\tgetActionPanel(): ActionPanel\n\t{\n\t\treturn this.cache.remember('actionPanel', () => {\n\t\t\treturn new ActionPanel({});\n\t\t});\n\t}\n\n\tgetStatus(): Status\n\t{\n\t\treturn this.cache.remember('status', () => {\n\t\t\treturn new Status();\n\t\t});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst mode = this.getMode();\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-stamp-uploader ui-stamp-uploader-mode-${mode}\">\n\t\t\t\t\t${(() => {\n\t\t\t\t\t\tif (mode === Uploader.Mode.SLIDER)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn this.getMessage().getLayout();\n\t\t\t\t\t\t}\n\t\t\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t})()}\n\t\t\t\t\t${this.getHeader().getLayout()}\n\t\t\t\t\t${this.getUploadLayout().getLayout()}\n\t\t\t\t\t${(() => {\n\t\t\t\t\t\tif (mode === Uploader.Mode.INLINE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn Tag.render`\n\t\t\t\t\t\t\t\t<div class=\"ui-stamp-uploader-footer\">\n\t\t\t\t\t\t\t\t\t${this.getInlineSaveButton().render()}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t})()}\n\t\t\t\t\t${this.getHiddenInput()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetHiddenInput(): HTMLInputElement\n\t{\n\t\treturn this.cache.remember('hiddenInput', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<input type=\"file\" name=\"STAMP_UPLOADER_INPUT\" hidden>\n\t\t\t`;\n\t\t});\n\t}\n\n\trenderTo(target: HTMLElement)\n\t{\n\t\tif (Type.isDomNode(target))\n\t\t{\n\t\t\tDom.append(this.getLayout(), target);\n\t\t}\n\t}\n\n\tupload(): Promise<UploaderFile>\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst file: UploaderFile = this.getUploaderFile();\n\t\t\tif (file)\n\t\t\t{\n\t\t\t\tthis.getPreview().hide();\n\t\t\t\tthis.getStatus().showUploadStatus({reset: true});\n\t\t\t\tfile.upload();\n\t\t\t\tconst uploadController = Type.isFunction(file.getUploadController) ? file.getUploadController() : file.uploadController;\n\t\t\t\tuploadController.subscribeOnce('onUpload', (event: BaseEvent) => {\n\t\t\t\t\tresolve(event.getData().fileInfo);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tgetMessage(): Message\n\t{\n\t\treturn this.cache.remember('message', () => {\n\t\t\treturn new Message();\n\t\t});\n\t}\n\n\tgetInlineSaveButton(): Button\n\t{\n\t\treturn this.cache.remember('inlineSaveButton', () => {\n\t\t\tconst button = new Button({\n\t\t\t\ttext: Loc.getMessage('UI_STAMP_UPLOADER_SAVE_BUTTON_LABEL'),\n\t\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\t\tsize: Button.Size.LARGE,\n\t\t\t\tround: true,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tconst saveButton = this.getInlineSaveButton();\n\t\t\t\t\tsaveButton.setWaiting(true);\n\n\t\t\t\t\tthis.upload()\n\t\t\t\t\t\t.then((uploaderFile) => {\n\t\t\t\t\t\t\tUploader.#delay(() => {\n\t\t\t\t\t\t\t\tthis.getPreview().show(uploaderFile.serverPreviewUrl);\n\t\t\t\t\t\t\t\tthis.getStatus().showPreparingStatus();\n\t\t\t\t\t\t\t}, 1000);\n\n\t\t\t\t\t\t\treturn this.emitAsync('onSaveAsync', {file: uploaderFile});\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tthis.getStatus().hide();\n\n\t\t\t\t\t\t\tUploader.#delay(() => {\n\t\t\t\t\t\t\t\tsaveButton.setWaiting(false);\n\t\t\t\t\t\t\t\tsaveButton.setDisabled(true);\n\t\t\t\t\t\t\t}, 500);\n\t\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tbutton.setDisabled(true);\n\n\t\t\treturn button;\n\t\t});\n\t}\n\n\tsetSliderButtons(buttons: {saveButton: Button, cancelButton: Button})\n\t{\n\t\tthis.cache.set('sliderButtons', buttons);\n\t}\n\n\tgetSliderButtons(): {saveButton: Button, cancelButton: Button}\n\t{\n\t\treturn this.cache.get('sliderButtons', {saveButton: null, cancelButton: null});\n\t}\n\n\tshow()\n\t{\n\t\tconst SidePanelInstance = Reflection.getClass('BX.SidePanel.Instance');\n\t\tif (Type.isNil(SidePanelInstance))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getPreview().hide();\n\t\tthis.getStatus().hide();\n\n\t\tSidePanelInstance.open('stampUploader', {\n\t\t\twidth: 640,\n\t\t\tcontentCallback: () => {\n\t\t\t\treturn Layout.createContent({\n\t\t\t\t\textensions: [\n\t\t\t\t\t\t'ui.stamp.uploader',\n\t\t\t\t\t],\n\t\t\t\t\tcontent: () => {\n\t\t\t\t\t\treturn this.getLayout();\n\t\t\t\t\t},\n\t\t\t\t\tdesign: {\n\t\t\t\t\t\tsection: false,\n\t\t\t\t\t},\n\t\t\t\t\tbuttons: ({cancelButton, SaveButton}) => {\n\t\t\t\t\t\tconst saveButton = new SaveButton({\n\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\tsaveButton.setWaiting(true);\n\n\t\t\t\t\t\t\t\tthis.upload()\n\t\t\t\t\t\t\t\t\t.then((uploaderFile) => {\n\t\t\t\t\t\t\t\t\t\tUploader.#delay(() => {\n\t\t\t\t\t\t\t\t\t\t\tthis.getPreview().show(uploaderFile.serverPreviewUrl);\n\t\t\t\t\t\t\t\t\t\t\tthis.getStatus().showPreparingStatus();\n\t\t\t\t\t\t\t\t\t\t}, 1000);\n\n\t\t\t\t\t\t\t\t\t\treturn this.emitAsync('onSaveAsync', {file: uploaderFile});\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\t\tthis.getStatus().hide();\n\n\t\t\t\t\t\t\t\t\t\tUploader.#delay(() => {\n\t\t\t\t\t\t\t\t\t\t\tsaveButton.setWaiting(false);\n\t\t\t\t\t\t\t\t\t\t\tsaveButton.setDisabled(true);\n\t\t\t\t\t\t\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t\t\t\t\t\t\t}, 500);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tsaveButton.setDisabled(true);\n\t\t\t\t\t\tthis.setSliderButtons({saveButton, cancelButton});\n\n\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\tsaveButton,\n\t\t\t\t\t\t\tcancelButton,\n\t\t\t\t\t\t];\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n}\n"],"names":["Header","constructor","options","cache","Cache","MemoryCache","setOptions","set","getOptions","get","setValue","value","Type","isString","isNumber","getValueLayout","textContent","remember","Tag","render","Text","encode","contact","label","getChangeContactButton","Button","text","Loc","getMessage","size","Size","EXTRA_SMALL","color","Color","LIGHT_BORDER","round","getLayout","appendTo","target","isDomNode","Dom","append","prependTo","prepend","renderTo","UploadLayout","children","map","item","Dropzone","EventEmitter","setEventNamespace","subscribeFromOptions","events","ActionPanel","getCropButton","onClick","event","preventDefault","emit","Status","formatSize","bytes","sizes","textIndex","Math","floor","log","number","parseFloat","pow","toFixed","getUploadStatusLayout","loaderLayout","loader","Loader","mode","show","updateUploadStatus","percent","percentNode","querySelector","sizeNode","innerHTML","replace","formatted","getPreparingStatusLayout","showUploadStatus","reset","layout","uploadStatusLayout","preparingStatusLayout","remove","setOpacity","showPreparingStatus","style","hide","removeClass","addClass","Preview","getImagePreviewLayout","getActionButtonLayout","src","backgroundImage","Message","FileSelect","getTakePhotoButton","LARGE","icon","Icon","CAMERA","onclick","getSelectPhotoButton","DOWNLOAD","Uploader","dropzoneLayout","getDropzone","previewLayout","getPreview","fileSelectButtonLayout","getFileSelect","FileUploader","controller","upload","assignAsFile","browseElement","getHiddenInput","dropElement","imagePreviewHeight","imagePreviewWidth","autoUpload","acceptedFileTypes","file","error","getData","isNil","getClientPreviewUrl","setUploaderFile","getMode","Mode","SLIDER","getSliderButtons","saveButton","setDisabled","INLINE","getInlineSaveButton","progress","getStatus","getSize","MessageBox","alert","getFileUploader","getUploaderFile","Object","values","includes","getHeader","onTakePhotoClick","onSelectPhotoClick","getUploadLayout","getActionPanel","Promise","resolve","uploadController","isFunction","getUploadController","subscribeOnce","fileInfo","button","PRIMARY","setWaiting","then","uploaderFile","serverPreviewUrl","emitAsync","setSliderButtons","buttons","cancelButton","SidePanelInstance","Reflection","getClass","open","width","contentCallback","Layout","createContent","extensions","content","design","section","SaveButton","BX","SidePanel","Instance","close","callback","delay","timeoutId","setTimeout","clearTimeout"],"mappings":"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"}