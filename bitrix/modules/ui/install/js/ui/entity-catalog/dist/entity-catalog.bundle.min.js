this.BX=this.BX||{};(function(t,e,s,i,a,n,l,o,r,p,c,u,d){"use strict";const h={beforeMount(t,e){u.Event.bind(t,"click",(t=>{t.preventDefault();BX.UI.Feedback.Form.open(e.value)}))}};const m={emits:["selected","unselected"],name:"ui-entity-catalog-group",props:{groupData:{type:n.GroupData,required:true}},computed:{hasIcon(){return u.Type.isStringFilled(this.groupData.icon)}},methods:{handleClick(){this.$emit(!this.groupData.selected?"selected":"unselected",this.groupData)}},template:`\n\t\t<slot name="group" v-bind:groupData="groupData" v-bind:handleClick="handleClick">\n\t\t\t<li \n\t\t\t\t:class="{\n\t\t\t\t\t'ui-entity-catalog__menu_item': true,\n\t\t\t\t\t'--active': groupData.selected,\n\t\t\t\t\t'--disabled': groupData.disabled\n\t\t\t\t}"\n\t\t\t\t@click="handleClick"\n\t\t\t>\n\t\t\t\t<span class="ui-entity-catalog__menu_item-icon" v-if="hasIcon" v-html="groupData.icon"/>\n\t\t\t\t<span class="ui-entity-catalog__menu_item-text">{{ groupData.name }}</span>\n\t\t\t</li>\n\t\t</slot>\n\t`};const g={emits:["groupSelected","groupUnselected"],name:"ui-entity-selector-group-list",components:{Group:m},props:{groups:{type:Array,required:true}},methods:{handleGroupSelected(t){this.$emit("groupSelected",t)},handleGroupUnselected(t){this.$emit("groupUnselected",t)}},template:`\n\t\t<ul class="ui-entity-catalog__menu">\n\t\t\t<Group\n\t\t\t\t:group-data="group"\n\t\t\t\t:key="group.id"\n\t\t\t\tv-for="group in groups"\n\t\t\t\t@selected="handleGroupSelected"\n\t\t\t\t@unselected="handleGroupUnselected"\n\t\t\t>\n\t\t\t\t<template #group="groupSlotProps">\n\t\t\t\t\t<slot\n\t\t\t\t\t\tname="group"\n\t\t\t\t\t\tv-bind:groupData="groupSlotProps.groupData"\n\t\t\t\t\t\tv-bind:handleClick="groupSlotProps.handleClick"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t</Group>\n\t\t</ul>\n\t`};const b={emits:["groupSelected"],name:"ui-entity-catalog-main-groups",components:{GroupList:g},props:{recentGroupData:{type:d.GroupData,required:false},groups:{type:Array,required:true},showRecentGroup:{type:Boolean,default:false},searching:{type:Boolean,default:false}},data(){var t,e;const s=this.getRecentGroup();s[0]=Object.assign(s[0],(t=this.recentGroupData)!=null?t:{});let i=(e=this.groups.find((t=>t.selected)))!=null?e:null;if(!i){var a;i=(a=s.find((t=>t.selected)))!=null?a:null}return{shownGroups:this.groups,selectedGroup:null,recentGroup:s}},watch:{selectedGroup(t){const e=t?t.id:null;this.shownGroups=this.shownGroups.map((t=>t.map((t=>({...t,selected:t.id===e})))));if(this.showRecentGroup&&e!==this.recentGroup[0].id){this.recentGroup=[Object.assign(this.recentGroup[0],{selected:false})]}this.$emit("groupSelected",t)}},beforeUpdate(){if(this.searching){this.shownGroups=this.shownGroups.map((t=>t.map((t=>({...t,selected:false})))));this.recentGroup=[Object.assign(this.recentGroup[0],{selected:false})]}},methods:{getRecentGroup(){return[{id:"recent",name:u.Loc.getMessage("UI_JS_ENTITY_CATALOG_GROUP_LIST_RECENT_GROUP_DEFAULT_NAME"),icon:`\n\t\t\t\t\t<svg width="18" height="14" viewBox="0 0 18 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t<path class="ui-entity-catalog__svg-icon-blue" fill-rule="evenodd" clip-rule="evenodd" d="M9.369 13.2593C13.0305 13.2593 15.9986 10.2911 15.9986 6.62965C15.9986 2.9682 13.0305 0 9.369 0C6.00693 0 3.22939 2.50263 2.79764 5.74663H0L3.69844 9.44506L7.39687 5.74663H4.48558C4.90213 3.4276 6.93006 1.66789 9.369 1.66789C12.1093 1.66789 14.3308 3.88935 14.3308 6.62965C14.3308 9.36995 12.1093 11.5914 9.369 11.5914C9.2435 11.5914 9.11909 11.5867 8.99593 11.5776V13.249C9.11941 13.2558 9.2438 13.2593 9.369 13.2593ZM10.0865 4.01429H8.41983V8.18096H9.65978H10.0865H12.1195V6.56367H10.0865V4.01429Z"></path>\n\t\t\t\t\t</svg>\n\t\t\t\t`}]},handleGroupSelected(t){this.selectedGroup=t},handleRecentGroupSelected(t){t.selected=true;this.selectedGroup=t},handleGroupUnselected(){this.selectedGroup=null}},template:`\n\t\t<div class="ui-entity-catalog__main-groups">\n\t\t\t<div class="ui-entity-catalog__main-groups-head">\n\t\t\t\t<slot name="group-list-header"/>\n\t\t\t</div>\n\t\t\t<div class="ui-entity-catalog__recently" v-if="showRecentGroup">\n\t\t\t\t<GroupList\n\t\t\t\t\t:groups="recentGroup"\n\t\t\t\t\t@groupSelected="handleRecentGroupSelected"\n\t\t\t\t\t@groupUnselected="handleGroupUnselected"\n\t\t\t\t>\n\t\t\t\t\t<template #group="groupSlotProps">\n\t\t\t\t\t\t<slot\n\t\t\t\t\t\t\tname="group"\n\t\t\t\t\t\t\tv-bind:groupData="groupSlotProps.groupData"\n\t\t\t\t\t\t\tv-bind:handleClick="groupSlotProps.handleClick"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</template>\n\t\t\t\t</GroupList>\n\t\t\t</div>\n\t\t\t<div class="ui-entity-catalog__main-groups-content">\n\t\t\t\t<GroupList\n\t\t\t\t\t:groups="groupList"\n\t\t\t\t\tv-for="groupList in shownGroups"\n\t\t\t\t\t@groupSelected="handleGroupSelected"\n\t\t\t\t\t@groupUnselected="handleGroupUnselected"\n\t\t\t\t>\n\t\t\t\t\t<template #group="groupSlotProps">\n\t\t\t\t\t\t<slot\n\t\t\t\t\t\t\tname="group"\n\t\t\t\t\t\t\tv-bind:groupData="groupSlotProps.groupData"\n\t\t\t\t\t\t\tv-bind:handleClick="groupSlotProps.handleClick"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</template>\n\t\t\t\t</GroupList>\n\t\t\t</div>\n\t\t\t<div class="ui-entity-catalog__main-groups-footer">\n\t\t\t\t<slot name="group-list-footer"/>\n\t\t\t</div>\n\t\t</div>\n\t`};const v={name:"ui-entity-catalog-item-list-advice",props:{groupData:{type:n.GroupData,required:true}},computed:{getAvatar:function(){return u.Type.isStringFilled(this.groupData.adviceAvatar)?this.groupData.adviceAvatar:"/bitrix/js/ui/entity-catalog/images/ui-entity-catalog--nata.jpg"}},methods:{renderAdvice(){u.Dom.clean(this.$refs.container);const t=new l.Advice({content:this.groupData.adviceTitle,avatarImg:this.getAvatar,anglePosition:l.Advice.AnglePosition.BOTTOM});t.renderTo(this.$refs.container)}},mounted(){this.renderAdvice()},updated(){this.renderAdvice()},template:`\n\t\t<div ref="container"></div>\n\t`};const y={name:"ui-entity-catalog-button",props:{buttonData:{type:r.ButtonData,required:true},eventData:{type:Object,required:true}},computed:{buttonText(){return u.Type.isStringFilled(this.buttonData.text)?this.buttonData.text:u.Loc.getMessage("UI_JS_ENTITY_CATALOG_ITEM_DEFAULT_BUTTON_TEXT")}},methods:{handleButtonClick(t){const e=new c.BaseEvent({data:{eventData:this.eventData,originalEvent:t}});if(u.Type.isFunction(this.buttonData.action)){this.buttonData.action.call(this,e)}}},template:`\n\t\t<div class="ui-entity-catalog__option-btn-block">\n\t\t\t<div class="ui-entity-catalog__btn" @click="handleButtonClick">{{buttonText}}</div>\n\t\t</div>\n\t`};const _={name:"ui-entity-catalog-item",components:{Button:y},props:{itemData:{type:o.ItemData,required:true}},computed:{buttonData(){if(!u.Type.isPlainObject(this.itemData.button)){this.itemData.button={}}return this.itemData.button}},template:`\n\t\t<slot name="item" v-bind:itemData="itemData">\n\t\t\t<div class="ui-entity-catalog__option">\n\t\t\t\t<div class="ui-entity-catalog__option-info">\n\t\t\t\t\t<div class="ui-entity-catalog__option-info_name">\n\t\t\t\t\t\t<span>{{itemData.title}}</span>\n\t\t\t\t\t\t<span class="ui-entity-catalog__option-info_label" v-if="itemData.subtitle">{{itemData.subtitle}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ui-entity-catalog__option-info_description">\n\t\t\t\t\t\t{{itemData.description}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<Button :buttonData="buttonData" :event-data="itemData"/>\n\t\t\t</div>\n\t\t</slot>\n\t`};const f={name:"ui-entity-selector-item-list",components:{Item:_},props:{items:{Type:Array,required:true}},template:`\n\t\t<div class="ui-entity-catalog__content --help-block" v-if="items.length <= 0">\n\t\t\t<slot name="empty-group-stub">\n\t\t\t\t<div class="ui-entity-catalog__empty-content">\n\t\t\t\t\t<div class="ui-entity-catalog__empty-content_icon">\n\t\t\t\t\t\t<img src="/bitrix/js/ui/entity-catalog/images/ui-entity-catalog--search-icon.svg" alt="Choose a grouping">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ui-entity-catalog__empty-content_text">\n\t\t\t\t\t\t<slot name="empty-group-stub-title"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</slot>\n\t\t</div>\n\t\t<div class="ui-entity-catalog__content" v-else>\n\t\t\t<div class="ui-entity-catalog__options">\n\t\t\t\t<Item \n\t\t\t\t\t:item-data="item"\n\t\t\t\t\t:key="item.id"\n\t\t\t\t\tv-for="item in items"\n\t\t\t\t>\n\t\t\t\t\t<template #item="itemSlotProps">\n\t\t\t\t\t\t<slot name="item" v-bind:itemData="itemSlotProps.itemData"/>\n\t\t\t\t\t</template>\n\t\t\t\t</Item>\n\t\t\t</div>\n\t\t</div>\n\t`};const T={name:"ui-entity-catalog-main-content",components:{ItemListAdvice:v,ItemList:f},props:{items:{type:Array,required:true},group:{type:n.GroupData,required:true},searching:{type:Boolean,default:false}},computed:{showAdvice(){return this.group&&u.Type.isStringFilled(this.group.adviceTitle)&&!this.searching},showNoSelectedGroupStub(){return!this.group&&!this.searching},showSearchStub(){return this.searching&&this.items.length<=0},showSeparator(){return this.showAdvice&&this.items.length<=0}},beforeUpdate(){this.$refs.content.scrollTop=0},template:`\n\t\t<div class="ui-entity-catalog__main-content">\n\t\t\t<div class="ui-entity-catalog__main-content-head">\n\t\t\t\t<slot name="main-content-header"/>\n\t\t\t</div>\n\t\t\t<ItemListAdvice v-if="showAdvice" :groupData="group" />\n\n\t\t\t<hr class="ui-entity-catalog__main-separator" v-if="showSeparator">\n\n\t\t\t<div class="ui-entity-catalog__main-content-body" ref="content">\n\t\t\t\t<slot name="main-content-no-selected-group-stub" v-if="showNoSelectedGroupStub"/>\n\t\t\t\t<slot name="main-content-search-stub" v-else-if="showSearchStub">\n\t\t\t\t\t<div class="ui-entity-catalog__content --help-block">\n\t\t\t\t\t\t<div class="ui-entity-catalog__empty-content">\n\t\t\t\t\t\t\t<div class="ui-entity-catalog__empty-content_icon">\n\t\t\t\t\t\t\t\t<img src="/bitrix/js/ui/entity-catalog/images/ui-entity-catalog--search-icon.svg" alt="Choose a grouping">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="ui-entity-catalog__empty-content_text">\n\t\t\t\t\t\t\t\t<slot name="main-content-search-not-found-stub"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</slot>\n\t\t\t\t<ItemList v-else :items="items">\n\t\t\t\t\t<template #empty-group-stub>\n\t\t\t\t\t\t<slot name="main-content-empty-group-stub"/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template #empty-group-stub-title>\n\t\t\t\t\t\t<slot name="main-content-empty-group-stub-title"/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template #item="itemSlotProps">\n\t\t\t\t\t\t<slot name="item" v-bind:itemData="itemSlotProps.itemData"/>\n\t\t\t\t\t</template>\n\t\t\t\t</ItemList>\n\t\t\t</div>\n\t\t</div>\n\t`};let P=t=>t,S,L;const F={emits:["onApplyFilters"],name:"ui-entity-catalog-titlebar-filter",props:{filters:{type:Array,required:true},multiple:{type:Boolean,default:false}},data(){return{appliedFilters:this.getAppliedFilters(),allFilters:this.filters}},methods:{showMenu(){p.MenuManager.create({id:"ui-entity-catalog-titlebar-filter-menu",bindElement:this.$el,minWidth:271,autoHide:true,contentColor:"white",draggable:false,cacheable:false,items:this.getItems()}).show()},getItems(){const t=[];for(const e in this.allFilters){const s=u.Tag.render(S||(S=P`
					<div style="display: flex">
						<div>${0}</div>
					</div>
				`),u.Text.encode(this.filters[e].text));if(this.allFilters[e].applied){u.Dom.append(u.Tag.render(L||(L=P`<div class="ui-entity-catalog__filter-block_selected"></div>`)),s)}t.push({html:s,onclick:(t,s)=>{if(this.allFilters[e].applied){delete this.appliedFilters[this.allFilters[e].id]}else{if(!this.multiple){this.clearAllAction()}this.appliedFilters[this.allFilters[e].id]=this.allFilters[e]}this.allFilters[e].applied=!this.allFilters[e].applied;this.$emit("onApplyFilters",new c.BaseEvent({data:this.appliedFilters}));s.getMenuWindow().close()}})}t.push({delimiter:true});t.push(this.getClearAllFilter());return t},getClearAllFilter(){return{html:`\n\t\t\t\t\t<div style="display: flex">\n\t\t\t\t\t\t<div>${u.Loc.getMessage("UI_JS_ENTITY_CATALOG_RESET_FILTER")}</div>\n\t\t\t\t\t</div>\n\t\t\t\t`,onclick:(t,e)=>{this.clearAllAction();this.$emit("onApplyFilters",new c.BaseEvent({data:this.appliedFilters}));e.getMenuWindow().close()}}},clearAllAction(){this.appliedFilters={};this.allFilters=this.allFilters.map((t=>({...t,applied:false})))},getAppliedFilters(){const t={};for(const e in this.filters){if(this.filters[e].applied){t[this.filters[e].id]=this.filters[e]}}if(Object.keys(t).length>0){this.$emit("onApplyFilters",new c.BaseEvent({data:t}))}return t}},template:`\n\t\t<div \n\t\t\t:class="{\n\t\t\t\t'ui-entity-catalog__titlebar_btn-filter': true,\n\t\t\t\t'--active': Object.keys(appliedFilters).length > 0\n\t\t\t}"\n\t\t\t@click="showMenu">\n\t\t</div>\n\t`};const G={emits:["onSearch"],name:"ui-entity-catalog-titlebar-search",data(){return{opened:false,debounceSearchHandler:null,queryString:"",showClearSearch:false}},watch:{queryString(t){this.showClearSearch=this.opened&&this.$refs["search-input"]&&u.Type.isStringFilled(t)}},created(){this.debounceSearchHandler=u.debounce((t=>{this.onSearch(t.target.value)}),255)},methods:{openSearch(){this.opened=true;this.$nextTick((()=>{this.$refs["search-input"].focus()}))},onSearch(t){this.queryString=t;this.$emit("onSearch",new c.BaseEvent({data:{queryString:t?t.toString():""}}))},clearSearch(){if(this.showClearSearch){this.$refs["search-input"].value="";this.onSearch("")}}},template:`\n\t\t<div class="ui-ctl ui-ctl-after-icon ui-ctl-w100 ui-ctl-round" @click.once="openSearch">\n\t\t\t<a \n\t\t\t\t:class="{\n\t\t\t\t\t'ui-ctl-after': true,\n\t\t\t\t\t'ui-ctl-icon-search': !showClearSearch,\n\t\t\t\t\t'ui-ctl-icon-clear': showClearSearch\n\t\t\t\t}"\n\t\t\t\t@click="clearSearch"\n\t\t\t/>\n\t\t\t<input\n\t\t\t\ttype="text"\n\t\t\t\tclass="ui-ctl-element ui-ctl-textbox"\n\t\t\t\tplaceholder="${u.Loc.getMessage("UI_JS_ENTITY_CATALOG_GROUP_LIST_SEARCH_PLACEHOLDER")}"\n\t\t\t\tref="search-input"\n\t\t\t\tv-if="opened"\n\t\t\t\t@input="debounceSearchHandler"\n\t\t\t/>\n\t\t</div>\n\t`};const O={name:"ui-entity-catalog-application",components:{MainGroups:b,MainContent:T,TitleBarFilter:F,Search:G},props:{recentGroupData:{type:d.GroupData,required:false},groups:{type:Array,required:true},items:{type:Array,required:true},showEmptyGroups:{type:Boolean,default:false},showRecentGroup:{type:Boolean,default:true},filterOptions:{type:Object,default:{filterItems:[],multiple:false}}},data(){var t,e,s;let i=null;for(const t of this.groups){i=t.find((t=>t.selected));if(i){break}}if(u.Type.isNil(i)&&(t=this.recentGroupData)!=null&&t.selected){var a;i={id:"recent",...(a=this.recentGroupData)!=null?a:{}}}return{selectedGroup:i,selectedGroupId:(e=(s=i)==null?void 0:s.id)!=null?e:null,shownItems:[],shownGroups:this.getDisplayedGroup(),searching:false,lastSearchString:"",filters:[]}},computed:{itemsBySelectedGroupId(){var t;const e=this.items.filter((t=>t.groupIds.some((t=>t===this.selectedGroupId))));return(t=this.selectedGroup)!=null&&t.compare?e.sort(this.selectedGroup.compare):e}},watch:{selectedGroupId(){if(this.searching){return}this.shownItems=this.itemsBySelectedGroupId;this.applyFilters()}},created(){this.shownItems=this.itemsBySelectedGroupId},methods:{getDisplayedGroup(){if(this.showEmptyGroups){return u.Runtime.clone(this.groups)}const t=new Set;this.items.forEach((e=>{e.groupIds.forEach((e=>{t.add(e)}))}));return this.groups.map((e=>e.filter((e=>t.has(e.id))))).filter((t=>t.length>0))},handleGroupSelected(t){var e;this.searching=false;(e=this.$refs.search)==null?void 0:e.clearSearch();this.selectedGroupId=t?t.id:null;this.selectedGroup=t!=null?t:null},onSearch(t){const e=t.getData().queryString.toLowerCase();this.lastSearchString=e;if(!u.Type.isStringFilled(e)){this.searching=false;this.shownItems=[];return}this.searching=true;this.selectedGroup=null;this.selectedGroupId=null;this.shownItems=this.items.filter((t=>{var s;return String(t.title).toLowerCase().includes(e)||String(t.description).toLowerCase().includes(e)||((s=t.tags)==null?void 0:s.some((t=>t===e)))}));this.applyFilters()},onApplyFilterClick(t){this.filters=t.getData();if(this.searching){this.onSearch(new c.BaseEvent({data:{queryString:this.lastSearchString}}));return}this.shownItems=this.itemsBySelectedGroupId;this.applyFilters()},applyFilters(){for(const t in this.filters){this.shownItems=this.shownItems.filter(this.filters[t].action)}},getFilterNode(){return this.$root.$app.getPopup().getTitleContainer().querySelector('[data-role="titlebar-filter"]')},getSearchNode(){return this.$root.$app.getPopup().getTitleContainer().querySelector('[data-role="titlebar-search"]')},stopPropagation(t){t.stopPropagation()}},template:`\n\t\t<div class="ui-entity-catalog__main">\n\t\t\t<MainGroups\n\t\t\t\t:recent-group-data="this.recentGroupData"\n\t\t\t\t:groups="this.shownGroups"\n\t\t\t\t:show-recent-group="showRecentGroup"\n\t\t\t\t:searching="searching"\n\t\t\t\t@group-selected="handleGroupSelected"\n\t\t\t>\n\t\t\t\t<template #group-list-header>\n\t\t\t\t\t<slot name="group-list-header"/>\n\t\t\t\t</template>\n\t\t\t\t<template #group="groupSlotProps">\n\t\t\t\t\t<slot\n\t\t\t\t\t\tname="group"\n\t\t\t\t\t\tv-bind:groupData="groupSlotProps.groupData"\n\t\t\t\t\t\tv-bind:handleClick="groupSlotProps.handleClick"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t\t<template #group-list-footer>\n\t\t\t\t\t<slot name="group-list-footer"/>\n\t\t\t\t</template>\n\t\t\t</MainGroups>\n\t\t\t<MainContent\n\t\t\t\t:items="shownItems"\n\t\t\t\t:group="selectedGroup"\n\t\t\t\t:searching="searching"\n\t\t\t>\n\t\t\t\t<template #main-content-header>\n\t\t\t\t\t<slot name="main-content-header"/>\n\t\t\t\t</template>\n\t\t\t\t<template #main-content-no-selected-group-stub>\n\t\t\t\t\t<slot name="main-content-no-selected-group-stub"/>\n\t\t\t\t</template>\n\t\t\t\t<template #main-content-search-not-found-stub>\n\t\t\t\t\t<slot name="main-content-search-not-found-stub"/>\n\t\t\t\t</template>\n\t\t\t\t<template #main-content-empty-group-stub>\n\t\t\t\t\t<slot name="main-content-empty-group-stub"/>\n\t\t\t\t</template>\n\t\t\t\t<template #main-content-empty-group-stub-title>\n\t\t\t\t\t<slot name="main-content-empty-group-stub-title"/>\n\t\t\t\t</template>\n\t\t\t\t<template #item="itemSlotProps">\n\t\t\t\t\t<slot name="item" v-bind:itemData="itemSlotProps.itemData"/>\n\t\t\t\t</template>\n\t\t\t</MainContent>\n\t\t\t<Teleport v-if="getFilterNode()" :to="getFilterNode()">\n\t\t\t\t<TitleBarFilter\n\t\t\t\t\t:filters="filterOptions.filterItems"\n\t\t\t\t\t:multiple="filterOptions.multiple"\n\t\t\t\t\t@onApplyFilters="onApplyFilterClick"\n\t\t\t\t\t@mousedown="stopPropagation"\n\t\t\t\t/>\n\t\t\t</Teleport>\n\t\t\t<Teleport v-if="getSearchNode()" :to="getSearchNode()">\n\t\t\t\t<Search @onSearch="onSearch" ref="search" @mousedown="stopPropagation"/>\n\t\t\t</Teleport>\n\t\t</div>\n\t`};let B=t=>t,w,D;var E=babelHelpers.classPrivateFieldLooseKey("popup");var H=babelHelpers.classPrivateFieldLooseKey("popupOptions");var A=babelHelpers.classPrivateFieldLooseKey("popupTitle");var I=babelHelpers.classPrivateFieldLooseKey("customTitleBar");var C=babelHelpers.classPrivateFieldLooseKey("groups");var U=babelHelpers.classPrivateFieldLooseKey("items");var N=babelHelpers.classPrivateFieldLooseKey("recentGroupData");var R=babelHelpers.classPrivateFieldLooseKey("showEmptyGroups");var M=babelHelpers.classPrivateFieldLooseKey("showRecentGroup");var $=babelHelpers.classPrivateFieldLooseKey("showSearch");var k=babelHelpers.classPrivateFieldLooseKey("filterOptions");var j=babelHelpers.classPrivateFieldLooseKey("application");var x=babelHelpers.classPrivateFieldLooseKey("slots");var q=babelHelpers.classPrivateFieldLooseKey("attachTemplate");var X=babelHelpers.classPrivateFieldLooseKey("getDefaultPopupOptions");var K=babelHelpers.classPrivateFieldLooseKey("getPopupTitleBar");var Y=babelHelpers.classPrivateFieldLooseKey("handleClose");class V extends c.EventEmitter{constructor(t){var e;super();Object.defineProperty(this,Y,{value:z});Object.defineProperty(this,K,{value:Z});Object.defineProperty(this,X,{value:J});Object.defineProperty(this,q,{value:W});Object.defineProperty(this,E,{writable:true,value:void 0});Object.defineProperty(this,H,{writable:true,value:void 0});Object.defineProperty(this,A,{writable:true,value:void 0});Object.defineProperty(this,I,{writable:true,value:null});Object.defineProperty(this,C,{writable:true,value:[]});Object.defineProperty(this,U,{writable:true,value:[]});Object.defineProperty(this,N,{writable:true,value:void 0});Object.defineProperty(this,R,{writable:true,value:false});Object.defineProperty(this,M,{writable:true,value:false});Object.defineProperty(this,$,{writable:true,value:false});Object.defineProperty(this,k,{writable:true,value:{filterItems:[],multiple:false}});Object.defineProperty(this,j,{writable:true,value:void 0});Object.defineProperty(this,x,{writable:true,value:void 0});this.setEventNamespace("BX.UI.EntityCatalog");this.setGroups(u.Type.isArray(t.groups)?t.groups:[]);this.setItems(u.Type.isArray(t.items)?t.items:[]);babelHelpers.classPrivateFieldLooseBase(this,N)[N]=t.recentGroupData;babelHelpers.classPrivateFieldLooseBase(this,R)[R]=u.Type.isBoolean(t.showEmptyGroups)?t.showEmptyGroups:false;babelHelpers.classPrivateFieldLooseBase(this,M)[M]=u.Type.isBoolean(t.showRecentGroup)?t.showRecentGroup:false;babelHelpers.classPrivateFieldLooseBase(this,$)[$]=u.Type.isBoolean(t.showSearch)?t.showSearch:false;if(u.Type.isPlainObject(t.filterOptions)){babelHelpers.classPrivateFieldLooseBase(this,k)[k]=t.filterOptions}babelHelpers.classPrivateFieldLooseBase(this,A)[A]=u.Type.isString(t.title)?t.title:"";babelHelpers.classPrivateFieldLooseBase(this,I)[I]=t.customTitleBar?t.customTitleBar:null;babelHelpers.classPrivateFieldLooseBase(this,H)[H]=Object.assign(babelHelpers.classPrivateFieldLooseBase(this,X)[X](),u.Type.isObject(t.popupOptions)?t.popupOptions:{});babelHelpers.classPrivateFieldLooseBase(this,x)[x]=(e=t.slots)!=null?e:{};this.subscribeFromOptions(t.events)}setGroups(t){babelHelpers.classPrivateFieldLooseBase(this,C)[C]=t.map((t=>{if(!u.Type.isArray(t)){t=[t]}return t.map((t=>({selected:false,...t})))}));return this}getItems(){return babelHelpers.classPrivateFieldLooseBase(this,U)[U]}setItems(t){t=t.map((t=>({button:{},...t})));babelHelpers.classPrivateFieldLooseBase(this,U)[U].length=0;babelHelpers.classPrivateFieldLooseBase(this,U)[U].push(...t);return this}show(){babelHelpers.classPrivateFieldLooseBase(this,q)[q]();this.getPopup().show()}isShown(){return babelHelpers.classPrivateFieldLooseBase(this,E)[E]&&babelHelpers.classPrivateFieldLooseBase(this,E)[E].isShown()}getPopup(){if(u.Type.isNil(babelHelpers.classPrivateFieldLooseBase(this,E)[E])){babelHelpers.classPrivateFieldLooseBase(this,E)[E]=new p.Popup(babelHelpers.classPrivateFieldLooseBase(this,H)[H]);babelHelpers.classPrivateFieldLooseBase(this,E)[E].setResizeMode(true)}return babelHelpers.classPrivateFieldLooseBase(this,E)[E]}close(){babelHelpers.classPrivateFieldLooseBase(this,j)[j].unmount();this.getPopup().close()}}function W(){var t,i,a,n,l,o,r,p,c;const d=this;const m={recentGroupData:babelHelpers.classPrivateFieldLooseBase(this,N)[N],groups:babelHelpers.classPrivateFieldLooseBase(this,C)[C],items:babelHelpers.classPrivateFieldLooseBase(this,U)[U],showEmptyGroups:babelHelpers.classPrivateFieldLooseBase(this,R)[R],showRecentGroups:babelHelpers.classPrivateFieldLooseBase(this,M)[M],filterOptions:babelHelpers.classPrivateFieldLooseBase(this,k)[k]};babelHelpers.classPrivateFieldLooseBase(this,j)[j]=e.BitrixVue.createApp({name:"ui-entity-catalog",components:{Application:O,Hint:s.Hint,Button:y},directives:{feedback:h},props:{recentGroupData:Object,groups:Array,items:Array,showEmptyGroups:Boolean,showRecentGroups:Boolean,filterOptions:Object},created(){this.$app=d},template:`\n\t\t\t\t\t<Application\n\t\t\t\t\t\t:recent-group-data="recentGroupData"\n\t\t\t\t\t\t:groups="groups"\n\t\t\t\t\t\t:items="items"\n\t\t\t\t\t\t:show-empty-groups="showEmptyGroups"\n\t\t\t\t\t\t:show-recent-group="showRecentGroups"\n\t\t\t\t\t\t:filter-options="filterOptions"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template #group-list-header>\n\t\t\t\t\t\t\t${(t=babelHelpers.classPrivateFieldLooseBase(this,x)[x][V.SLOT_GROUP_LIST_HEADER])!=null?t:""}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template #group="groupSlotProps">\n\t\t\t\t\t\t\t${(i=babelHelpers.classPrivateFieldLooseBase(this,x)[x][V.SLOT_GROUP])!=null?i:""}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template #group-list-footer>\n\t\t\t\t\t\t\t${(a=babelHelpers.classPrivateFieldLooseBase(this,x)[x][V.SLOT_GROUP_LIST_FOOTER])!=null?a:""}\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<template #main-content-header>\n\t\t\t\t\t\t\t${(n=babelHelpers.classPrivateFieldLooseBase(this,x)[x][V.SLOT_MAIN_CONTENT_HEADER])!=null?n:""}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template #main-content-search-not-found-stub>\n\t\t\t\t\t\t\t${(l=babelHelpers.classPrivateFieldLooseBase(this,x)[x][V.SLOT_MAIN_CONTENT_SEARCH_NOT_FOUND])!=null?l:u.Loc.getMessage("UI_JS_ENTITY_CATALOG_GROUP_LIST_ITEM_LIST_SEARCH_STUB_DEFAULT_TITLE")}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template #main-content-no-selected-group-stub>\n\t\t\t\t\t\t\t${(o=babelHelpers.classPrivateFieldLooseBase(this,x)[x][V.SLOT_MAIN_CONTENT_NO_SELECTED_GROUP_STUB])!=null?o:""}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template #main-content-empty-group-stub>\n\t\t\t\t\t\t\t${(r=babelHelpers.classPrivateFieldLooseBase(this,x)[x][V.SLOT_MAIN_CONTENT_EMPTY_GROUP_STUB])!=null?r:""}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template #main-content-empty-group-stub-title>\n\t\t\t\t\t\t\t${(p=babelHelpers.classPrivateFieldLooseBase(this,x)[x][V.SLOT_MAIN_CONTENT_EMPTY_GROUP_STUB_TITLE])!=null?p:""}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template #item="itemSlotProps">\n\t\t\t\t\t\t\t${(c=babelHelpers.classPrivateFieldLooseBase(this,x)[x][V.SLOT_MAIN_CONTENT_ITEM])!=null?c:""}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</Application>\n\t\t\t\t`},m);babelHelpers.classPrivateFieldLooseBase(this,j)[j].mount(this.getPopup().getContentContainer())}function J(){return{className:"ui-catalog-popup ui-entity-catalog__scope",titleBar:babelHelpers.classPrivateFieldLooseBase(this,K)[K](),noAllPaddings:true,closeByEsc:true,contentBackground:V.DEFAULT_POPUP_COLOR,draggable:true,width:V.DEFAULT_POPUP_WIDTH,height:V.DEFAULT_POPUP_HEIGHT,minWidth:V.DEFAULT_POPUP_WIDTH,minHeight:V.DEFAULT_POPUP_HEIGHT,autoHide:false}}function Z(){const t=babelHelpers.classPrivateFieldLooseBase(this,I)[I]?babelHelpers.classPrivateFieldLooseBase(this,I)[I]:u.Tag.render(w||(w=B`<div>${0}</div>`),u.Text.encode(babelHelpers.classPrivateFieldLooseBase(this,A)[A]));return{content:u.Tag.render(D||(D=B`
				<div class="popup-window-titlebar-text ui-entity-catalog-popup-titlebar">
					${0}
					
					${0}
					${0}
					<span
						class="popup-window-close-icon popup-window-titlebar-close-icon"
						onclick="${0}"
						></span>
				</div>
			`),t,babelHelpers.classPrivateFieldLooseBase(this,$)[$]?`<div class="ui-entity-catalog__titlebar_search" data-role="titlebar-search"></div>`:"",babelHelpers.classPrivateFieldLooseBase(this,k)[k].filterItems.length>0?'<div data-role="titlebar-filter"></div>':"",babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].bind(this))}}function z(){this.close()}V.DEFAULT_POPUP_WIDTH=881;V.DEFAULT_POPUP_HEIGHT=621;V.DEFAULT_POPUP_COLOR="#edeef0";V.SLOT_GROUP_LIST_HEADER="group-list-header";V.SLOT_GROUP="group";V.SLOT_GROUP_LIST_FOOTER="group-list-footer";V.SLOT_MAIN_CONTENT_HEADER="main-content-header";V.SLOT_MAIN_CONTENT_SEARCH_NOT_FOUND="search-not-found";V.SLOT_MAIN_CONTENT_NO_SELECTED_GROUP_STUB="main-content-no-selected-group-stub";V.SLOT_MAIN_CONTENT_EMPTY_GROUP_STUB="main-content-empty-group-stub";V.SLOT_MAIN_CONTENT_EMPTY_GROUP_STUB_TITLE="main-content-empty-group-stub-title";V.SLOT_MAIN_CONTENT_ITEM="main-content-item";t.EntityCatalog=V})(this.BX.UI=this.BX.UI||{},BX.Vue3,BX.Vue3.Components,BX,BX,BX,BX.Ui,BX,BX,BX.Main,BX.Event,BX,BX);
//# sourceMappingURL=entity-catalog.bundle.map.js